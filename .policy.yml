# This file is generated by generate-policy-bot-config.
# Do not edit directly. Run "make .policy.yml" to update.

# The contents of ".policy.yml.tmpl" were merged with the generated parts of this config.
# To add additional policies to the config, update this file and then run "make .policy.yml".

policy:
  approval:
    - or:
        - and:
            - Workflow .github/workflows/ci.yml succeeded or skipped
            - Workflow .github/workflows/danger-js.yml succeeded or skipped
            - Workflow .github/workflows/is-compatible.yml succeeded or skipped
            - Workflow .github/workflows/validate-policy-bot-config.yml succeeded or skipped
            - default to approval
        - override policies
    - policy bot config is valid when modified
approval_rules:
  - name: Workflow .github/workflows/ci.yml succeeded or skipped
    if:
      targets_branch:
        pattern: (^main$)
    requires:
      conditions:
        has_workflow_result:
          conclusions:
            - skipped
            - success
          workflows:
            - .github/workflows/ci.yml
  - name: Workflow .github/workflows/danger-js.yml succeeded or skipped
    if:
      targets_branch:
        pattern: (^main$)
    requires:
      conditions:
        has_workflow_result:
          conclusions:
            - skipped
            - success
          workflows:
            - .github/workflows/danger-js.yml
  - name: Workflow .github/workflows/is-compatible.yml succeeded or skipped
    requires:
      conditions:
        has_workflow_result:
          conclusions:
            - skipped
            - success
          workflows:
            - .github/workflows/is-compatible.yml
  - name: Workflow .github/workflows/validate-policy-bot-config.yml succeeded or skipped
    if:
      changed_files:
        paths:
          - ^\.policy\.yml$
    requires:
      conditions:
        has_workflow_result:
          conclusions:
            - skipped
            - success
          workflows:
            - .github/workflows/validate-policy-bot-config.yml
  - name: default to approval
  - name: policy bot config is valid when modified
    if:
      changed_files:
        paths:
          - ^\.policy\.yml
    requires:
      conditions:
        has_successful_status:
          - Validate policy bot config
  - name: override policies
    options:
      methods:
        comments:
          - 'policy bot: approve'
          - 'policy-bot: approve'
        github_review: false
    requires:
      count: 1
      permissions:
        - write
