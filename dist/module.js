/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","emotion","@grafana/runtime","@grafana/data"],(function(e,t,n,r,i){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=32)}([function(t,n){t.exports=e},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"e",(function(){return f}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}function f(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n.n(i),o=n(2),s=n(4),c=function(e){var t=e.info,n=s.config.datasources[t.grafanaName];return n?a.a.createElement("div",{className:"add-data-source-item",onClick:function(){"synthetic-monitoring-datasource"===(null==n?void 0:n.type)?Object(s.getLocationSrv)().update({partial:!1,path:"a/grafana-synthetic-monitoring-app/"}):Object(s.getLocationSrv)().update({partial:!1,path:"datasources/edit/"+(null==n?void 0:n.id)+"/"})}},a.a.createElement("img",{className:"add-data-source-item-logo",src:n.meta.info.logos.small}),a.a.createElement("div",{className:"add-data-source-item-text-wrapper"},a.a.createElement("span",{className:"add-data-source-item-text"},n.name),a.a.createElement("span",{className:"add-data-source-item-desc"},n.type)),a.a.createElement("div",{className:"add-data-source-item-actions"},a.a.createElement(o.Button,null,"Edit"))):a.a.createElement("div",null,"Loading...")},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.c)(t,e),t.prototype.render=function(){var e=this.props.settings;return e?a.a.createElement("div",null,a.a.createElement("h2",null,"Linked Data Sources"),a.a.createElement(o.Container,{margin:"sm"},a.a.createElement(c,{info:e.metrics}),a.a.createElement(c,{info:e.logs}))):a.a.createElement("div",null,"Loading...")},t}(i.PureComponent);n.d(t,"a",(function(){return l}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return s(l(e),arguments)}function o(e,t){return a.apply(null,[e].concat(t||[]))}function s(e,t){var n,r,o,s,c,l,u,d,f,p=1,h=e.length,m="";for(r=0;r<h;r++)if("string"==typeof e[r])m+=e[r];else if("object"==typeof e[r]){if((s=e[r]).keys)for(n=t[p],o=0;o<s.keys.length;o++){if(null==n)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[o],s.keys[o-1]));n=n[s.keys[o]]}else n=s.param_no?t[s.param_no]:t[p++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),i.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(a("[sprintf] expecting number but found %T",n));switch(i.number.test(s.type)&&(d=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?m+=n:(!i.number.test(s.type)||d&&!s.sign?f="":(f=d?"+":"-",n=n.toString().replace(i.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(f+n).length,c=s.width&&u>0?l.repeat(u):"",m+=s.align?f+n+c:"0"===l?f+c+n:c+f+n)}return m}var c=Object.create(null);function l(e){if(c[e])return c[e];for(var t,n=e,r=[],a=0;n;){if(null!==(t=i.text.exec(n)))r.push(t[0]);else if(null!==(t=i.modulo.exec(n)))r.push("%");else{if(null===(t=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var o=[],s=t[2],l=[];if(null===(l=i.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(l[1]);""!==(s=s.substring(l[0].length));)if(null!==(l=i.key_access.exec(s)))o.push(l[1]);else{if(null===(l=i.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(l[1])}t[2]=o}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return c[e]=r}t.sprintf=a,t.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=o,void 0===(r=function(){return{sprintf:a,vsprintf:o}}.call(t,n,t,e))||(e.exports=r))}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(1),i=n(0),a=n.n(i),o=n(2),s=n(6),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAccessTokenChange=function(e){var n=t.props,i=n.onOptionsChange,a=n.options;i(Object(r.a)(Object(r.a)({},a),{secureJsonData:{accessToken:e.target.value}}))},t.onResetAccessToken=function(){var e=t.props,n=e.onOptionsChange,i=e.options;n(Object(r.a)(Object(r.a)({},i),{secureJsonFields:Object(r.a)(Object(r.a)({},i.secureJsonFields),{accessToken:!1}),secureJsonData:Object(r.a)(Object(r.a)({},i.secureJsonData),{accessToken:""})}))},t}return Object(r.c)(t,e),t.prototype.render=function(){var e=this.props.options,t=e.secureJsonFields,n=e.secureJsonData||{};function r(){return t&&t.accessToken}return a.a.createElement("div",null,l(e.jsonData)&&r()&&a.a.createElement(s.a,{settings:e.jsonData}),a.a.createElement("br",null),a.a.createElement("div",{className:"gf-form-group"},a.a.createElement("div",{className:"gf-form-inline"},a.a.createElement("div",{className:"gf-form"},a.a.createElement(o.LegacyForms.SecretFormField,{isConfigured:r(),value:n.accessToken||"",label:"Access Token",placeholder:"access token saved on the server",labelWidth:10,inputWidth:20,onReset:this.onResetAccessToken,onChange:this.onAccessTokenChange})))))},t}(i.PureComponent);function l(e){if(!e)return!1;var t=e.apiHost,n=e.metrics,r=e.logs;return!!(t&&n&&n.grafanaName&&n.hostedId)&&!!(r&&r.grafanaName&&r.hostedId)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports=n(24)},function(e,t){t.BITS=32,t.GROUPS=4,t.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,t.RE_SUBNET_STRING=/\/\d{1,2}$/},function(e,t){t.BITS=128,t.GROUPS=8,t.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},t.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},t.RE_BAD_CHARACTERS=/([^0-9a-f:\/%])/gi,t.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,t.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,t.RE_ZONE_STRING=/%.*$/,t.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),t.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)},function(e,t,n){"use strict";t.Address4=n(15),t.Address6=n(25),t.v6={helpers:n(20)}},function(e,t,n){"use strict";var r=n(16).BigInteger,i=n(17),a=n(8).sprintf,o=n(18),s=n(19),c=n(12);function l(e){this.valid=!1,this.address=e,this.groups=c.GROUPS,this.v4=!0,this.subnet="/32",this.subnetMask=32;var t=c.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>c.BITS)return this.valid=!1,void(this.error="Invalid subnet mask.");e=e.replace(c.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}l.prototype.parse=function(e){var t=e.split(".");return e.match(c.RE_ADDRESS)?this.valid=!0:this.error="Invalid IPv4 address.",t},l.prototype.isValid=function(){return this.valid},l.prototype.correctForm=function(){return this.parsedAddress.map((function(e){return parseInt(e,10)})).join(".")},l.prototype.isCorrect=i.isCorrect(c.BITS),l.fromHex=function(e){var t,n=o(e.replace(/:/g,""),8,"0"),r=[];for(t=0;t<8;t+=2){var i=n.slice(t,t+2);r.push(parseInt(i,16))}return new l(r.join("."))},l.fromInteger=function(e){return l.fromHex(e.toString(16))},l.prototype.toHex=function(){return this.parsedAddress.map((function(e){return a("%02x",parseInt(e,10))})).join(":")},l.prototype.toArray=function(){return this.parsedAddress.map((function(e){return parseInt(e,10)}))},l.prototype.toGroup6=function(){var e,t=[];for(e=0;e<c.GROUPS;e+=2){var n=a("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push(a("%x",parseInt(n,16)))}return t.join(":")},l.prototype.bigInteger=function(){return this.valid?new r(this.parsedAddress.map((function(e){return a("%02x",parseInt(e,10))})).join(""),16):null},l.prototype._startAddress=function(){return new r(this.mask()+s("0",c.BITS-this.subnetMask),2)},l.prototype.startAddress=function(){return l.fromBigInteger(this._startAddress())},l.prototype.startAddressExclusive=function(){var e=new r("1");return l.fromBigInteger(this._startAddress().add(e))},l.prototype._endAddress=function(){return new r(this.mask()+s("1",c.BITS-this.subnetMask),2)},l.prototype.endAddress=function(){return l.fromBigInteger(this._endAddress())},l.prototype.endAddressExclusive=function(){var e=new r("1");return l.fromBigInteger(this._endAddress().subtract(e))},l.fromBigInteger=function(e){return l.fromInteger(parseInt(e.toString(),10))},l.prototype.mask=function(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)},l.prototype.getBitsBase2=function(e,t){return this.binaryZeroPad().slice(e,t)},l.prototype.isInSubnet=i.isInSubnet,l.prototype.isMulticast=function(){return this.isInSubnet(new l("224.0.0.0/4"))},l.prototype.binaryZeroPad=function(){return o(this.bigInteger().toString(2),c.BITS,"0")},e.exports=l},function(e,t,n){(function(){var t;function n(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new n(null)}var i="undefined"!=typeof navigator;i&&"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=function(e,t,n,r,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var c=32767&this[e],l=this[e++]>>15,u=s*c+l*o;i=((c=o*c+((32767&u)<<15)+n[r]+(1073741823&i))>>>30)+(u>>>15)+s*l+(i>>>30),n[r++]=1073741823&c}return i},t=30):i&&"Netscape"!=navigator.appName?(n.prototype.am=function(e,t,n,r,i,a){for(;--a>=0;){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},t=26):(n.prototype.am=function(e,t,n,r,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var c=16383&this[e],l=this[e++]>>14,u=s*c+l*o;i=((c=o*c+((16383&u)<<14)+n[r]+i)>>28)+(u>>14)+s*l,n[r++]=268435455&c}return i},t=28),n.prototype.DB=t,n.prototype.DM=(1<<t)-1,n.prototype.DV=1<<t;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-t,n.prototype.F2=2*t-52;var a,o,s=new Array;for(a="0".charCodeAt(0),o=0;o<=9;++o)s[a++]=o;for(a="a".charCodeAt(0),o=10;o<36;++o)s[a++]=o;for(a="A".charCodeAt(0),o=10;o<36;++o)s[a++]=o;function c(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function l(e,t){var n=s[e.charCodeAt(t)];return null==n?-1:n}function u(e){var t=r();return t.fromInt(e),t}function d(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function f(e){this.m=e}function p(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function h(e,t){return e&t}function m(e,t){return e|t}function v(e,t){return e^t}function b(e,t){return e&~t}function g(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function y(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function E(){}function O(e){return e}function j(e){this.r2=r(),this.q3=r(),n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}f.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},f.prototype.revert=function(e){return e},f.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},f.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},p.prototype.convert=function(e){var t=r();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},p.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},p.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},p.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},n.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},n.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},n.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var i=e.length,a=!1,o=0;--i>=0;){var s=8==r?255&e[i]:l(e,i);s<0?"-"==e.charAt(i)&&(a=!0):(a=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&n.ZERO.subTo(this,this)},n.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},n.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},n.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},n.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|s,s=(this[n]&a)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},n.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&a)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}},n.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},n.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),a=r.t;for(t.t=a+i.t;--a>=0;)t[a]=0;for(a=0;a<i.t;++a)t[a+r.t]=r.am(0,i[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)},n.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},n.prototype.divRemTo=function(e,t,i){var a=e.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var s=r(),c=this.s,l=e.s,u=this.DB-d(a[a.t-1]);u>0?(a.lShiftTo(u,s),o.lShiftTo(u,i)):(a.copyTo(s),o.copyTo(i));var f=s.t,p=s[f-1];if(0!=p){var h=p*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),m=this.FV/h,v=(1<<this.F1)/h,b=1<<this.F2,g=i.t,y=g-f,E=null==t?r():t;for(s.dlShiftTo(y,E),i.compareTo(E)>=0&&(i[i.t++]=1,i.subTo(E,i)),n.ONE.dlShiftTo(f,E),E.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--y>=0;){var O=i[--g]==p?this.DM:Math.floor(i[g]*m+(i[g-1]+b)*v);if((i[g]+=s.am(0,O,i,y,0,f))<O)for(s.dlShiftTo(y,E),i.subTo(E,i);i[g]<--O;)i.subTo(E,i)}null!=t&&(i.drShiftTo(f,t),c!=l&&n.ZERO.subTo(t,t)),i.t=f,i.clamp(),u>0&&i.rShiftTo(u,i),c<0&&n.ZERO.subTo(i,i)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},n.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(e,t){if(e>4294967295||e<1)return n.ONE;var i=r(),a=r(),o=t.convert(this),s=d(e)-1;for(o.copyTo(i);--s>=0;)if(t.sqrTo(i,a),(e&1<<s)>0)t.mulTo(a,o,i);else{var c=i;i=a,a=c}return t.revert(i)},n.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(i=!0,a=c(n));o>=0;)s<t?(n=(this[o]&(1<<s)-1)<<t-s,n|=this[--o]>>(s+=this.DB-t)):(n=this[o]>>(s-=t)&r,s<=0&&(s+=this.DB,--o)),n>0&&(i=!0),i&&(a+=c(n));return i?a:"0"},n.prototype.negate=function(){var e=r();return n.ZERO.subTo(this,e),e},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(e){var t=r();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t},n.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new f(t):new p(t),this.exp(e,n)},n.ZERO=u(0),n.ONE=u(1),E.prototype.convert=O,E.prototype.revert=O,E.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},E.prototype.sqrTo=function(e,t){e.squareTo(t)},j.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t},j.prototype.revert=function(e){return e},j.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},j.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},j.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var S,T,w,x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/x[x.length-1];function I(){var e;e=(new Date).getTime(),T[w++]^=255&e,T[w++]^=e>>8&255,T[w++]^=e>>16&255,T[w++]^=e>>24&255,w>=M&&(w-=M)}if(n.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},n.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=u(n),a=r(),o=r(),s="";for(this.divRemTo(i,a,o);a.signum()>0;)s=(n+o.intValue()).toString(e).substr(1)+s,a.divRemTo(i,a,o);return o.intValue().toString(e)+s},n.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),a=!1,o=0,s=0,c=0;c<e.length;++c){var u=l(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(a=!0):(s=t*s+u,++o>=r&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),a&&n.ZERO.subTo(this,this)},n.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(n.ONE.shiftLeft(e-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(n.ONE.shiftLeft(e-1),this);else{var i=new Array,a=7&e;i.length=1+(e>>3),t.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}},n.prototype.bitwiseTo=function(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},n.prototype.changeBit=function(e,t){var r=n.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},n.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},n.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},n.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},n.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},n.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},n.prototype.millerRabin=function(e){var t=this.subtract(n.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var a=t.shiftRight(i);(e=e+1>>1)>x.length&&(e=x.length);for(var o=r(),s=0;s<e;++s){o.fromInt(x[Math.floor(Math.random()*x.length)]);var c=o.modPow(a,this);if(0!=c.compareTo(n.ONE)&&0!=c.compareTo(t)){for(var l=1;l++<i&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(n.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},n.prototype.clone=function(){var e=r();return this.copyTo(e),e},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},n.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},n.prototype.equals=function(e){return 0==this.compareTo(e)},n.prototype.min=function(e){return this.compareTo(e)<0?this:e},n.prototype.max=function(e){return this.compareTo(e)>0?this:e},n.prototype.and=function(e){var t=r();return this.bitwiseTo(e,h,t),t},n.prototype.or=function(e){var t=r();return this.bitwiseTo(e,m,t),t},n.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,v,t),t},n.prototype.andNot=function(e){var t=r();return this.bitwiseTo(e,b,t),t},n.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},n.prototype.shiftLeft=function(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},n.prototype.shiftRight=function(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},n.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+g(this[e]);return this.s<0?this.t*this.DB:-1},n.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=y(this[n]^t);return e},n.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},n.prototype.setBit=function(e){return this.changeBit(e,m)},n.prototype.clearBit=function(e){return this.changeBit(e,b)},n.prototype.flipBit=function(e){return this.changeBit(e,v)},n.prototype.add=function(e){var t=r();return this.addTo(e,t),t},n.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t},n.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t},n.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t},n.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t},n.prototype.divideAndRemainder=function(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n)},n.prototype.modPow=function(e,t){var n,i,a=e.bitLength(),o=u(1);if(a<=0)return o;n=a<18?1:a<48?3:a<144?4:a<768?5:6,i=a<8?new f(t):t.isEven()?new j(t):new p(t);var s=new Array,c=3,l=n-1,h=(1<<n)-1;if(s[1]=i.convert(this),n>1){var m=r();for(i.sqrTo(s[1],m);c<=h;)s[c]=r(),i.mulTo(m,s[c-2],s[c]),c+=2}var v,b,g=e.t-1,y=!0,E=r();for(a=d(e[g])-1;g>=0;){for(a>=l?v=e[g]>>a-l&h:(v=(e[g]&(1<<a+1)-1)<<l-a,g>0&&(v|=e[g-1]>>this.DB+a-l)),c=n;0==(1&v);)v>>=1,--c;if((a-=c)<0&&(a+=this.DB,--g),y)s[v].copyTo(o),y=!1;else{for(;c>1;)i.sqrTo(o,E),i.sqrTo(E,o),c-=2;c>0?i.sqrTo(o,E):(b=o,o=E,E=b),i.mulTo(E,s[v],o)}for(;g>=0&&0==(e[g]&1<<a);)i.sqrTo(o,E),b=o,o=E,E=b,--a<0&&(a=this.DB-1,--g)}return i.revert(o)},n.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return n.ZERO;for(var r=e.clone(),i=this.clone(),a=u(1),o=u(0),s=u(0),c=u(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(e,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(i)>=0?(r.subTo(i,r),t&&a.subTo(s,a),o.subTo(c,o)):(i.subTo(r,i),t&&s.subTo(a,s),c.subTo(o,c))}return 0!=i.compareTo(n.ONE)?n.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},n.prototype.pow=function(e){return this.exp(e,new E)},n.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n},n.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=x[x.length-1]){for(t=0;t<x.length;++t)if(n[0]==x[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<x.length;){for(var r=x[t],i=t+1;i<x.length&&r<A;)r*=x[i++];for(r=n.modInt(r);t<i;)if(r%x[t++]==0)return!1}return n.millerRabin(e)},n.prototype.square=function(){var e=r();return this.squareTo(e),e},n.prototype.Barrett=j,null==T){var _;if(T=new Array,w=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var R=new Uint8Array(32);for(window.crypto.getRandomValues(R),_=0;_<32;++_)T[w++]=R[_]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var k=window.crypto.random(32);for(_=0;_<k.length;++_)T[w++]=255&k.charCodeAt(_)}for(;w<M;)_=Math.floor(65536*Math.random()),T[w++]=_>>>8,T[w++]=255&_;w=0,I()}function C(){if(null==S){for(I(),(S=new B).init(T),w=0;w<T.length;++w)T[w]=0;w=0}return S.next()}function N(){}function B(){this.i=0,this.j=0,this.S=new Array}N.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=C()},B.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},B.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var M=256;e.exports={default:n,BigInteger:n,SecureRandom:N}}).call(this)},function(e,t,n){"use strict";var r=t.falseIfInvalid=function(e){return function(){return!!this.valid&&e.apply(this,arguments)}};t.isInSubnet=r((function(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()})),t.isCorrect=function(e){return r((function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}))}},function(e,t,n){(function(t){var n,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s="[\\ud800-\\udfff]",c="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",l="\\ud83c[\\udffb-\\udfff]",u="[^\\ud800-\\udfff]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="(?:"+c+"|"+l+")"+"?",h="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+[u,d,f].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),m="(?:"+[u+c+"?",c,d,f,s].join("|")+")",v=RegExp(l+"(?="+l+")|"+m+h,"g"),b=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),g=parseInt,y="object"==typeof t&&t&&t.Object===Object&&t,E="object"==typeof self&&self&&self.Object===Object&&self,O=y||E||Function("return this")(),j=(n="length",function(e){return null==e?void 0:e[n]});function S(e){return b.test(e)}function T(e){return S(e)?function(e){var t=v.lastIndex=0;for(;v.test(e);)t++;return t}(e):j(e)}function w(e){return S(e)?function(e){return e.match(v)||[]}(e):function(e){return e.split("")}(e)}var x=Object.prototype.toString,A=O.Symbol,I=Math.ceil,_=Math.floor,R=A?A.prototype:void 0,k=R?R.toString:void 0;function C(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=_(t/2))&&(e+=e)}while(t);return n}function N(e){if("string"==typeof e)return e;if(P(e))return k?k.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function B(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}(e,t,n)}function M(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function P(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==x.call(e)}function D(e){return e?(e=function(e){if("number"==typeof e)return e;if(P(e))return NaN;if(M(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=M(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||o.test(e)?g(e.slice(2),n?2:8):i.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}e.exports=function(e,t,n){e=function(e){return null==e?"":N(e)}(e);var r=(t=function(e){var t=D(e),n=t%1;return t==t?n?t-n:t:0}(t))?T(e):0;return t&&r<t?function(e,t){var n=(t=void 0===t?" ":N(t)).length;if(n<2)return n?C(t,e):t;var r=C(t,I(e/T(t)));return S(t)?B(w(r),0,e).join(""):r.slice(0,e)}(t-r,n)+e:e}}).call(this,n(7))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=/^(?:0|[1-9]\d*)$/,s=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),d=Object.prototype.toString,f=u.Symbol,p=Math.floor,h=f?f.prototype:void 0,m=h?h.toString:void 0;function v(e,t,n){if(!b(n))return!1;var r=typeof t;return!!("number"==r?function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=b(e)?d.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(n)&&function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}(t,n.length):"string"==r&&t in n)&&function(e,t){return e===t||e!=e&&t!=t}(n[t],e)}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}function y(e){return e?(e=function(e){if("number"==typeof e)return e;if(g(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var o=i.test(e);return o||a.test(e)?s(e.slice(2),o?2:8):r.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function E(e){return null==e?"":function(e){if("string"==typeof e)return e;if(g(e))return m?m.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}e.exports=function(e,t,n){return t=(n?v(e,t,n):void 0===t)?1:function(e){var t=y(e),n=t%1;return t==t?n?t-n:t:0}(t),function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=p(t/2))&&(e+=e)}while(t);return n}(E(e),t)}}).call(this,n(7))},function(e,t,n){"use strict";var r=n(8).sprintf,i=t.spanAllZeroes=function(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')};function a(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}t.spanAll=function(e,t){return void 0===t&&(t=0),e.split("").map((function(e,n){return r('<span class="digit value-%s position-%d">%s</span>',e,n+t,i(e))})).join("")},t.spanLeadingZeroes=function(e){return e.split(":").map((function(e){return a(e)})).join(":")},t.simpleGroup=function(e,t){var n=e.split(":");return t||(t=0),n.map((function(e,n){return/group-v4/.test(e)?e:r('<span class="hover-group group-%d">%s</span>',n+t,a(e))})).join(":")}},function(e,t,n){(function(e,r){var i;!function(a){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var s,c=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function m(e){throw new RangeError(f[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function b(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(d,".")).split("."),t).join(".")}function g(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function y(e){return v(e,(function(e){var t="";return e>65535&&(t+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=h(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=36)e=p(e/35);return p(r+36*e/(e+38))}function j(e){var t,n,r,i,a,o,s,l,u,d,f,h=[],v=e.length,b=0,g=128,E=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),h.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(a=b,o=1,s=36;i>=v&&m("invalid-input"),((l=(f=e.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||l>p((c-b)/o))&&m("overflow"),b+=l*o,!(l<(u=s<=E?1:s>=E+26?26:s-E));s+=36)o>p(c/(d=36-u))&&m("overflow"),o*=d;E=O(b-a,t=h.length+1,0==a),p(b/t)>c-g&&m("overflow"),g+=p(b/t),b%=t,h.splice(b++,0,g)}return y(h)}function S(e){var t,n,r,i,a,o,s,l,u,d,f,v,b,y,j,S=[];for(v=(e=g(e)).length,t=128,n=0,a=72,o=0;o<v;++o)(f=e[o])<128&&S.push(h(f));for(r=i=S.length,i&&S.push("-");r<v;){for(s=c,o=0;o<v;++o)(f=e[o])>=t&&f<s&&(s=f);for(s-t>p((c-n)/(b=r+1))&&m("overflow"),n+=(s-t)*b,t=s,o=0;o<v;++o)if((f=e[o])<t&&++n>c&&m("overflow"),f==t){for(l=n,u=36;!(l<(d=u<=a?1:u>=a+26?26:u-a));u+=36)j=l-d,y=36-d,S.push(h(E(d+j%y,0))),l=p(j/y);S.push(h(E(l,0))),a=O(n,b,r==i),n=0,++r}++n,++t}return S.join("")}s={version:"1.4.1",ucs2:{decode:g,encode:y},decode:j,encode:S,toASCII:function(e){return b(e,(function(e){return u.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return b(e,(function(e){return l.test(e)?j(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(10)(e),n(7))},function(e,t,n){(function(e){!function(e){"use strict";e.exports.is_uri=n,e.exports.is_http_uri=r,e.exports.is_https_uri=i,e.exports.is_web_uri=a,e.exports.isUri=n,e.exports.isHttpUri=r,e.exports.isHttpsUri=i,e.exports.isWebUri=a;var t=function(e){return e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function n(e){if(e&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)&&!/%[^0-9a-f]/i.test(e)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e)){var n,r,i,a,o,s="",c="";if(s=(n=t(e))[1],r=n[2],i=n[3],a=n[4],o=n[5],s&&s.length&&i.length>=0){if(r&&r.length){if(0!==i.length&&!/^\//.test(i))return}else if(/^\/\//.test(i))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(s.toLowerCase()))return c+=s+":",r&&r.length&&(c+="//"+r),c+=i,a&&a.length&&(c+="?"+a),o&&o.length&&(c+="#"+o),c}}}function r(e,r){if(n(e)){var i,a,o,s,c="",l="",u="",d="";if(c=(i=t(e))[1],l=i[2],a=i[3],o=i[4],s=i[5],c){if(r){if("https"!=c.toLowerCase())return}else if("http"!=c.toLowerCase())return;if(l)return/:(\d+)$/.test(l)&&(u=l.match(/:(\d+)$/)[0],l=l.replace(/:\d+$/,"")),d+=c+":",d+="//"+l,u&&(d+=u),d+=a,o&&o.length&&(d+="?"+o),s&&s.length&&(d+="#"+s),d}}}function i(e){return r(e,!0)}function a(e){return r(e)||i(e)}}(e)}).call(this,n(10)(e))},,function(e,t,n){"use strict";var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var a="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,o={status:"not-requested",loading:!1,result:void 0,error:void 0},s={status:"loading",loading:!0,result:void 0,error:void 0},c=function(){},l={initialState:function(e){return e&&e.executeOnMount?s:o},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return s},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:c,onError:c},u=function(e,t,n){var a,o=function(e){return i({},l,{},e)}(n),s=r.useState(null),c=s[0],u=s[1],d=function(e){var t=r.useState((function(){return e.initialState(e)})),n=t[0],a=t[1],o=r.useCallback((function(){return a(e.initialState(e))}),[a,e]),s=r.useCallback((function(){return a(e.setLoading(n))}),[n,a]),c=r.useCallback((function(t){return a(e.setResult(t,n))}),[n,a]),l=r.useCallback((function(t){return a(e.setError(t,n))}),[n,a]),u=a,d=r.useCallback((function(e){return u(i({},n,{},e))}),[n,u]);return{value:n,set:u,merge:d,reset:o,setLoading:s,setResult:c,setError:l}}(o),f=(a=r.useRef(!1),r.useEffect((function(){return a.current=!0,function(){a.current=!1}}),[]),function(){return a.current}),p=function(){var e=r.useRef(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),h=function(e){return f()&&p.is(e)},m=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=e.apply(void 0,n);if(u(n),i instanceof Promise)return p.set(i),d.setLoading(),i.then((function(e){h(i)&&d.setResult(e),o.onSuccess(e,{isCurrent:function(){return p.is(i)}})}),(function(e){h(i)&&d.setError(e),o.onError(e,{isCurrent:function(){return p.is(i)}})})),i;var a=i;return d.setResult(a),Promise.resolve(a)},v=!f();return r.useEffect((function(){v?o.executeOnMount&&m.apply(void 0,t):o.executeOnUpdate&&m.apply(void 0,t)}),t),i({},d.value,{set:d.set,merge:d.merge,reset:d.reset,execute:m,currentPromise:p.get(),currentParams:c})};function d(e,t,n){return u(e,t,n)}var f=function(e,t){return u(e,[],i({},t,{executeOnMount:!1,executeOnUpdate:!1}))};t.useAsync=d,t.useAsyncAbortable=function(e,t,n){var i=r.useRef();return d((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];try{i.current&&i.current.abort();var a=new AbortController;return i.current=a,Promise.resolve(function(t,r){try{var i=Promise.resolve(e.apply(void 0,[a.signal].concat(n)))}catch(t){return r(!0,t)}return i&&i.then?i.then(r.bind(null,!1),r.bind(null,!0)):r(!1,value)}(0,(function(e,t){if(i.current===a&&(i.current=void 0),e)throw t;return t})))}catch(t){return Promise.reject(t)}}),t,n)},t.useAsyncCallback=f,t.useAsyncFetchMore=function(e){var t,n,i=e.value,o=e.fetchMore,s=e.merge,c=e.isEnd,l=(n=r.useRef(t=i),a((function(){n.current=t})),function(){return n.current}),u=r.useState(!1),d=u[0],p=u[1],h=r.useRef(0),m=f((function(){try{var e=l();if("success"!==e.status)throw new Error("Can't fetch more if the original fetch is not a success");if("loading"===m.status)throw new Error("Can't fetch more, because we are already fetching more!");h.current=h.current+1;var t=h.current;return Promise.resolve(o(e.result)).then((function(n){return e.status===l().status&&e.result===l().result&&h.current===t&&(i.merge({result:s(i.result,n)}),c(n)&&p(!0)),n}))}catch(e){return Promise.reject(e)}})),v="success"!==i.status;return r.useEffect((function(){v&&(m.reset(),p(!1))}),[v]),{canFetchMore:"success"===i.status&&"loading"!==m.status,loading:m.loading,status:m.status,fetchMore:m.execute,isEnd:d}}},function(e,t,n){"use strict";var r=n(16).BigInteger,i=n(8).sprintf,a=n(26),o=n(18),s=n(19),c=n(27),l=n(28),u=n(12),d=n(13),f=n(15);function p(e){return e=(e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function h(e,t){this.groups=void 0===t?d.GROUPS:t,this.v4=!1,this.subnet="/128",this.subnetMask=128,this.zone="",this.address=e;var n=d.RE_SUBNET_STRING.exec(e);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>d.BITS)return this.valid=!1,void(this.error="Invalid subnet mask.");e=e.replace(d.RE_SUBNET_STRING,"")}else if(/\//.test(e))return this.valid=!1,void(this.error="Invalid subnet mask.");var r=d.RE_ZONE_STRING.exec(e);r&&(this.zone=r[0],e=e.replace(d.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}function m(e){return i("%04x",parseInt(e,16))}function v(e){return 255&e}a(h.prototype,n(29)),a(h.prototype,n(30)),a(h.prototype,n(31)),h.fromBigInteger=function(e){var t,n=o(e.toString(16),32,"0"),r=[];for(t=0;t<d.GROUPS;t++)r.push(n.slice(4*t,4*(t+1)));return new h(r.join(":"))},h.fromURL=function(e){var t,n,r;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(null===(r=d.RE_URL_WITH_PORT.exec(e)))return{error:"failed to parse address with port",address:null,port:null};t=r[1],n=r[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),null===(r=d.RE_URL.exec(e)))return{error:"failed to parse address from URL",address:null,port:null};t=r[1]}else t=e;return n?((n=parseInt(n,10))<0||n>65536)&&(n=null):n=null,{address:new h(t),port:n}},h.fromAddress4=function(e){e=new f(e);var t=d.BITS-(u.BITS-e.subnetMask);return new h("::ffff:"+e.correctForm()+"/"+t)},h.fromArpa=function(e){var t=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==t.length)return t={error:"Not Valid 'ip6.arpa' form",address:null};t=t.split(".").reverse();for(var n=7;n>0;n--){var r=4*n;t.splice(r,0,":")}return new h(t=t.join(""))},h.prototype.microsoftTranscription=function(){return i("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},h.prototype.mask=function(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)},h.prototype.possibleSubnets=function(e){void 0===e&&(e=128);var t=d.BITS-this.subnetMask-Math.abs(e-d.BITS);return t<0?"0":function(e){for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e}(new r("2",10).pow(t).toString(10))},h.prototype._startAddress=function(){return new r(this.mask()+s("0",d.BITS-this.subnetMask),2)},h.prototype.startAddress=function(){return h.fromBigInteger(this._startAddress())},h.prototype.startAddressExclusive=function(){var e=new r("1");return h.fromBigInteger(this._startAddress().add(e))},h.prototype._endAddress=function(){return new r(this.mask()+s("1",d.BITS-this.subnetMask),2)},h.prototype.endAddress=function(){return h.fromBigInteger(this._endAddress())},h.prototype.endAddressExclusive=function(){var e=new r("1");return h.fromBigInteger(this._endAddress().subtract(e))},h.prototype.getScope=function(){var e=d.SCOPES[this.getBits(12,16)];return"Global unicast"===this.getType()&&"Link local"!==e&&(e="Global"),e},h.prototype.getType=function(){var e=this;return c(d.TYPES,(function(t,n){return e.isInSubnet(new h(n))}))||"Global unicast"},h.prototype.getBits=function(e,t){return new r(this.getBitsBase2(e,t),2)},h.prototype.getBitsBase2=function(e,t){return this.binaryZeroPad().slice(e,t)},h.prototype.getBitsBase16=function(e,t){var n=t-e;return n%4!=0?null:o(this.getBits(e,t).toString(16),n/4,"0")},h.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,d.BITS)},h.prototype.reverseForm=function(e){e||(e={});var t=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?n:i("%s.ip6.arpa.",n):e.omitSuffix?"":"ip6.arpa."},h.prototype.correctForm=function(){if(!this.parsedAddress)return null;var e,t=[],n=0,r=[];for(e=0;e<this.parsedAddress.length;e++){var i=parseInt(this.parsedAddress[e],16);0===i&&n++,0!==i&&n>0&&(n>1&&r.push([e-n,e-1]),n=0)}n>1&&r.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);var a=r.map((function(e){return e[1]-e[0]+1}));if(r.length>0){var o=a.indexOf(l(a));t=function(e,t){var n,r=[],i=[];for(n=0;n<e.length;n++)n<t[0]?r.push(e[n]):n>t[1]&&i.push(e[n]);return r.concat(["compact"]).concat(i)}(this.parsedAddress,r[o])}else t=this.parsedAddress;for(e=0;e<t.length;e++)"compact"!==t[e]&&(t[e]=parseInt(t[e],16).toString(16));var s=t.join(":");return s=(s=(s=s.replace(/^compact$/,"::")).replace(/^compact|compact$/,":")).replace(/compact/,"")},h.prototype.binaryZeroPad=function(){return o(this.bigInteger().toString(2),d.BITS,"0")},h.prototype.parse4in6=function(e){var t=e.split(":"),n=t.slice(-1)[0].match(u.RE_ADDRESS);if(n){for(var r=new f(n[0]),i=0;i<r.groups;i++)if(/^0[0-9]+/.test(r.parsedAddress[i]))return this.valid=!1,this.error="IPv4 addresses can not have leading zeroes.",this.parseError=e.replace(u.RE_ADDRESS,r.parsedAddress.map(p).join(".")),null;this.v4=!0,t[t.length-1]=r.toGroup6(),e=t.join(":")}return e},h.prototype.parse=function(e){if(e=this.parse4in6(e),this.error)return null;var t=e.match(d.RE_BAD_CHARACTERS);if(t)return this.valid=!1,this.error=i("Bad character%s detected in address: %s",t.length>1?"s":"",t.join("")),this.parseError=e.replace(d.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'),null;var n=e.match(d.RE_BAD_ADDRESS);if(n)return this.valid=!1,this.error=i("Address failed regex: %s",n.join("")),this.parseError=e.replace(d.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'),null;var r=[],a=e.split("::");if(2===a.length){var o=a[0].split(":"),s=a[1].split(":");1===o.length&&""===o[0]&&(o=[]),1===s.length&&""===s[0]&&(s=[]);var c=this.groups-(o.length+s.length);if(!c)return this.valid=!1,this.error="Error parsing groups",null;this.elidedGroups=c,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,o.forEach((function(e){r.push(e)}));for(var l=0;l<c;l++)r.push(0);s.forEach((function(e){r.push(e)}))}else{if(1!==a.length)return this.valid=!1,this.error="Too many :: groups found",null;r=e.split(":"),this.elidedGroups=0}return(r=r.map((function(e){return i("%x",parseInt(e,16))}))).length!==this.groups?(this.valid=!1,this.error="Incorrect number of groups found",null):(this.valid=!0,r)},h.prototype.canonicalForm=function(){return this.valid?this.parsedAddress.map(m).join(":"):null},h.prototype.decimal=function(){return this.valid?this.parsedAddress.map((function(e){return i("%05d",parseInt(e,16))})).join(":"):null},h.prototype.bigInteger=function(){return this.valid?new r(this.parsedAddress.map(m).join(""),16):null},h.prototype.to4=function(){var e=this.binaryZeroPad().split("");return f.fromHex(new r(e.slice(96,128).join(""),2).toString(16))},h.prototype.to4in6=function(){var e=this.to4(),t=new h(this.parsedAddress.slice(0,6).join(":"),6),n=t.correctForm(),r="";return/:$/.test(n)||(r=":"),t.correctForm()+r+e.address},h.prototype.inspectTeredo=function(){var e=this.getBitsBase16(0,32),t=this.getBits(80,96).xor(new r("ffff",16)).toString(),n=f.fromHex(this.getBitsBase16(32,64)),a=f.fromHex(this.getBits(96,128).xor(new r("ffffffff",16)).toString(16)),o=this.getBits(64,80),s=this.getBitsBase2(64,80),c=o.testBit(15),l=o.testBit(14),u=o.testBit(8),d=o.testBit(9),p=new r(s.slice(2,6)+s.slice(8,16),2).toString(10);return{prefix:i("%s:%s",e.slice(0,4),e.slice(4,8)),server4:n.address,client4:a.address,flags:s,coneNat:c,microsoft:{reserved:l,universalLocal:d,groupIndividual:u,nonce:p},udpPort:t}},h.prototype.inspect6to4=function(){var e=this.getBitsBase16(0,16),t=f.fromHex(this.getBitsBase16(16,48));return{prefix:i("%s",e.slice(0,4)),gateway:t.address}},h.prototype.to6to4=function(){return this.is4()?new h(["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":")):null},h.prototype.toByteArray=function(){var e=this.bigInteger().toByteArray();return 17===e.length&&0===e[0]?e.slice(1):e},h.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(v)},h.fromByteArray=function(e){return this.fromUnsignedByteArray(e.map(v))},h.fromUnsignedByteArray=function(e){for(var t=new r("256",10),n=new r("0",10),i=new r("1",10),a=e.length-1;a>=0;a--)n=n.add(i.multiply(new r(e[a].toString(10),10))),i=i.multiply(t);return h.fromBigInteger(n)},e.exports=h},function(e,t,n){(function(e,n){var r=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var o="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,c=o||s||Function("return this")(),l=t&&!t.nodeType&&t,u=l&&"object"==typeof n&&n&&!n.nodeType&&n,d=u&&u.exports===l,f=d&&o.process,p=function(){try{var e=u&&u.require&&u.require("util").types;return e||f&&f.binding&&f.binding("util")}catch(e){}}(),h=p&&p.isTypedArray;function m(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var v,b,g,y=Array.prototype,E=Function.prototype,O=Object.prototype,j=c["__core-js_shared__"],S=E.toString,T=O.hasOwnProperty,w=(v=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",x=O.toString,A=S.call(Object),I=RegExp("^"+S.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=d?c.Buffer:void 0,R=c.Symbol,k=c.Uint8Array,C=_?_.allocUnsafe:void 0,N=(b=Object.getPrototypeOf,g=Object,function(e){return b(g(e))}),B=Object.create,M=O.propertyIsEnumerable,P=y.splice,D=R?R.toStringTag:void 0,V=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),L=_?_.isBuffer:void 0,F=Math.max,H=Date.now,q=le(c,"Map"),G=le(Object,"create"),U=function(){function e(){}return function(t){if(!Oe(t))return{};if(B)return B(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function W(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Z(e){var t=this.__data__=new z(e);this.size=t.size}function X(e,t){var n=ve(e),r=!n&&me(e),i=!n&&!r&&ge(e),a=!n&&!r&&!i&&Se(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var l in e)!t&&!T.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ue(l,c))||s.push(l);return s}function K(e,t,n){(void 0!==n&&!he(e[t],n)||void 0===n&&!(t in e))&&Q(e,t,n)}function J(e,t,n){var r=e[t];T.call(e,t)&&he(r,n)&&(void 0!==n||t in e)||Q(e,t,n)}function Y(e,t){for(var n=e.length;n--;)if(he(e[n][0],t))return n;return-1}function Q(e,t,n){"__proto__"==t&&V?V(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}$.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},$.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$.prototype.get=function(e){var t=this.__data__;if(G){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(t,e)?t[e]:void 0},$.prototype.has=function(e){var t=this.__data__;return G?void 0!==t[e]:T.call(t,e)},$.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=G&&void 0===t?"__lodash_hash_undefined__":t,this},z.prototype.clear=function(){this.__data__=[],this.size=0},z.prototype.delete=function(e){var t=this.__data__,n=Y(t,e);return!(n<0)&&(n==t.length-1?t.pop():P.call(t,n,1),--this.size,!0)},z.prototype.get=function(e){var t=this.__data__,n=Y(t,e);return n<0?void 0:t[n][1]},z.prototype.has=function(e){return Y(this.__data__,e)>-1},z.prototype.set=function(e,t){var n=this.__data__,r=Y(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},W.prototype.clear=function(){this.size=0,this.__data__={hash:new $,map:new(q||z),string:new $}},W.prototype.delete=function(e){var t=ce(this,e).delete(e);return this.size-=t?1:0,t},W.prototype.get=function(e){return ce(this,e).get(e)},W.prototype.has=function(e){return ce(this,e).has(e)},W.prototype.set=function(e,t){var n=ce(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Z.prototype.clear=function(){this.__data__=new z,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var n=this.__data__;if(n instanceof z){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new W(r)}return n.set(e,t),this.size=n.size,this};var ee,te=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[ee?o:++r];if(!1===t(i[s],s,i))break}return e};function ne(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":D&&D in Object(e)?function(e){var t=T.call(e,D),n=e[D];try{e[D]=void 0;var r=!0}catch(e){}var i=x.call(e);r&&(t?e[D]=n:delete e[D]);return i}(e):function(e){return x.call(e)}(e)}function re(e){return je(e)&&"[object Arguments]"==ne(e)}function ie(e){return!(!Oe(e)||function(e){return!!w&&w in e}(e))&&(ye(e)?I:r).test(function(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function ae(e){if(!Oe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=de(e),n=[];for(var r in e)("constructor"!=r||!t&&T.call(e,r))&&n.push(r);return n}function oe(e,t,n,r,i){e!==t&&te(t,(function(a,o){if(i||(i=new Z),Oe(a))!function(e,t,n,r,i,a,o){var s=fe(e,n),c=fe(t,n),l=o.get(c);if(l)return void K(e,n,l);var u=a?a(s,c,n+"",e,t,o):void 0,d=void 0===u;if(d){var f=ve(c),p=!f&&ge(c),h=!f&&!p&&Se(c);u=c,f||p||h?ve(s)?u=s:!function(e){return je(e)&&be(e)}(s)?p?(d=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=C?C(n):new e.constructor(n);return e.copy(r),r}(c,!0)):h?(d=!1,m=c,v=!0?(b=m.buffer,g=new b.constructor(b.byteLength),new k(g).set(new k(b)),g):m.buffer,u=new m.constructor(v,m.byteOffset,m.length)):u=[]:u=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(s):function(e){if(!je(e)||"[object Object]"!=ne(e))return!1;var t=N(e);if(null===t)return!0;var n=T.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&S.call(n)==A}(c)||me(c)?(u=s,me(s)?u=function(e){return function(e,t,n,r){var i=!n;n||(n={});var a=-1,o=t.length;for(;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?Q(n,s,c):J(n,s,c)}return n}(e,Te(e))}(s):Oe(s)&&!ye(s)||(u=function(e){return"function"!=typeof e.constructor||de(e)?{}:U(N(e))}(c))):d=!1}var m,v,b,g;d&&(o.set(c,u),i(u,c,r,a,o),o.delete(c));K(e,n,u)}(e,t,o,n,oe,r,i);else{var s=r?r(fe(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),K(e,o,s)}}),Te)}function se(e,t){return pe(function(e,t,n){return t=F(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=F(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),m(e,this,s)}}(e,t,Ie),e+"")}function ce(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ie(n)?n:void 0}function ue(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}function fe(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pe=function(e){var t=0,n=0;return function(){var r=H(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(V?function(e,t){return V(e,"toString",{configurable:!0,enumerable:!1,value:Ae(t),writable:!0})}:Ie);function he(e,t){return e===t||e!=e&&t!=t}var me=re(function(){return arguments}())?re:function(e){return je(e)&&T.call(e,"callee")&&!M.call(e,"callee")},ve=Array.isArray;function be(e){return null!=e&&Ee(e.length)&&!ye(e)}var ge=L||function(){return!1};function ye(e){if(!Oe(e))return!1;var t=ne(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Oe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function je(e){return null!=e&&"object"==typeof e}var Se=h?function(e){return function(t){return e(t)}}(h):function(e){return je(e)&&Ee(e.length)&&!!a[ne(e)]};function Te(e){return be(e)?X(e,!0):ae(e)}var we,xe=(we=function(e,t,n){oe(e,t,n)},se((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=we.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!Oe(n))return!1;var r=typeof t;return!!("number"==r?be(n)&&ue(t,n.length):"string"==r&&t in n)&&he(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&we(e,o,n,i)}return e})));function Ae(e){return function(){return e}}function Ie(e){return e}n.exports=xe}).call(this,n(7),n(10)(e))},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",a="[object Object]",o="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,l=/^\./,u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/^\s+|\s+$/g,f=/\\(\\)?/g,p=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,m=/^\[object .+?Constructor\]$/,v=/^0o[0-7]+$/i,b=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[r]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g["[object Function]"]=g[i]=g["[object Number]"]=g[a]=g["[object RegExp]"]=g[o]=g["[object String]"]=g["[object WeakMap]"]=!1;var y=parseInt,E="object"==typeof e&&e&&e.Object===Object&&e,O="object"==typeof self&&self&&self.Object===Object&&self,j=E||O||Function("return this")(),S=t&&!t.nodeType&&t,T=S&&"object"==typeof n&&n&&!n.nodeType&&n,w=T&&T.exports===S&&E.process,x=function(){try{return w&&w.binding("util")}catch(e){}}(),A=x&&x.isTypedArray;function I(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function _(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function R(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function k(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var C,N,B,M=Array.prototype,P=Function.prototype,D=Object.prototype,V=j["__core-js_shared__"],L=(C=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",F=P.toString,H=D.hasOwnProperty,q=D.toString,G=RegExp("^"+F.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=j.Symbol,$=j.Uint8Array,z=D.propertyIsEnumerable,W=M.splice,Z=(N=Object.keys,B=Object,function(e){return N(B(e))}),X=Math.max,K=xe(j,"DataView"),J=xe(j,"Map"),Y=xe(j,"Promise"),Q=xe(j,"Set"),ee=xe(j,"WeakMap"),te=xe(Object,"create"),ne=Be(K),re=Be(J),ie=Be(Y),ae=Be(Q),oe=Be(ee),se=U?U.prototype:void 0,ce=se?se.valueOf:void 0,le=se?se.toString:void 0;function ue(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function de(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pe(e){var t=-1,n=e?e.length:0;for(this.__data__=new fe;++t<n;)this.add(e[t])}function he(e){this.__data__=new de(e)}function me(e,t){var n=Fe(e)||Le(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var a in e)!t&&!H.call(e,a)||i&&("length"==a||Ie(a,r))||n.push(a);return n}function ve(e,t){for(var n=e.length;n--;)if(Ve(e[n][0],t))return n;return-1}function be(e,t){for(var n=0,r=(t=_e(t,e)?[t]:Se(t)).length;null!=e&&n<r;)e=e[Ne(t[n++])];return n&&n==r?e:void 0}function ge(e,t){return null!=e&&t in Object(e)}function ye(e,t,n,s,c){return e===t||(null==e||null==t||!Ue(e)&&!$e(t)?e!=e&&t!=t:function(e,t,n,s,c,l){var u=Fe(e),d=Fe(t),f="[object Array]",p="[object Array]";u||(f=(f=Ae(e))==r?a:f);d||(p=(p=Ae(t))==r?a:p);var h=f==a&&!_(e),m=p==a&&!_(t),v=f==p;if(v&&!h)return l||(l=new he),u||We(e)?Te(e,t,n,s,c,l):function(e,t,n,r,a,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new $(e),new $(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ve(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var l=R;case o:var u=2&s;if(l||(l=k),e.size!=t.size&&!u)return!1;var d=c.get(e);if(d)return d==t;s|=1,c.set(e,t);var f=Te(l(e),l(t),r,a,s,c);return c.delete(e),f;case"[object Symbol]":if(ce)return ce.call(e)==ce.call(t)}return!1}(e,t,f,n,s,c,l);if(!(2&c)){var b=h&&H.call(e,"__wrapped__"),g=m&&H.call(t,"__wrapped__");if(b||g){var y=b?e.value():e,E=g?t.value():t;return l||(l=new he),n(y,E,s,c,l)}}if(!v)return!1;return l||(l=new he),function(e,t,n,r,i,a){var o=2&i,s=Ze(e),c=s.length,l=Ze(t).length;if(c!=l&&!o)return!1;var u=c;for(;u--;){var d=s[u];if(!(o?d in t:H.call(t,d)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var p=!0;a.set(e,t),a.set(t,e);var h=o;for(;++u<c;){d=s[u];var m=e[d],v=t[d];if(r)var b=o?r(v,m,d,t,e,a):r(m,v,d,e,t,a);if(!(void 0===b?m===v||n(m,v,r,i,a):b)){p=!1;break}h||(h="constructor"==d)}if(p&&!h){var g=e.constructor,y=t.constructor;g==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,s,c,l)}(e,t,ye,n,s,c))}function Ee(e){return!(!Ue(e)||function(e){return!!L&&L in e}(e))&&(qe(e)||_(e)?G:m).test(Be(e))}function Oe(e){return"function"==typeof e?e:null==e?Xe:"object"==typeof e?Fe(e)?function(e,t){if(_e(e)&&Re(t))return ke(Ne(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:be(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){t=_e(t,e)?[t]:Se(t);var r,i=-1,a=t.length;for(;++i<a;){var o=Ne(t[i]);if(!(r=null!=e&&n(e,o)))break;e=e[o]}if(r)return r;return!!(a=e?e.length:0)&&Ge(a)&&Ie(o,a)&&(Fe(e)||Le(e))}(e,t,ge)}(n,e):ye(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=Ze(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,Re(i)]}return t}(e);if(1==t.length&&t[0][2])return ke(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var c=(s=n[i])[0],l=e[c],u=s[1];if(o&&s[2]){if(void 0===l&&!(c in e))return!1}else{var d=new he;if(r)var f=r(l,u,c,e,t,d);if(!(void 0===f?ye(u,l,r,3,d):f))return!1}}return!0}(n,e,t)}}(e):_e(t=e)?(n=Ne(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return be(t,e)}}(t);var t,n}function je(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||D;return e===n}(e))return Z(e);var t=[];for(var n in Object(e))H.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Se(e){return Fe(e)?e:Ce(e)}function Te(e,t,n,r,i,a){var o=2&i,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var u=-1,d=!0,f=1&i?new pe:void 0;for(a.set(e,t),a.set(t,e);++u<s;){var p=e[u],h=t[u];if(r)var m=o?r(h,p,u,t,e,a):r(p,h,u,e,t,a);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!I(t,(function(e,t){if(!f.has(t)&&(p===e||n(p,e,r,i,a)))return f.add(t)}))){d=!1;break}}else if(p!==h&&!n(p,h,r,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function we(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function xe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ee(n)?n:void 0}ue.prototype.clear=function(){this.__data__=te?te(null):{}},ue.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ue.prototype.get=function(e){var t=this.__data__;if(te){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return H.call(t,e)?t[e]:void 0},ue.prototype.has=function(e){var t=this.__data__;return te?void 0!==t[e]:H.call(t,e)},ue.prototype.set=function(e,t){return this.__data__[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this},de.prototype.clear=function(){this.__data__=[]},de.prototype.delete=function(e){var t=this.__data__,n=ve(t,e);return!(n<0)&&(n==t.length-1?t.pop():W.call(t,n,1),!0)},de.prototype.get=function(e){var t=this.__data__,n=ve(t,e);return n<0?void 0:t[n][1]},de.prototype.has=function(e){return ve(this.__data__,e)>-1},de.prototype.set=function(e,t){var n=this.__data__,r=ve(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},fe.prototype.clear=function(){this.__data__={hash:new ue,map:new(J||de),string:new ue}},fe.prototype.delete=function(e){return we(this,e).delete(e)},fe.prototype.get=function(e){return we(this,e).get(e)},fe.prototype.has=function(e){return we(this,e).has(e)},fe.prototype.set=function(e,t){return we(this,e).set(e,t),this},pe.prototype.add=pe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},pe.prototype.has=function(e){return this.__data__.has(e)},he.prototype.clear=function(){this.__data__=new de},he.prototype.delete=function(e){return this.__data__.delete(e)},he.prototype.get=function(e){return this.__data__.get(e)},he.prototype.has=function(e){return this.__data__.has(e)},he.prototype.set=function(e,t){var n=this.__data__;if(n instanceof de){var r=n.__data__;if(!J||r.length<199)return r.push([e,t]),this;n=this.__data__=new fe(r)}return n.set(e,t),this};var Ae=function(e){return q.call(e)};function Ie(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||b.test(e))&&e>-1&&e%1==0&&e<t}function _e(e,t){if(Fe(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ze(e))||(c.test(e)||!s.test(e)||null!=t&&e in Object(t))}function Re(e){return e==e&&!Ue(e)}function ke(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(K&&"[object DataView]"!=Ae(new K(new ArrayBuffer(1)))||J&&Ae(new J)!=i||Y&&"[object Promise]"!=Ae(Y.resolve())||Q&&Ae(new Q)!=o||ee&&"[object WeakMap]"!=Ae(new ee))&&(Ae=function(e){var t=q.call(e),n=t==a?e.constructor:void 0,r=n?Be(n):void 0;if(r)switch(r){case ne:return"[object DataView]";case re:return i;case ie:return"[object Promise]";case ae:return o;case oe:return"[object WeakMap]"}return t});var Ce=De((function(e){e=function(e){return null==e?"":function(e){if("string"==typeof e)return e;if(ze(e))return le?le.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(e);var t=[];return l.test(e)&&t.push(""),e.replace(u,(function(e,n,r,i){t.push(r?i.replace(f,"$1"):n||e)})),t}));function Ne(e){if("string"==typeof e||ze(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Be(e){if(null!=e){try{return F.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Me,Pe=(Me=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=null==n?0:function(e){var t=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(ze(e))return NaN;if(Ue(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ue(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=h.test(e);return n||v.test(e)?y(e.slice(2),n?2:8):p.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}(n);return i<0&&(i=X(r+i,0)),function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,Oe(t),i)},function(e,t,n){var r=Object(e);if(!He(e)){var i=Oe(t);e=Ze(e),t=function(e){return i(r[e],e,r)}}var a=Me(e,t,n);return a>-1?r[i?e[a]:a]:void 0});function De(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new(De.Cache||fe),n}function Ve(e,t){return e===t||e!=e&&t!=t}function Le(e){return function(e){return $e(e)&&He(e)}(e)&&H.call(e,"callee")&&(!z.call(e,"callee")||q.call(e)==r)}De.Cache=fe;var Fe=Array.isArray;function He(e){return null!=e&&Ge(e.length)&&!qe(e)}function qe(e){var t=Ue(e)?q.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Ge(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ue(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $e(e){return!!e&&"object"==typeof e}function ze(e){return"symbol"==typeof e||$e(e)&&"[object Symbol]"==q.call(e)}var We=A?function(e){return function(t){return e(t)}}(A):function(e){return $e(e)&&Ge(e.length)&&!!g[q.call(e)]};function Ze(e){return He(e)?me(e):je(e)}function Xe(e){return e}n.exports=Pe}).call(this,n(7),n(10)(e))},function(e,t){var n=Object.prototype.toString;function r(e,t){return e>t}function i(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==n.call(e)}function a(e){return e}e.exports=function(e){return e&&e.length?function(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(void 0===c?s==s&&!i(s):n(s,c)))var c=s,l=o}return l}(e,a,r):void 0}},function(e,t,n){"use strict";var r=n(17),i=n(13);t.isValid=function(){return this.valid},t.isInSubnet=r.isInSubnet,t.isCorrect=r.isCorrect(i.BITS),t.isCanonical=r.falseIfInvalid((function(){return this.addressMinusSuffix===this.canonicalForm()})),t.isLinkLocal=r.falseIfInvalid((function(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)})),t.isMulticast=r.falseIfInvalid((function(){return"Multicast"===this.getType()})),t.is4=r.falseIfInvalid((function(){return this.v4})),t.isTeredo=r.falseIfInvalid((function(){return this.isInSubnet(new this.constructor("2001::/32"))})),t.is6to4=r.falseIfInvalid((function(){return this.isInSubnet(new this.constructor("2002::/16"))})),t.isLoopback=r.falseIfInvalid((function(){return"Loopback"===this.getType()}))},function(e,t,n){"use strict";var r=n(12),i=n(20),a=n(8).sprintf;t.href=function(e){return e=void 0===e?"":a(":%s",e),a("http://[%s]%s/",this.correctForm(),e)},t.link=function(e){e||(e={}),void 0===e.className&&(e.className=""),void 0===e.prefix&&(e.prefix="/#address="),void 0===e.v4&&(e.v4=!1);var t=this.correctForm;return e.v4&&(t=this.to4in6),e.className?a('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,t.call(this),e.className):a('<a href="%1$s%2$s">%2$s</a>',e.prefix,t.call(this))},t.group=function(){var e,t=this.address.match(r.RE_ADDRESS);if(t){var n=t[0].split(".");this.address=this.address.replace(r.RE_ADDRESS,a('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',n.slice(0,2).join("."),n.slice(2,4).join(".")))}if(0===this.elidedGroups)return i.simpleGroup(this.address);var o=[],s=this.address.split("::");s[0].length?o.push(i.simpleGroup(s[0])):o.push("");var c=["hover-group"];for(e=this.elisionBegin;e<this.elisionBegin+this.elidedGroups;e++)c.push(a("group-%d",e));return o.push(a('<span class="%s"></span>',c.join(" "))),s[1].length?o.push(i.simpleGroup(s[1],this.elisionEnd)):o.push(""),o.join(":")}},function(e,t,n){"use strict";var r=n(8).sprintf,i=n(13);function a(e){return r("(%s)",e.join("|"))}function o(e){return e.length<4?r("0{0,%d}%s",4-e.length,e):e}function s(e){var t=[];e.forEach((function(e,n){0===parseInt(e,16)&&t.push(n)}));var n=t.map((function(t){return e.map((function(e,n){if(n===t){var r=0===n||n===i.GROUPS-1?":":"";return a([o(e),r])}return o(e)})).join(":")}));return n.push(e.map(o).join(":")),a(n)}function c(e,t,n){var i=t?"":":",o=n?"":":",s=[];t||n||s.push("::"),t&&n&&s.push(""),(n&&!t||!n&&t)&&s.push(":"),s.push(r("%s(:0{1,4}){1,%d}",i,e-1)),s.push(r("(0{1,4}:){1,%d}%s",e-1,o)),s.push(r("(0{1,4}:){%d}0{1,4}",e-1));for(var c=1;c<e-1;c++)for(var l=1;l<e-c;l++)s.push(r("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",l,e-l-c-1));return a(s)}t.regularExpressionString=function(e){void 0===e&&(e=!1);var t=[],n=new this.constructor(this.correctForm());if(0===n.elidedGroups)t.push(s(n.parsedAddress));else if(n.elidedGroups===i.GROUPS)t.push(c(i.GROUPS));else{var r=n.address.split("::");r[0].length&&t.push(s(r[0].split(":"))),t.push(c(n.elidedGroups,0!==r[0].length,0!==r[1].length)),r[1].length&&t.push(s(r[1].split(":"))),t=[t.join(":")]}return e||(t=[].concat("(?=^|","[^A-Fa-f0-9:]","|[^\\w\\:])(",t,")(?=[^\\w\\:]|","[^A-Fa-f0-9:]","|$)")),t.join("")},t.regularExpression=function(e){return new RegExp(this.regularExpressionString(e),"i")}},function(e,t,n){"use strict";n.r(t);var r,i,a,o,s,c,l,u,d,f,p,h=n(4),m=function(){function e(e,t,n){var r;this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this)),this.$q=n,this.appModel||(this.appModel={});var i=this.appModel;(i.jsonData||(i.jsonData={}),this.configured=!1,null===(r=this.appModel)||void 0===r?void 0:r.enabled)&&(Object.values(h.config.datasources).filter((function(e){return"synthetic-monitoring-datasource"===e.type})).length>0&&(this.configured=!0))}return e.$inject=["$scope","$injector","$q"],e.prototype.postUpdate=function(){var e;if(null===(e=this.appModel)||void 0===e?void 0:e.enabled)return Object(h.getLocationSrv)().update({path:"a/grafana-synthetic-monitoring-app/?page=config",partial:!1}),this.$q.resolve(!0)},e.templateUrl="legacy/config.html",e}(),v=n(5),b=n(1),g=n(0),y=n.n(g);function E(e,t){var n,r;if(t){var i=""+t.id,a=t.url+("logs"===t.type?"":"/api/prom");try{for(var o=Object(b.i)(e),s=o.next();!s.done;s=o.next()){var c=s.value;if(c.url===a&&(console.log("MAYBE:",i,c.basicAuthUser,c),i===c.basicAuthUser))return c}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}function O(){return Object(b.b)(this,void 0,Promise,(function(){var e,t,n,r,i,a,o,s;return Object(b.d)(this,(function(c){switch(c.label){case 0:e=[],c.label=1;case 1:c.trys.push([1,6,7,8]),t=Object(b.i)(Object.values(h.config.datasources)),n=t.next(),c.label=2;case 2:return n.done?[3,5]:"prometheus"!==(r=n.value).type&&"loki"!==r.type?[3,4]:[4,Object(h.getBackendSrv)().get("api/datasources/"+r.id)];case 3:(i=c.sent()).url&&i.url.indexOf("grafana.net")>0&&e.push(i),c.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return a=c.sent(),o={error:a},[3,8];case 7:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(o)throw o.error}return[7];case 8:return[2,e]}}))}))}function j(){return Object(b.b)(this,void 0,Promise,(function(){return Object(b.d)(this,(function(e){return[2,Object(h.getBackendSrv)().post("api/datasources",{name:"Synthetic Monitoring",type:"synthetic-monitoring-datasource",access:"proxy",isDefault:!1})]}))}))}function S(e,t,n){return Object(b.b)(this,void 0,Promise,(function(){var r;return Object(b.d)(this,(function(i){return r={name:e,url:t.url+("logs"===t.type?"":"/api/prom"),access:"proxy",basicAuth:!0,basicAuthUser:""+t.id,secureJsonData:{basicAuthPassword:n},type:"logs"===t.type?"loki":"prometheus"},[2,Object(h.getBackendSrv)().post("api/datasources",r).then((function(e){return e.datasource}))]}))}))}function T(e){var t=h.config.bootData.user;switch(e){case u.ADMIN:return t.orgRole===u.ADMIN;case u.EDITOR:return t.orgRole===u.ADMIN||t.orgRole===u.EDITOR;case u.VIEWER:return t.orgRole===u.ADMIN||t.orgRole===u.EDITOR||t.orgRole===u.VIEWER;default:return!1}}function w(e,t){var n,r,i=t.instanceSettings.jsonData.dashboards,a=void 0;try{for(var o=Object(b.i)(i),s=o.next();!s.done;s=o.next()){var c=s.value;c.json.toLocaleLowerCase()==="sm-"+e+".json"&&(a=c)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a}!function(e){e.Any="Any",e.V4="V4",e.V6="V6"}(r||(r={})),function(e){e.GET="GET",e.HEAD="HEAD",e.POST="POST",e.PUT="PUT",e.OPTIONS="OPTIONS",e.DELETE="DELETE"}(i||(i={})),function(e){e.HTTP1_0="HTTP/1.0",e.HTTP1_1="HTTP/1.1",e.HTTP2_0="HTTP/2"}(a||(a={})),function(e){e.A="A",e.AAAA="AAAA",e.CNAME="CNAME",e.MX="MX",e.NS="NS",e.PTR="PTR",e.SOA="SOA",e.SRV="SRV",e.TXT="TXT"}(o||(o={})),function(e){e.TCP="TCP",e.UDP="UDP"}(s||(s={})),function(e){e.Authority="Authority",e.Answer="Answer",e.Additional="Additional"}(c||(c={})),function(e){e.HTTP="http",e.PING="ping",e.DNS="dns",e.TCP="tcp"}(l||(l={})),function(e){e.ADMIN="Admin",e.EDITOR="Editor",e.VIEWER="Viewer"}(u||(u={})),function(e){e.NOERROR="NOERROR",e.BADALG="BADALG",e.BADCOOKIE="BADCOOKIE",e.BADKEY="BADKEY",e.BADMODE="BADMODE",e.BADNAME="BADNAME",e.BADSIG="BADSIG",e.BADTIME="BADTIME",e.BADTRUNC="BADTRUNC",e.BADVERS="BADVERS",e.FORMERR="FORMERR",e.NOTAUTH="NOTAUTH",e.NOTIMP="NOTIMP",e.NOTZONE="NOTZONE",e.NXDOMAIN="NXDOMAIN",e.NXRRSET="NXRRSET",e.REFUSED="REFUSED",e.SERVFAIL="SERVFAIL",e.YXDOMAIN="YXDOMAIN",e.YXRRSET="YXRRSET"}(d||(d={})),function(e){e[e.Ignore=0]="Ignore",e[e.FailIfPresent=1]="FailIfPresent",e[e.FailIfNotPresent=2]="FailIfNotPresent"}(f||(f={})),function(e){e.Header="Header",e.Body="Body"}(p||(p={}));function x(e){var t=Object.keys(e);return t.length<1?l.HTTP:t[0]}var A=function(e,t,n){return Object(b.b)(void 0,void 0,Promise,(function(){var r,i,a,o,s,c,l,u,d,f,p;return Object(b.d)(this,(function(m){switch(m.label){case 0:r=Object(h.getBackendSrv)(),i=Math.floor(Date.now()/1e3),a=Object(b.a)({query:t,time:i},n||{}),o=(null==n?void 0:n.step)?"/api/v1/query_range":"/api/v1/query",m.label=1;case 1:return m.trys.push([1,3,,4]),[4,r.datasourceRequest({method:"GET",url:""+e+o,params:a})];case 2:return(s=m.sent()).ok?[2,{data:null!==(d=null===(u=null===(l=s.data)||void 0===l?void 0:l.data)||void 0===u?void 0:u.result)&&void 0!==d?d:[]}]:[2,{error:"Error fetching data",data:[]}];case 3:return c=m.sent(),[2,{error:null!==(p=c.message||(null===(f=c.data)||void 0===f?void 0:f.message))&&void 0!==p?p:"Error fetching data",data:[]}];case 4:return[2]}}))}))},I=n(2),_=n(9),R=n(3),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(b.c)(t,e),t.prototype.render=function(){var e=this,t=this.props.selected;return y.a.createElement("div",null,this.props.instances.map((function(n){var r=t===n.id,i="public/app/plugins/datasource/prometheus/img/prometheus_logo.svg",a="metrics";"logs"===n.type&&(i="public/app/plugins/datasource/loki/img/loki_icon.svg",a="logs");var o="add-data-source-item";return r&&(o+=" "+Object(R.css)("border:1px solid #5794f2")),y.a.createElement("div",{key:n.id,className:o,onClick:function(){return e.props.onSelected(n.id)}},y.a.createElement("img",{className:"add-data-source-item-logo",src:i}),y.a.createElement("div",{className:"add-data-source-item-text-wrapper"},y.a.createElement("span",{className:"add-data-source-item-text"},n.name),y.a.createElement("span",{className:"add-data-source-item-desc"},n.url)),y.a.createElement("div",{className:"add-data-source-item-actions"},y.a.createElement(I.LinkButton,{variant:"secondary",href:"https://grafana.com/orgs/"+n.orgSlug+"/hosted-"+a+"/"+n.id+"?utm_source=synthetic_monitoring_app",target:"_blank",rel:"noopener",icon:"external-link-alt"},"grafana.com"),!r&&y.a.createElement(I.Button,null,"Select")))})))},t}(g.PureComponent),C=n(6),N=["sm-http.json","sm-ping.json","sm-dns.json","sm-tcp.json","sm-summary.json"];function B(){return Object(b.b)(this,void 0,Promise,(function(){var e,t,n,r,i,a,o;return Object(b.d)(this,(function(s){switch(s.label){case 0:return[4,(e=Object(h.getBackendSrv)()).get("api/folders")];case 1:t=s.sent();try{for(n=Object(b.i)(t),r=n.next();!r.done;r=n.next())if("Synthetic Monitoring"===(i=r.value).title)return[2,i]}catch(e){a={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(a)throw a.error}}return[4,e.post("api/folders",{title:"Synthetic Monitoring"})];case 2:return[2,s.sent()]}}))}))}function M(e,t){return Object(b.b)(this,void 0,Promise,(function(){var n,r,i;return Object(b.d)(this,(function(a){switch(a.label){case 0:return[4,(n=Object(h.getBackendSrv)()).get("public/plugins/grafana-synthetic-monitoring-app/dashboards/"+e)];case 1:return r=a.sent(),[4,B()];case 2:return i=a.sent(),[4,n.post("api/dashboards/import",{dashboard:r,overwrite:!0,inputs:[{name:"DS_SM_METRICS",type:"datasource",pluginId:"prometheus",value:t.metrics.grafanaName},{name:"DS_SM_LOGS",type:"datasource",pluginId:"loki",value:t.logs.grafanaName}],folderId:i.id})];case 3:return[2,{title:a.sent().title,uid:r.uid,json:e,version:r.version,latestVersion:r.version}]}}))}))}function P(){return Object(b.b)(this,void 0,Promise,(function(){var e,t,n,r,i,a,o,s,c,l;return Object(b.d)(this,(function(u){switch(u.label){case 0:e=Object(h.getBackendSrv)(),t=[],u.label=1;case 1:u.trys.push([1,6,7,8]),n=Object(b.i)(N),r=n.next(),u.label=2;case 2:return r.done?[3,5]:(i=r.value,[4,e.get("public/plugins/grafana-synthetic-monitoring-app/dashboards/"+i)]);case 3:a=u.sent(),o={title:a.title,uid:a.uid,json:i,version:0,latestVersion:a.version},t.push(o),u.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),c={error:s},[3,8];case 7:try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(c)throw c.error}return[7];case 8:return[2,t]}}))}))}function D(e){return Object(b.b)(this,void 0,Promise,(function(){return Object(b.d)(this,(function(t){return[2,Object(h.getBackendSrv)().delete("/api/dashboards/uid/"+e.uid)]}))}))}var V,L,F,H,q,G,U,$,z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dashboards:t.props.options.dashboards},t.onImport=function(e){return function(){return Object(b.b)(t,void 0,void 0,(function(){var t,n,r,i,a;return Object(b.d)(this,(function(o){switch(o.label){case 0:return(t=this.props.onChange)?(n=Object(b.a)({},this.props.options),[4,M(e.json,n)]):[2];case 1:return r=o.sent(),console.log("dashboard updated"),(i=n.dashboards.findIndex((function(e){return e.uid===r.uid})))<0?n.dashboards.push(r):n.dashboards[i]=r,a=Object(b.h)(this.state.dashboards),(i=a.findIndex((function(e){return e.uid===r.uid})))<0?a.push(r):a[i]=r,this.setState({dashboards:a}),[2,t(n)]}}))}))}},t.onRemove=function(e){return function(){return Object(b.b)(t,void 0,void 0,(function(){var t,n,r,i;return Object(b.d)(this,(function(a){switch(a.label){case 0:return(t=this.props.onChange)?(n=Object(b.a)({},this.props.options),[4,D(e)]):[2];case 1:return a.sent(),(r=n.dashboards.findIndex((function(t){return t.uid===e.uid})))>=0&&n.dashboards.splice(r,1),i=Object(b.h)(this.state.dashboards),(r=i.findIndex((function(t){return t.uid===e.uid})))>=0&&(i[r].version=0),this.setState({dashboards:i}),[2,t(n)]}}))}))}},t}return Object(b.c)(t,e),t.prototype.componentDidMount=function(){return Object(b.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a,o,s,c,l,u;return Object(b.d)(this,(function(d){switch(d.label){case 0:return e=this.props,t=e.checkUpdates,n=e.onChange,t&&n?(r=Object(b.h)(this.state.dashboards),[4,P()]):[2];case 1:i=d.sent(),a=function(e){var t=r.findIndex((function(t){return t.uid===e.uid}));t<0?r.push(e):(r[t].latestVersion=e.latestVersion,r[t].version||(r[t].version=-1))};try{for(o=Object(b.i)(i),s=o.next();!s.done;s=o.next())c=s.value,a(c)}catch(e){l={error:e}}finally{try{s&&!s.done&&(u=o.return)&&u.call(o)}finally{if(l)throw l.error}}return console.log(r),this.setState({dashboards:r}),[2]}}))}))},t.prototype.withImports=function(e){if(this.props.checkUpdates)return y.a.createElement("td",{style:{textAlign:"right"}},0===e.version?y.a.createElement("button",{className:"btn btn-secondary btn-small",onClick:this.onImport(e)},"Import"):y.a.createElement("button",{className:"btn btn-secondary btn-small",onClick:this.onImport(e)},function(e){return(e.latestVersion||0)>(e.version||0)?"Update":"Re-import"}(e)),0!==e.version&&y.a.createElement("button",{className:"btn btn-danger btn-small",onClick:this.onRemove(e)},y.a.createElement(I.Icon,{name:"trash-alt"})))},t.prototype.render=function(){var e=this,t=this.state.dashboards;return y.a.createElement("div",null,y.a.createElement("h3",null,"Dashboards:"),y.a.createElement("table",{className:"filter-table"},y.a.createElement("tbody",null,t.map((function(t){return y.a.createElement("tr",{key:t.uid},y.a.createElement("td",{className:"width-1"},y.a.createElement(I.Icon,{name:"apps"})),y.a.createElement("td",null,y.a.createElement("a",{href:"d/"+t.uid+"/"},t.title)),e.withImports(t))})))))},t}(g.PureComponent),W=function(e){var t,n=e.isOpen,r=e.label,i=e.children,a=e.onToggle,o=(Object(b.g)(e,["isOpen","label","children","onToggle"]),function(e){return{container:Object(R.css)(V||(V=Object(b.e)(["\n    border-left: none;\n    border-right: none;\n    border-bottom: none;\n    margin-bottom: 0;\n    padding: "," 0;\n  "],["\n    border-left: none;\n    border-right: none;\n    border-bottom: none;\n    margin-bottom: 0;\n    padding: "," 0;\n  "])),e.spacing.md),header:Object(R.css)(L||(L=Object(b.e)(["\n    display: flex;\n    align-items: center;\n    transition: all 0.1s linear;\n    cursor: pointer;\n  "],["\n    display: flex;\n    align-items: center;\n    transition: all 0.1s linear;\n    cursor: pointer;\n  "]))),headerExpanded:Object(R.css)(F||(F=Object(b.e)(["\n    padding-bottom: ",";\n  "],["\n    padding-bottom: ",";\n  "])),e.spacing.sm),headerIcon:Object(R.css)(H||(H=Object(b.e)(["\n    margin-right: ",";\n  "],["\n    margin-right: ",";\n  "])),e.spacing.sm),label:Object(R.css)(q||(q=Object(b.e)(["\n    margin-right: ",";\n    font-size: ",";\n  "],["\n    margin-right: ",";\n    font-size: ",";\n  "])),e.spacing.sm,e.typography.heading.h4),body:Object(R.css)(G||(G=Object(b.e)(["\n    padding-top: ",";\n  "],["\n    padding-top: ",";\n  "])),e.spacing.sm),hidden:Object(R.css)(U||(U=Object(b.e)(["\n    display: none;\n  "],["\n    display: none;\n  "])))}}(Object(I.useTheme)()));return y.a.createElement("div",{className:Object(R.cx)(["panel-container",o.container])},y.a.createElement("div",{className:o.header,onClick:function(){return a&&a(Boolean(n))}},y.a.createElement(I.Icon,{name:n?"angle-up":"angle-down",className:o.headerIcon}),y.a.createElement("div",{className:o.label},r)),y.a.createElement("div",{className:Object(R.cx)(o.body,(t={},t[o.hidden]=!n,t))},i))},Z=($=d,Object(b.h)(new Set(Object.keys($)))).map((function(e){return{label:e,value:e}})),X=[{label:o.A,value:o.A},{label:o.AAAA,value:o.AAAA},{label:o.CNAME,value:o.CNAME},{label:o.MX,value:o.MX},{label:o.NS,value:o.NS},{label:o.SOA,value:o.SOA},{label:o.TXT,value:o.TXT},{label:o.PTR,value:o.PTR},{label:o.SRV,value:o.SRV}],K=[{label:s.UDP,value:s.UDP},{label:s.TCP,value:s.TCP}],J="https://synthetic-monitoring-api.grafana.net",Y=[{label:"Any",value:r.Any},{label:"V4",value:r.V4},{label:"V6",value:r.V6}],Q=[{label:"All",value:"all"},{label:"HTTP",value:l.HTTP},{label:"PING",value:l.PING},{label:"DNS",value:l.DNS},{label:"TCP",value:l.TCP}],ee=[{label:"HTTP",value:l.HTTP},{label:"PING",value:l.PING},{label:"DNS",value:l.DNS},{label:"TCP",value:l.TCP}],te=[{label:"Ignore SSL",value:f.Ignore},{label:"Probe fails if SSL is present.",value:f.FailIfPresent},{label:"Probe fails if SSL is not present.",value:f.FailIfNotPresent}],ne=[{label:"Check fails if response header matches",value:p.Header},{label:"Check fails if response body matches",value:p.Body}],re={job:"",target:"",frequency:6e4,timeout:3e3,enabled:!0,labels:[],probes:[],settings:{ping:{ipVersion:r.V4,dontFragment:!1}}},ie=function(e){var t=e.onSubmit,n=e.submissionError,r=Object(b.f)(Object(g.useState)(!1),2),i=r[0],a=r[1];return y.a.createElement(I.Form,{onSubmit:function(e){t(e)},defaultValues:{apiHost:J},validateOn:"onChange"},(function(e){var t,r=e.register,o=e.errors,s=e.formState;return y.a.createElement("div",null,y.a.createElement(I.HorizontalGroup,{wrap:!0},y.a.createElement(I.InfoBox,{title:"Initialize Synthetic Monitoring App",url:"https://grafana.com/grafana/plugins/grafana-synthetic-monitoring-app/"},y.a.createElement("p",null,"To initialize the App and connect it to your Grafana Cloud service you will need a Admin API key for you Grafana.com account. The ",y.a.createElement("b",null,"API key")," is only needed for the initialization process and will not be stored. Once the initialization is complete you can safely delete the key.",y.a.createElement("br",null),y.a.createElement("br",null),y.a.createElement("a",{className:"highlight-word",href:"//grafana.com/profile/api-keys",target:"_blank"},"Generate a new API key"))),y.a.createElement(I.Field,{label:"Admin API Key",required:!0,invalid:Boolean(o.adminApiToken)},y.a.createElement(I.Input,{ref:r({required:!0}),id:"tenant-setup-api-key",type:"text",name:"adminApiToken",width:100,placeholder:"Grafana.com Admin Api Key"}))),y.a.createElement("br",null),y.a.createElement(W,{label:"Advanced",collapsible:!0,onToggle:function(){return a(!i)},isOpen:i},y.a.createElement(I.HorizontalGroup,null,y.a.createElement(I.Field,{label:"Backend Address",invalid:Boolean(o.apiHost),error:null===(t=o.apiHost)||void 0===t?void 0:t.message},y.a.createElement(I.Input,{ref:r({validate:function(e){try{new URL(e)}catch(e){return e.message}}}),name:"apiHost",id:"tenant-setup-backend-host",type:"text",width:40,placeholder:"Synthetic Monitoring Backend Address"})))),y.a.createElement(I.Button,{variant:"primary",type:"submit",disabled:s.isSubmitting||!s.isValid},"Initialize"),n&&y.a.createElement(I.Container,{margin:"md"},y.a.createElement(I.Alert,{title:"Error",severity:"error"},n)))}))},ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showResetModal:!1,resetConfig:!1},t.onInit=function(e){var n=e.apiHost,r=void 0===n?J:n,i=e.adminApiToken;return Object(b.b)(t,void 0,void 0,(function(){var e,t,n,a,o,s=this;return Object(b.d)(this,(function(c){switch(c.label){case 0:return[4,this.props.instance.registerInit(r,i).catch((function(e){if(console.error("failed to init. ",e),e.data.msg)s.setState({userError:e.data.msg,backendError:void 0});else{var t="failed to initialize with provided Admin API Key";e.statusText&&(t=e.status+": "+e.statusText),s.setState({backendError:t,userError:void 0})}}))];case 1:return(e=c.sent())?(this.setState({info:e,logsInstance:null===(n=null===(t=e.tenantInfo)||void 0===t?void 0:t.logInstance)||void 0===n?void 0:n.id,metricsInstance:null===(o=null===(a=e.tenantInfo)||void 0===a?void 0:a.metricInstance)||void 0===o?void 0:o.id,apiHost:r,adminApiToken:i,userError:void 0,backendError:void 0}),[2]):(console.log("info not returned from registerInit"),[2])}}))}))},t.onSelectLogs=function(e){t.setState({logsInstance:e})},t.onSelectMetrics=function(e){t.setState({metricsInstance:e})},t.createDataSource=function(e,n){return Object(b.b)(t,void 0,void 0,(function(){var t,r,i,a;return Object(b.d)(this,(function(o){switch(o.label){case 0:t=this.props.instance,r=this.state.adminApiToken,o.label=1;case 1:return o.trys.push([1,5,,6]),[4,t.getViewerToken(r,n)];case 2:return(i=o.sent())?[4,S(e,n,i)]:[3,4];case 3:return[2,o.sent()];case 4:return console.error("error getting token"),[2,void 0];case 5:return a=o.sent(),console.log("Error creating",e,n,a),[3,6];case 6:return[2,void 0]}}))}))},t.onSave=function(){return Object(b.b)(t,void 0,void 0,(function(){var e,t,n,r,i,a,o,s,c,l,u,d,f,p,h,m,v,g,y=this;return Object(b.d)(this,(function(j){switch(j.label){case 0:return e=this.props.instance,t=this.state,n=t.info,r=t.adminApiToken,i=t.apiHost,a=null==e?void 0:e.instanceSettings.name,o=null==n?void 0:n.instances.find((function(e){return e.id===y.state.metricsInstance})),s=null==n?void 0:n.instances.find((function(e){return e.id===y.state.logsInstance})),o?s?i?[4,O()]:(alert("Missing apiHost"),[2]):(alert("Missing logs instance"),[2]):(alert("Missing metrics instance"),[2]);case 1:return c=j.sent(),(l=E(c,o))?[3,3]:[4,this.createDataSource(a+" Metrics",o)];case 2:l=j.sent(),j.label=3;case 3:return(u=E(c,s))?[3,5]:[4,this.createDataSource(a+" Logs",s)];case 4:u=j.sent(),j.label=5;case 5:d={apiHost:i,logs:{grafanaName:u.name,hostedId:s.id},metrics:{grafanaName:l.name,hostedId:o.id},dashboards:[]},j.label=6;case 6:j.trys.push([6,11,12,13]),f=Object(b.i)(N),p=f.next(),j.label=7;case 7:return p.done?[3,10]:[4,M(p.value,d)];case 8:h=j.sent(),d.dashboards.push(h),j.label=9;case 9:return p=f.next(),[3,7];case 10:return[3,13];case 11:return m=j.sent(),v={error:m},[3,13];case 12:try{p&&!p.done&&(g=f.return)&&g.call(f)}finally{if(v)throw v.error}return[7];case 13:return[4,e.registerSave(r,d,null==n?void 0:n.accessToken)];case 14:return j.sent(),window.location.reload(),[2]}}))}))},t.showResetModal=function(e){return function(){t.setState({showResetModal:e})}},t.onReset=function(){t.setState({resetConfig:!0})},t.onOptionsChange=function(e){return t.props.instance.onOptionsChange(e)},t}return Object(b.c)(t,e),t.prototype.renderSetup=function(){var e=this.state,t=e.info,n=e.logsInstance,r=e.metricsInstance,i=e.backendError,a=e.userError;return t?y.a.createElement("div",null,y.a.createElement("div",null,"Select the Grafana Cloud instances Synthetic Monitoring will send data to"),y.a.createElement("h4",null,"Metrics"),y.a.createElement(k,{instances:t.instances.filter((function(e){return"prometheus"===e.type})),onSelected:this.onSelectMetrics,selected:r}),y.a.createElement("h4",null,"Logs"),y.a.createElement(k,{instances:t.instances.filter((function(e){return"logs"===e.type})),onSelected:this.onSelectLogs,selected:n}),y.a.createElement("br",null),y.a.createElement("br",null),y.a.createElement(I.Button,{variant:"primary",onClick:this.onSave},"Setup")):y.a.createElement(ie,{onSubmit:this.onInit,submissionError:a||i})},t.prototype.render=function(){var e,t=this.props.instance;if(!t)return y.a.createElement("div",null,"Loading...");var n=this.state,r=n.showResetModal,i=n.resetConfig;return!Object(_.b)(null===(e=t.instanceSettings)||void 0===e?void 0:e.jsonData)||i?this.renderSetup():y.a.createElement("div",null,y.a.createElement(z,{options:t.instanceSettings.jsonData,checkUpdates:!0,onChange:this.onOptionsChange}),y.a.createElement("br",null),y.a.createElement(C.a,{settings:t.instanceSettings.jsonData}),y.a.createElement(I.Button,{variant:"destructive",onClick:this.showResetModal(!0)},"Reset"),y.a.createElement(I.ConfirmModal,{isOpen:r,title:"Reset Configuration",body:"Are you sure you want to reset the configuration?",confirmText:"Reset Configuration",onConfirm:this.onReset,onDismiss:this.showResetModal(!1)}))},t}(g.PureComponent),oe=Object(g.createContext)({instance:void 0,loading:!0}),se=n(11);function ce(e,t){var n=String(e);return{label:null!=t?t:n,value:e}}function le(e){switch(e){case l.HTTP:return{http:{method:i.GET,ipVersion:r.V4,noFollowRedirects:!1}};case l.PING:return{ping:{ipVersion:r.V4,dontFragment:!1}};case l.DNS:return{dns:{recordType:o.A,server:"8.8.8.8",ipVersion:r.V4,protocol:s.UDP,port:53,validRCodes:[d.NOERROR]}};case l.TCP:return{tcp:{ipVersion:r.V4,tls:!1}};default:throw new Error("Cannot find values for invalid check type "+e)}}var ue=function(e){var t,n,r=null!==(t=e.ping)&&void 0!==t?t:le(l.PING);return Object(b.a)(Object(b.a)({},r),{ipVersion:null!==(n=Y.find((function(t){var n;return t.value===(null===(n=null==e?void 0:e.ping)||void 0===n?void 0:n.ipVersion)})))&&void 0!==n?n:Y[1]})},de=function(e){var t;return null!==(t=null==e?void 0:e.map((function(e){var t=e.split(":",2);return{name:t[0],value:t[1]}})))&&void 0!==t?t:[]},fe=function(e,t){var n,r;return e&&!t?null!==(n=te.find((function(e){return e.value===f.FailIfPresent})))&&void 0!==n?n:te[0]:!e&&t&&null!==(r=te.find((function(e){return e.value===f.FailIfNotPresent})))&&void 0!==r?r:te[0]},pe=function(e){var t,n,r,i,a,o,s,c,u,d,f,h=null!==(t=e.http)&&void 0!==t?t:le(l.HTTP),m=h.failIfBodyMatchesRegexp,v=h.failIfBodyNotMatchesRegexp,g=h.failIfHeaderMatchesRegexp,y=h.failIfHeaderNotMatchesRegexp,E=h.noFollowRedirects,O=Object(b.g)(h,["failIfBodyMatchesRegexp","failIfBodyNotMatchesRegexp","failIfHeaderMatchesRegexp","failIfHeaderNotMatchesRegexp","noFollowRedirects"]),j=(c={failIfBodyMatchesRegexp:m,failIfBodyNotMatchesRegexp:v,failIfHeaderMatchesRegexp:g,failIfHeaderNotMatchesRegexp:y},u=new Set(["failIfBodyMatchesRegexp","failIfBodyNotMatchesRegexp"]),d=new Set(["failIfHeaderMatchesRegexp","failIfHeaderNotMatchesRegexp"]),f=new Set(["failIfBodyNotMatchesRegexp","failIfHeaderNotMatchesRegexp"]),Object.keys(c).reduce((function(e,t){var n;return(null!==(n=c[t])&&void 0!==n?n:[]).forEach((function(n){if(u.has(t))e.push({matchType:ce(p.Body,ne[1].label),expression:n,inverted:f.has(t)});else if(d.has(t)){var r=n;e.push({matchType:ce(p.Header,ne[0].label),expression:r.regexp,header:r.header,allowMissing:r.allowMissing,inverted:f.has(t)})}})),e}),[]));return Object(b.a)(Object(b.a)({},O),{followRedirects:!E,sslOptions:fe(null!==(n=h.failIfSSL)&&void 0!==n&&n,null!==(r=h.failIfNotSSL)&&void 0!==r&&r),validStatusCodes:null!==(a=null===(i=h.validStatusCodes)||void 0===i?void 0:i.map((function(e){return ce(e)})))&&void 0!==a?a:[],validHTTPVersions:null!==(s=null===(o=h.validHTTPVersions)||void 0===o?void 0:o.map((function(e){return ce(e)})))&&void 0!==s?s:[],method:ce(h.method),ipVersion:ce(h.ipVersion),headers:de(h.headers),regexValidations:j})},he=function(e){var t,n=null!==(t=e.tcp)&&void 0!==t?t:le(l.TCP);return Object(b.a)(Object(b.a)({},n),{ipVersion:ce(n.ipVersion)})},me=function(e){var t,n,r,i,a,o=null!==(n=e.dns)&&void 0!==n?n:le(l.DNS);return Object(b.a)(Object(b.a)({},o),{ipVersion:ce(o.ipVersion),protocol:ce(o.protocol),recordType:ce(o.recordType),validRCodes:null!==(i=null===(r=o.validRCodes)||void 0===r?void 0:r.map((function(e){return Z.find((function(t){return t.value===e}))})).filter(Boolean))&&void 0!==i?i:[],validations:(t={},t[c.Answer]=o.validateAnswerRRS,t[c.Authority]=o.validateAuthorityRRS,t[c.Additional]=o.validateAdditionalRRS,a=t,Object.keys(a).reduce((function(e,t){var n,r,i,o,s=t;return null===(r=null===(n=a[s])||void 0===n?void 0:n.failIfMatchesRegexp)||void 0===r||r.forEach((function(t){e.push({expression:t,inverted:!1,responseMatch:ce(s)})})),null===(o=null===(i=a[s])||void 0===i?void 0:i.failIfNotMatchesRegexp)||void 0===o||o.forEach((function(t){e.push({expression:t,inverted:!0,responseMatch:ce(s)})})),e}),[]))})},ve=function(e){var t;void 0===e&&(e=re);var n=x(e.settings),r=e.id?function(e){switch(x(e)){case l.HTTP:return{http:pe(e)};case l.TCP:return{tcp:he(e)};case l.DNS:return{dns:me(e)};case l.PING:default:return{ping:ue(e)}}}(e.settings):{http:pe(le(l.HTTP)),tcp:he(le(l.TCP)),dns:me(le(l.DNS)),ping:ue(le(l.PING))};return Object(b.a)(Object(b.a)({},e),{timeout:e.timeout/1e3,frequency:e.frequency/1e3,probes:e.probes,checkType:null!==(t=ee.find((function(e){return e.value===n})))&&void 0!==t?t:ee[1],settings:r})};function be(e){if(null==e?void 0:e.value)return e.value}function ge(e){return null==e?void 0:e.map((function(e){return be(e)})).filter(Boolean)}var ye=function(e,t){var n,r,i,a,o,s,c,u,d,h,m;void 0===e&&(e={});var v=le(l.HTTP).http,g=null!==(n=e.headers)&&void 0!==n?n:null==t?void 0:t.headers,y=null!==(r=null==g?void 0:g.map((function(e){return e.name+":"+e.value})))&&void 0!==r?r:[],E=Object(b.a)(Object(b.a)({},null!=t?t:{}),e),O=null!==(a=be(null!==(i=null==e?void 0:e.method)&&void 0!==i?i:null==t?void 0:t.method))&&void 0!==a?a:v.method,j=function(e){switch(e){case f.Ignore:return{failIfNotSSL:!1,failIfSSL:!1};case f.FailIfPresent:return{failIfNotSSL:!1,failIfSSL:!0};case f.FailIfNotPresent:return{failIfNotSSL:!0,failIfSSL:!1}}}(null!==(s=be(null!==(o=e.sslOptions)&&void 0!==o?o:null==t?void 0:t.sslOptions))&&void 0!==s?s:f.Ignore),S=(null!==(c=E.regexValidations)&&void 0!==c?c:[]).reduce((function(e,t){var n,r,i,a,o,s,c,l;switch(t.matchType.value){case p.Body:t.inverted?null===(n=e.failIfBodyNotMatchesRegexp)||void 0===n||n.push(t.expression):null===(r=e.failIfBodyMatchesRegexp)||void 0===r||r.push(t.expression);case p.Header:t.inverted?null===(i=e.failIfHeaderNotMatchesRegexp)||void 0===i||i.push({header:null!==(a=t.header)&&void 0!==a?a:"",regexp:t.expression,allowMissing:null!==(o=t.allowMissing)&&void 0!==o&&o}):null===(s=e.failIfHeaderMatchesRegexp)||void 0===s||s.push({header:null!==(c=t.header)&&void 0!==c?c:"",regexp:t.expression,allowMissing:null!==(l=t.allowMissing)&&void 0!==l&&l})}return e}),{failIfBodyMatchesRegexp:[],failIfBodyNotMatchesRegexp:[],failIfHeaderMatchesRegexp:[],failIfHeaderNotMatchesRegexp:[]}),T=(E.sslOptions,E.regexValidations,E.followRedirects),w=Object(b.g)(E,["sslOptions","regexValidations","followRedirects"]);return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},v),w),j),S),{noFollowRedirects:!T,method:O,headers:y,ipVersion:null!==(d=be(null!==(u=null==e?void 0:e.ipVersion)&&void 0!==u?u:null==t?void 0:t.ipVersion))&&void 0!==d?d:v.ipVersion,validStatusCodes:ge(null!==(h=null==e?void 0:e.validStatusCodes)&&void 0!==h?h:null==t?void 0:t.validStatusCodes),validHTTPVersions:ge(null!==(m=null==e?void 0:e.validHTTPVersions)&&void 0!==m?m:null==t?void 0:t.validHTTPVersions)})},Ee=function(e,t){var n,r,i=le(l.TCP).tcp,a=Object(b.a)(Object(b.a)({},null!=t?t:{}),e);return Object(b.a)(Object(b.a)(Object(b.a)({},i),a),{ipVersion:null!==(r=be(null!==(n=null==e?void 0:e.ipVersion)&&void 0!==n?n:null==t?void 0:t.ipVersion))&&void 0!==r?r:i.ipVersion})},Oe=function(e,t){var n,r;void 0===e&&(e={});var i=le(l.PING).ping,a=Object(b.a)(Object(b.a)({},t||{}),e);return Object(b.a)(Object(b.a)(Object(b.a)({},i),a),{ipVersion:null!==(r=be(null!==(n=e.ipVersion)&&void 0!==n?n:null==t?void 0:t.ipVersion))&&void 0!==r?r:i.ipVersion})},je=function(e,t){var n,r,i,a,o,s,u,d,f,p,h,m,v,g,y=le(l.DNS).dns,E=function(e){return e.reduce((function(e,t){var n=t.inverted?"failIfNotMatchesRegexp":"failIfMatchesRegexp";switch(be(t.responseMatch)){case c.Additional:e.validateAdditionalRRS[n].push(t.expression);break;case c.Answer:e.validateAnswerRRS[n].push(t.expression);break;case c.Authority:e.validateAuthorityRRS[n].push(t.expression)}return e}),{validateAnswerRRS:{failIfMatchesRegexp:[],failIfNotMatchesRegexp:[]},validateAuthorityRRS:{failIfMatchesRegexp:[],failIfNotMatchesRegexp:[]},validateAdditionalRRS:{failIfMatchesRegexp:[],failIfNotMatchesRegexp:[]}})}(null!==(r=null!==(n=null==e?void 0:e.validations)&&void 0!==n?n:null==t?void 0:t.validations)&&void 0!==r?r:[]);return Object(b.a)({recordType:null!==(a=be(null!==(i=null==e?void 0:e.recordType)&&void 0!==i?i:null==t?void 0:t.recordType))&&void 0!==a?a:y.recordType,server:null!==(s=null!==(o=null==e?void 0:e.server)&&void 0!==o?o:null==t?void 0:t.server)&&void 0!==s?s:y.server,ipVersion:null!==(d=be(null!==(u=null==e?void 0:e.ipVersion)&&void 0!==u?u:null==t?void 0:t.ipVersion))&&void 0!==d?d:y.ipVersion,protocol:null!==(p=be(null!==(f=null==e?void 0:e.protocol)&&void 0!==f?f:null==t?void 0:t.protocol))&&void 0!==p?p:y.protocol,port:Number(null!==(m=null!==(h=null==e?void 0:e.port)&&void 0!==h?h:null==t?void 0:t.port)&&void 0!==m?m:y.port),validRCodes:null!==(g=ge(null!==(v=null==e?void 0:e.validRCodes)&&void 0!==v?v:null==t?void 0:t.validRCodes))&&void 0!==g?g:y.validRCodes},E)},Se=function(e,t){var n,r,i,a,o,s=be(null!==(n=e.checkType)&&void 0!==n?n:t.checkType);switch(s){case l.HTTP:return{http:ye(null===(r=e.settings)||void 0===r?void 0:r.http,t.settings.http)};case l.TCP:return{tcp:Ee(null===(i=e.settings)||void 0===i?void 0:i.tcp,t.settings.tcp)};case l.DNS:return{dns:je(null===(a=e.settings)||void 0===a?void 0:a.dns,t.settings.dns)};case l.PING:return{ping:Oe(null===(o=e.settings)||void 0===o?void 0:o.ping,t.settings.ping)};default:throw new Error("Check type of "+s+" is invalid")}},Te=n(21),we=n(14),xe=n(22),Ae=n.n(xe);function Ie(e){if(e.length>32)return"Job name must be 32 characters or less"}function _e(e,t){if(t.length>2040)return"Target length must be less than 2040 characters";switch(e){case l.HTTP:return function(e){if(!Boolean(Ae.a.isWebUri(e)))return"Target must be a valid web URL";if(!new URL(e).protocol)return"Target must have a valid protocol";if(Ue(new URL(e).hostname))return"Target must have a valid hostname";return}(t);case l.PING:case l.DNS:return Ue(t);case l.TCP:return function(e){var t=new RegExp(/^(?:\[([0-9a-f:.]+)\]|([^:]+)):(\d+)$/,"i"),n=e.match(t);if(null===n)return"Must be a valid host:port combination";var r=void 0!==n[1]?n[1]:n[2],i=parseInt(n[n.length-1],10);if(isNaN(i))return"Invalid port value";if(i>65535)return"Port must be less than 65535";if(i<=0)return"Port must be greater than 0";return Ue(r)}(t);default:return"Invalid check type"}}function Re(e){return e<10?"Frequency must be at least 10 seconds":e>120?"Frequency cannot be greater than 120 seconds":void 0}function ke(e){return e<1?"Timeout must be at least 1 second":e>10?"Timeout cannot be greater than 10 seconds":void 0}var Ce=/^[a-zA-Z_][a-zA-Z0-9_]*$/;function Ne(e){return e.length>32?"Label names must be 32 characters or less":Ce.test(e)?void 0:"Invalid label name"}function Be(e){return e.length>32?"Label names must be 32 characters or less":Ce.test(e)?void 0:"Invalid label value"}var Me=function(e){},Pe=function(e){},De=function(e){},Ve=function(e){},Le=function(e){};function Fe(e){return 0===e.length?"Select a probe":e.length>64?"The maximum probe quantity is 64, you have selected "+e.length:void 0}var He=function(e){},qe=function(e){},Ge=function(e){};function Ue(e){var t=new we.Address4(e),n=new we.Address6(e),r=Te.toASCII(e),i=new RegExp(/^[a-z]([-a-z0-9]{0,62}[a-z0-9])?(\.[a-z]([-a-z0-9]{0,62}[a-z0-9])?)+$/,"i");if(!r.match(i)&&!t.isValid()&&!n.isValid())return"Target must be a valid hostname"}var $e=function(e){var t=e.queryParam,n=e.onChange,r=e.onDelete,i=e.onBlur;return y.a.createElement(y.a.Fragment,null,y.a.createElement(I.Input,{label:"Key",onBlur:i,type:"text",placeholder:"Key",value:t.name,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{name:e.target.value}))}}),y.a.createElement(I.Input,{label:"Value",onBlur:i,type:"text",placeholder:"Value",value:t.value,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{value:e.target.value}))}}),y.a.createElement(I.IconButton,{name:"minus-circle",onClick:r,type:"button"}))};function ze(e){return e.search.replace("?","").split("&").map((function(e){var t=Object(b.f)(e.split("="),2);return{name:t[0],value:t[1]}}))}var We=function(e){return e.reduce((function(e,t,n){var r,i;return e+(0!==n?"&":"")+(null!==(r=t.name)&&void 0!==r?r:"")+"="+(null!==(i=t.value)&&void 0!==i?i:"")}),"")};function Ze(e,t){var n;switch(t.type){case"change":return e.map((function(e,n){return n===t.index&&t.queryParam?t.queryParam:e}));case"add":return Object(b.h)(e,[{name:"",value:""}]);case"delete":return null==t.index?e:Object(b.h)(e.slice(0,t.index),e.slice(t.index+1));case"sync":return ze(null!==(n=t.target)&&void 0!==n?n:new URL(""));default:return e}}var Xe,Ke,Je,Ye=function(e){var t=e.target,n=e.onChange,r=e.className,i=e.onBlur,a=Object(b.f)(Object(g.useReducer)(Ze,t,ze),2),o=a[0],s=a[1],c=Object(b.f)(Object(g.useState)(!1),2),l=c[0],u=c[1];Object(g.useEffect)((function(){if(l){var e=We(o);t.search=e,n(t.toString()),u(!1)}}),[l]),Object(g.useEffect)((function(){var e=We(o);t.search!=="?"+e&&s({type:"sync",target:t})}),[t]);var d=function(e){return function(){s({type:"delete",index:e}),u(!0)}};return y.a.createElement("div",{className:r},y.a.createElement(I.Field,{label:"Query params",description:"Query params for the target URL"},y.a.createElement("div",{className:Object(R.css)(Xe||(Xe=Object(b.e)(["\n            display: grid;\n            grid-template-columns: auto auto auto;\n            grid-gap: 0.25rem;\n            align-items: center;\n          "],["\n            display: grid;\n            grid-template-columns: auto auto auto;\n            grid-gap: 0.25rem;\n            align-items: center;\n          "])))},y.a.createElement(I.Label,null,"Key"),y.a.createElement(I.Label,null,"Value"),y.a.createElement("div",null),o.map((function(e,t){return y.a.createElement($e,{queryParam:e,onBlur:i,key:t,onDelete:d(t),onChange:function(e){s({type:"change",queryParam:e,index:t}),u(!0)}})})))),y.a.createElement(I.Button,{type:"button",variant:"secondary",size:"sm",onClick:function(){return s({type:"add"})}},"Add query param"))},Qe=function(e){var t=e.target,n=e.typeOfCheck,r=e.disabled,i=e.onChange,a=e.onBlur,o=e.invalid,s=e.error,c=function(e){if(!e)return{text:"",example:""};var t;switch(e){case l.HTTP:t={text:"Full URL to send requests to",example:"https://grafana.com/"};break;case l.PING:t={text:"Hostname to ping",example:"grafana.com"};break;case l.DNS:t={text:"Name of record to query",example:"grafana.com"};break;case l.TCP:t={text:"Host:port to connect to",example:"grafana.com:80"}}return t}(n),u=function(e){try{return new URL(e)}catch(e){return}}(t);return y.a.createElement(y.a.Fragment,null,y.a.createElement(I.Field,{label:"Target",description:c.text,disabled:r,invalid:o,error:s},y.a.createElement(I.Input,{id:"check-editor-target",type:"string",onBlur:a,placeholder:c.example,value:t,onChange:function(e){return i(e.target.value)},required:!0})),n===l.HTTP&&u&&y.a.createElement(Ye,{target:u,onBlur:a,onChange:function(e){return i(e)},className:Object(R.css)(Ke||(Ke=Object(b.e)(["\n            padding-left: 1rem;\n            margin-bottom: 1rem;\n          "],["\n            padding-left: 1rem;\n            margin-bottom: 1rem;\n          "])))}))},et=function(e){var t=e.children;e.className;return y.a.createElement("h3",{className:Object(R.css)(Je||(Je=Object(b.e)(["\n      font-size: 19px;\n      font-weight: 100;\n      line-height: 24px;\n      margin-bottom: 16px;\n    "],["\n      font-size: 19px;\n      font-weight: 100;\n      line-height: 24px;\n      margin-bottom: 16px;\n    "])))},t)},tt=e=>void 0===e,nt=e=>null===e||tt(e),rt=e=>Array.isArray(e);const it=e=>"object"==typeof e;var at=e=>!nt(e)&&!rt(e)&&it(e),ot=e=>at(e)&&e.nodeType===Node.ELEMENT_NODE;const st={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit"},ct="blur",lt="change",ut="input",dt="max",ft="min",pt="maxLength",ht="minLength",mt="pattern",vt="required",bt="validate",gt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yt=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ot=/\\(\\)?/g;var jt=e=>!rt(e)&&(yt.test(e)||!gt.test(e)),St=e=>{const t=[];return e.replace(Et,(e,n,r,i)=>{t.push(r?i.replace(Ot,"$1"):n||e)}),t};function Tt(e,t,n){let r=-1;const i=jt(t)?[t]:St(t),a=i.length,o=a-1;for(;++r<a;){const t=i[r];let a=n;if(r!==o){const n=e[t];a=at(n)||rt(n)?n:isNaN(i[r+1])?{}:[]}e[t]=a,e=e[t]}return e}var wt=e=>Object.entries(e).reduce((e,[t,n])=>jt(t)?Object.assign(Object.assign({},e),{[t]:n}):(Tt(e,t,n),e),{}),xt=(e,t,n)=>{const r=t.split(/[,[\].]+?/).filter(Boolean).reduce((e,t)=>nt(e)?e:e[t],e);return tt(r)||r===e?e[t]||n:r},At=(e,t)=>{ot(e)&&e.removeEventListener&&(e.removeEventListener(ut,t),e.removeEventListener(lt,t),e.removeEventListener(ct,t))},It=e=>!!e&&"radio"===e.type,_t=e=>!!e&&"checkbox"===e.type;function Rt(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&Rt(e.parentNode)}var kt=e=>at(e)&&!Object.keys(e).length;function Ct(e){return rt(e)?e:St(e)}function Nt(e,t){return 1==t.length?e:function(e,t){const n=jt(t)?[t]:Ct(t),r=t.length;let i=0;for(;i<r;)e=tt(e)?i++:e[n[i++]];return i==r?e:void 0}(e,function(e,t,n){let r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t;const a=Array(i);for(;++r<i;)a[r]=e[r+t];return a}(t,0,-1))}function Bt(e,t){return t.forEach(t=>{!function(e,t){const n=jt(t)?[t]:Ct(t),r=Nt(e,n),i=n[n.length-1],a=!(null!=r)||delete r[i];let o=void 0;for(let t=0;t<n.slice(0,-1).length;t++){let r=-1,i=void 0;const a=n.slice(0,-(t+1)),s=a.length-1;for(t>0&&(o=e);++r<a.length;){const t=a[r];i=i?i[t]:e[t],s===r&&(at(i)&&kt(i)?o?delete o[t]:delete e[t]:rt(i)&&!i.filter(e=>at(e)&&!kt(e)).length&&o&&delete o[t]),o=i}}}(e,t)}),e}const Mt={isValid:!1,value:""};var Pt=e=>rt(e)?e.reduce((e,{ref:{checked:t,value:n}})=>t?{isValid:!0,value:n}:e,Mt):Mt,Dt=e=>!!e&&"file"===e.type,Vt=e=>!!e&&"select-multiple"===e.type,Lt=e=>""===e;const Ft={value:!1,isValid:!1},Ht={value:!0,isValid:!0};var qt=e=>{if(rt(e)){if(e.length>1){const t=e.filter(({ref:{checked:e}})=>e).map(({ref:{value:e}})=>e);return{value:t,isValid:!!t.length}}const{checked:t,value:n,attributes:r}=e[0].ref;return t?r&&!tt(r.value)?tt(n)||Lt(n)?Ht:{value:n,isValid:!0}:Ht:Ft}return Ft};function Gt(e,t){const{name:n,value:r}=t,i=e[n];return Dt(t)?t.files:It(t)?i?Pt(i.options).value:"":Vt(t)?(a=t.options,[...a].filter(({selected:e})=>e).map(({value:e})=>e)):_t(t)?!!i&&qt(i.options).value:r;var a}var Ut=e=>"string"==typeof e,$t=(e,t)=>{const n={},r=Ut(t),i=rt(t),a=t&&t.nest;for(const o in e)(tt(t)||a||r&&o.startsWith(t)||i&&t.find(e=>o.startsWith(e)))&&(n[o]=Gt(e,e[o].ref));return n},zt=(e,{type:t,types:n,message:r})=>at(e)&&e.type===t&&e.message===r&&((e={},t={})=>Object.entries(e).reduce((e,[n,r])=>!!e&&(t[n]&&t[n]===r),!0))(e.types,n);var Wt=e=>e instanceof RegExp,Zt=e=>{const t=at(e)&&!Wt(e);return{value:t?e.value:e,message:t?e.message:""}},Xt=e=>"function"==typeof e,Kt=e=>"boolean"==typeof e;function Jt(e,t,n="validate"){const r=Ut(e);if(r||Kt(e)&&!e){return{type:n,message:r?e:"",ref:t}}}var Yt=(e,t,n,r,i)=>{if(!t)return{};const a=n[e];return Object.assign(Object.assign({},a),{types:Object.assign(Object.assign({},a&&a.types?a.types:{}),{[r]:i||!0})})},Qt=async(e,t,{ref:n,ref:{type:r,value:i,name:a},options:o,required:s,maxLength:c,minLength:l,min:u,max:d,pattern:f,validate:p})=>{const h=e.current,m={},v=It(n),b=_t(n),g=v||b,y=Lt(i),E=Yt.bind(null,a,t,m),O=(e,r,i,o=pt,s=ht)=>{const c=e?r:i;if(m[a]=Object.assign({type:e?o:s,message:c,ref:n},E(e?o:s,c)),!t)return m};if(s&&(!v&&!b&&(y||nt(i))||Kt(i)&&!i||b&&!qt(o).isValid||v&&!Pt(o).isValid)){const{value:e,message:r}=Ut(s)?{value:!!s,message:s}:Zt(s);if(e&&(m[a]=Object.assign({type:vt,message:r,ref:g?h[a].options[0].ref:n},E(vt,r)),!t))return m}if(!nt(u)||!nt(d)){let e,a;const{value:o,message:s}=Zt(d),{value:c,message:l}=Zt(u);if("number"===r||!r&&!isNaN(i)){const t=n.valueAsNumber||parseFloat(i);nt(o)||(e=t>o),nt(c)||(a=t<c)}else{const t=n.valueAsDate||new Date(i);Ut(o)&&(e=t>new Date(o)),Ut(c)&&(a=t<new Date(c))}if((e||a)&&(O(!!e,s,l,dt,ft),!t))return m}if(Ut(i)&&!y&&(c||l)){const{value:e,message:n}=Zt(c),{value:r,message:a}=Zt(l),o=i.toString().length,s=c&&o>e,u=l&&o<r;if((s||u)&&(O(!!s,n,a),!t))return m}if(f&&!y){const{value:e,message:r}=Zt(f);if(Wt(e)&&!e.test(i)&&(m[a]=Object.assign({type:mt,message:r,ref:n},E(mt,r)),!t))return m}if(p){const e=Gt(h,n),r=g&&o?o[0].ref:n;if(Xt(p)){const n=Jt(await p(e),r);if(n&&(m[a]=Object.assign(Object.assign({},n),E(bt,n.message)),!t))return m}else if(at(p)){const n=Object.entries(p),i=await new Promise(i=>{n.reduce(async(o,[s,c],l)=>{if(!kt(await o)&&!t||!Xt(c))return i(o);let u;const d=Jt(await c(e),r,s);return d?(u=Object.assign(Object.assign({},d),E(s,d.message)),t&&(m[a]=u)):u=o,n.length-1===l?i(u):u},{})});if(!kt(i)&&(m[a]=Object.assign({ref:r},i),!t))return m}}return m};const en=(e,t)=>rt(e.inner)?e.inner.reduce((e,{path:n,message:r,type:i})=>Object.assign(Object.assign({},e),e[n]&&t?{[n]:Yt(n,t,e,i,r)}:{[n]:e[n]||Object.assign({message:r,type:i},t?{types:{[i]:r||!0}}:{})}),{}):{[e.path]:{message:e.message,type:e.type}};async function tn(e,t,n,r,i){if(r)return r(n,i);try{return{values:await e.validate(n,{abortEarly:!1,context:i}),errors:{}}}catch(e){return{values:{},errors:wt(en(e,t))}}}var nn=(e,t,n)=>tt(e[t])?xt(e,t,n):e[t];var rn=e=>nt(e)||!it(e);const an=(e,t)=>{const n=(t,n,r)=>{const i=r?`${e}.${n}`:`${e}[${n}]`;return rn(t)?i:an(i,t)};return rt(t)?t.map((e,t)=>n(e,t)):Object.entries(t).map(([e,t])=>n(t,e,!0))};var on=(e,t)=>function e(t){return t.reduce((t,n)=>t.concat(rt(n)?e(n):n),[])}(an(e,t)),sn=(e,t,n,r,i)=>{let a;return n.add(t),kt(e)?a=i||void 0:tt(e[t])?(a=xt(wt(e),t),rt(i)&&rt(a)&&a.length!==i.length&&(a=i),tt(a)||on(t,a).forEach(e=>n.add(e))):(a=e[t],n.add(t)),tt(a)?at(r)?nn(r,t):r:a},cn=({isOnChange:e,hasError:t,isBlurEvent:n,isOnSubmit:r,isReValidateOnSubmit:i,isOnBlur:a,isReValidateOnBlur:o,isSubmitted:s})=>e&&n||r&&i||r&&!s||a&&!n&&!t||o&&!n&&t||i&&s,ln=(e,t)=>{const n=wt($t(e));return t?xt(n,t,n):n};function un(e,t){let n=!1;if(!rt(e)||!rt(t)||e.length!==t.length)return!0;for(let r=0;r<e.length&&!n;r++){const i=e[r],a=t[r];if(tt(a)||Object.keys(i).length!==Object.keys(a).length){n=!0;break}for(const e in i)if(i[e]!==a[e]){n=!0;break}}return n}const dn=(e,t)=>e.startsWith(t+"[");var fn=(e,t)=>[...e].reduce((e,n)=>!!dn(t,n)||e,!1);var pn=e=>({isOnSubmit:!e||e===st.onSubmit,isOnBlur:e===st.onBlur,isOnChange:e===st.onChange});const{useRef:hn,useState:mn,useCallback:vn,useEffect:bn}=g;function gn({mode:e=st.onSubmit,reValidateMode:t=st.onChange,validationSchema:n,validationResolver:r,validationContext:i,defaultValues:a={},submitFocusError:o=!0,validateCriteriaMode:s}={}){const c=hn({}),l="all"===s,u=hn({}),d=hn({}),f=hn({}),p=hn(new Set),h=hn(new Set),m=hn(new Set),v=hn(new Set),b=hn(!0),g=hn({}),y=hn(a),E=hn(!1),O=hn(!1),j=hn(!1),S=hn(!1),T=hn(0),w=hn(!1),x=hn(),A=hn({}),I=hn(i),_=hn(new Set),[,R]=mn(),{isOnBlur:k,isOnSubmit:C,isOnChange:N}=hn(pn(e)).current,B="undefined"==typeof window,M=!(!n&&!r),P="undefined"!=typeof document&&!B&&!tt(window.HTMLElement),D=P&&"Proxy"in window,V=hn({dirty:!D,dirtyFields:!D,isSubmitted:C,submitCount:!D,touched:!D,isSubmitting:!D,isValid:!D}),{isOnBlur:L,isOnSubmit:F}=hn(pn(t)).current,H=vn(()=>{E.current||R({})},[]),q=vn((e,t,n,r)=>{let i=n||function({errors:e,name:t,error:n,validFields:r,fieldsWithValidation:i}){const a=kt(n),o=kt(e),s=xt(n,t),c=xt(e,t);return!(a&&r.has(t)||c&&c.isManual)&&(!!(o!==a||!o&&!c||a&&i.has(t)&&!r.has(t))||s&&!zt(c,s))}({errors:u.current,error:t,name:e,validFields:v.current,fieldsWithValidation:m.current});if(kt(t)?((m.current.has(e)||M)&&(v.current.add(e),i=i||xt(u.current,e)),u.current=Bt(u.current,[e])):(v.current.delete(e),i=i||!xt(u.current,e),Tt(u.current,e,t[e])),i&&!r)return H(),!0},[H,M]),G=vn((e,t)=>{const n=e.ref,r=e.options,{type:i}=n,a=P&&ot(n)&&nt(t)?"":t;var o;return It(n)&&r?r.forEach(({ref:e})=>e.checked=e.value===a):Dt(n)?Lt(a)||(o=a,"undefined"!=typeof FileList&&o instanceof FileList)?n.files=a:n.value=a:Vt(n)?[...n.options].forEach(e=>e.selected=a.includes(e.value)):_t(n)&&r?r.length>1?r.forEach(({ref:e})=>e.checked=a.includes(e.value)):r[0].ref.checked=!!a:n.value=a,!!i},[P]),U=e=>{if(!c.current[e]||!V.current.dirty&&!V.current.dirtyFields)return!1;const t=fn(_.current,e),n=h.current.size;let r=g.current[e]!==Gt(c.current,c.current[e].ref);if(t){const t=e.substring(0,e.indexOf("["));r=un(ln(c.current,t),xt(y.current,t))}const i=(t?S.current:h.current.has(e))!==r;return r?h.current.add(e):h.current.delete(e),S.current=t?r:!!h.current.size,V.current.dirty?i:n!==h.current.size},$=vn(e=>{if(U(e)||!xt(d.current,e)&&V.current.touched)return!!Tt(d.current,e,!0)},[]),z=vn((e,t,n)=>{const r=rt(t);for(const i in t){const a=`${n||e}${r?`[${i}]`:"."+i}`;at(t[i])&&z(e,t[i],a);const o=c.current[a];o&&(G(o,t[i]),$(a))}},[G,$]),W=vn((e,t)=>{const n=c.current[e];if(n){G(n,t);const r=$(e);if(Kt(r))return r}else rn(t)||z(e,t)},[$,G,z]),Z=vn(async(e,t)=>{const n=c.current[e];if(!n)return!1;const r=await Qt(c,l,n);return q(e,r,!1,t),kt(r)},[q,l]),X=vn(async e=>{const{errors:t}=await tn(n,l,ln(c.current),r,I.current),i=b.current;return b.current=kt(t),rt(e)?(e.forEach(e=>{const n=xt(t,e);n?Tt(u.current,e,n):Bt(u.current,[e])}),H()):q(e,xt(t,e)?{[e]:xt(t,e)}:{},i!==b.current),kt(u.current)},[H,q,l,r,n]),K=vn(async e=>{const t=e||Object.keys(c.current);if(M)return X(t);if(rt(t)){const e=await Promise.all(t.map(async e=>await Z(e,!0)));return H(),e.every(Boolean)}return await Z(t)},[X,Z,H,M]),J=e=>O.current||p.current.has(e)||p.current.has((e.match(/\w+/)||[])[0]);function Y(e,t,n){let r=!1;const i=rt(e);(i?e:[e]).forEach(e=>{const n=Ut(e);r=!(!W(n?e:Object.keys(e)[0],n?t:Object.values(e)[0])&&!i)||J(e)}),(r||i)&&H(),(n||i&&t)&&K(i?void 0:e)}x.current=x.current?x.current:async({type:e,target:t})=>{const i=t?t.name:"",a=c.current,o=u.current,s=a[i],f=xt(o,i);let p;if(!s)return;const h=e===ct,m=cn({hasError:!!f,isOnChange:N,isBlurEvent:h,isOnSubmit:C,isReValidateOnSubmit:F,isOnBlur:k,isReValidateOnBlur:L,isSubmitted:j.current}),v=U(i);let g=J(i)||v;if(h&&!xt(d.current,i)&&V.current.touched&&(Tt(d.current,i,!0),g=!0),m)return g&&H();if(M){const{errors:e}=await tn(n,l,ln(a),r,I.current),t=b.current;b.current=kt(e),p=xt(e,i)?{[i]:xt(e,i)}:{},t!==b.current&&(g=!0)}else p=await Qt(c,l,s);!q(i,p)&&g&&H()};const Q=vn((e={})=>{const t=kt(y.current)?$t(c.current):y.current;tn(n,l,wt(Object.assign(Object.assign({},t),e)),r,I.current).then(({errors:e})=>{const t=b.current;b.current=kt(e),t!==b.current&&H()})},[H,l,r]),ee=(e,t)=>{!tt(x.current)&&e&&function(e,t,n,r){if(!n)return;const{ref:i,ref:{name:a,type:o},mutationWatcher:s}=n;if(!o)return void delete e[a];const c=e[a];if((It(i)||_t(i))&&c){const{options:n}=c;rt(n)&&n.length?(n.forEach(({ref:e,mutationWatcher:i},a)=>{(e&&Rt(e)||r)&&(At(e,t),i&&i.disconnect(),Bt(n,[`[${a}]`]))}),n&&!n.filter(Boolean).length&&delete e[a]):delete e[a]}else(Rt(i)||r)&&(At(i,t),s&&s.disconnect(),delete e[a])}(c.current,x.current,e,t)},te=vn((e,t)=>{if(!e||e&&fn(_.current,e.ref.name)&&!t)return;ee(e,t);const{name:n}=e.ref;u.current=Bt(u.current,[n]),d.current=Bt(d.current,[n]),g.current=Bt(g.current,[n]),[h,m,v,p].forEach(e=>e.current.delete(n)),(V.current.isValid||V.current.touched)&&(H(),M&&Q())},[H,M,Q]);const ne=({name:e,type:t,types:n,message:r,preventRender:i})=>{const a=c.current[e];zt(u.current[e],{type:t,message:r,types:n})||(Tt(u.current,e,{type:t,types:n,message:r,ref:a?a.ref:{},isManual:!0}),i||H())};function re(e){kt(c.current)||(rt(e)?e:[e]).forEach(e=>te(c.current[e],!0))}function ie(e,t={}){if(!e.name)return console.warn("Missing name @",e);const{name:n,type:r,value:i}=e,a=Object.assign({ref:e},t),o=c.current,s=It(e)||_t(e);let u,d=o[n],f=!0,p=!1;if(s?d&&rt(d.options)&&d.options.find(({ref:e})=>i===e.value):d)return void(o[n]=Object.assign(Object.assign({},d),t));if(r){const i=function(e,t){const n=new MutationObserver(()=>{Rt(e)&&(n.disconnect(),t())});return n.observe(window.document,{childList:!0,subtree:!0}),n}(e,()=>te(a));d=s?Object.assign({options:[...d&&d.options||[],{ref:e,mutationWatcher:i}],ref:{type:r,name:n}},t):Object.assign(Object.assign({},a),{mutationWatcher:i})}else d=a;if(o[n]=d,kt(y.current)||(u=nn(y.current,n),f=tt(u),p=fn(_.current,n),f||p||G(d,u)),M&&!p&&V.current.isValid?Q():kt(t)||(m.current.add(n),!C&&V.current.isValid&&Qt(c,l,d).then(e=>{const t=b.current;kt(e)?v.current.add(n):b.current=!1,t!==b.current&&H()})),g.current[n]||p&&f||(g.current[n]=f?Gt(o,d.ref):u),!r)return;!function({field:e,handleChange:t,isRadioOrCheckbox:n}){const{ref:r}=e;ot(r)&&r.addEventListener&&t&&(r.addEventListener(n?lt:ut,t),r.addEventListener(ct,t))}({field:s&&d.options?d.options[d.options.length-1]:d,isRadioOrCheckbox:s,handleChange:x.current})}function ae(e,t){if(!B)if(Ut(e))ie({name:e},t);else{if(!at(e)||!("name"in e))return t=>t&&ie(t,e);ie(e,t)}}const oe=vn(e=>async t=>{let i,a;t&&(t.preventDefault(),t.persist());const s=c.current;V.current.isSubmitting&&(w.current=!0,H());try{if(M){a=$t(s);const{errors:e,values:t}=await tn(n,l,wt(a),r,I.current);u.current=e,i=e,a=t}else{const{errors:e,values:t}=await Object.values(s).reduce(async(e,t)=>{if(!t)return e;const n=await e,{ref:r,ref:{name:i}}=t;if(!s[i])return n;const a=await Qt(c,l,t);return a[i]?(Tt(n.errors,i,a[i]),v.current.delete(i),n):(m.current.has(i)&&v.current.add(i),n.values[i]=Gt(s,r),n)},Promise.resolve({errors:{},values:{}}));i=e,a=t}kt(i)?(u.current={},await e(wt(a),t)):(o&&P&&((e,t)=>{for(const n in e)if(xt(t,n)){const t=e[n];if(t){if(ot(t.ref)&&t.ref.focus){t.ref.focus();break}if(t.options){t.options[0].ref.focus();break}}}})(s,i),u.current=i)}finally{j.current=!0,w.current=!1,T.current=T.current+1,H()}},[P,H,M,o,l,r,n]),se=e=>{const t=$t(c.current),n=kt(t)?y.current:t;return e&&e.nest?wt(n):n};bn(()=>()=>{E.current=!0,c.current&&Object.values(c.current).forEach(e=>te(e,!0))},[te]),M||(b.current=v.current.size>=m.current.size&&kt(u.current));const ce={dirty:S.current,dirtyFields:h.current,isSubmitted:j.current,submitCount:T.current,touched:d.current,isSubmitting:w.current,isValid:C?j.current&&kt(u.current):b.current};return{watch:function(e,t){const n=tt(t)?tt(y.current)?{}:y.current:t,r=$t(c.current,e),i=p.current;if(Ut(e))return sn(r,e,i,n,_.current.has(e)?f.current[e]:void 0);if(rt(e))return e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:sn(r,t,i,n)}),{});O.current=!0;const a=!kt(r)&&r||t||y.current;return e&&e.nest?wt(a):a},control:Object.assign(Object.assign({register:ae,unregister:re,removeFieldEventListener:ee,getValues:se,setValue:Y,reRender:H,triggerValidation:K},M?{validateSchemaIsValid:Q}:{}),{formState:ce,mode:{isOnBlur:k,isOnSubmit:C,isOnChange:N},reValidateMode:{isReValidateOnBlur:L,isReValidateOnSubmit:F},errorsRef:u,touchedFieldsRef:d,fieldsRef:c,resetFieldArrayFunctionRef:A,validFieldsRef:v,dirtyFieldsRef:h,fieldsWithValidationRef:m,watchFieldArrayRef:f,fieldArrayNamesRef:_,isDirtyRef:S,readFormStateRef:V,defaultValuesRef:y}),handleSubmit:oe,setValue:vn(Y,[H,W,K]),triggerValidation:K,getValues:vn(se,[]),reset:vn((e,t={})=>{if(P)for(const e of Object.values(c.current))if(e&&ot(e.ref)&&e.ref.closest)try{e.ref.closest("form").reset();break}catch(e){}e&&(y.current=e),Object.values(A.current).forEach(e=>Xt(e)&&e()),(({errors:e,dirty:t,isSubmitted:n,touched:r,isValid:i,submitCount:a})=>{c.current={},e||(u.current={}),r||(d.current={}),i||(v.current=new Set,m.current=new Set,b.current=!0),t||(h.current=new Set,S.current=!1),n||(j.current=!1),a||(T.current=0),g.current={},p.current=new Set,O.current=!1})(t),H()},[]),register:vn(ae,[y.current,g.current,f.current]),unregister:vn(re,[]),clearError:vn((function(e){tt(e)?u.current={}:Bt(u.current,rt(e)?e:[e]),H()}),[]),setError:vn((function(e,t="",n){Ut(e)?ne(Object.assign({name:e},at(t)?{types:t,type:""}:{type:t,message:n})):rt(e)&&(e.forEach(e=>ne(Object.assign(Object.assign({},e),{preventRender:!0}))),H())}),[]),errors:u.current,formState:D?new Proxy(ce,{get:(e,t)=>t in e?(V.current[t]=!0,e[t]):{}}):ce}}function yn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}const En=Object(g.createContext)(null);function On(){return Object(g.useContext)(En)}function jn(e){var{children:t,formState:n,errors:r}=e,i=yn(e,["children","formState","errors"]);return Object(g.createElement)(En.Provider,{value:Object.assign(Object.assign({},i),{formState:n,errors:r})},t)}var Sn=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(16*Math.random()+e)%16|0;return("x"==t?n:3&n|8).toString(16)}))};const Tn=(e,t)=>Object.assign(Object.assign({},at(e)?e:{value:e}),{[t]:Sn()}),wn=(e,t)=>(rt(e)?e:[]).map(e=>Tn(e,t)),xn=(e,t)=>[...e.slice(0,t),...e.slice(t+1)];var An=(e,t)=>tt(t)?[]:rt(t)?t.reduce(({result:e,previousIndex:t},n)=>({result:xn(e,t>-1&&t<n?n-1:n),previousIndex:n}),{result:e,previousIndex:-1}).result:xn(e,t),In=(e,t,n)=>rt(e)?e.splice(n,0,e.splice(t,1)[0]):[],_n=(e,t,n)=>rt(e)&&([e[t],e[n]]=[e[n],e[t]]),Rn=(e,t)=>[...rt(t)?t:[t||null],...e],kn=(e,t,n)=>[...e.slice(0,t),...rt(n)?n:[n||null],...e.slice(t)],Cn=e=>rt(e)?Array(e.length).fill(null):void 0;const{useEffect:Nn,useCallback:Bn,useRef:Mn,useState:Pn}=g,Dn=({control:e,name:t,keyName:n="id"})=>{const r=On(),{resetFieldArrayFunctionRef:i,fieldArrayNamesRef:a,reRender:o,fieldsRef:s,getValues:c,defaultValuesRef:l,removeFieldEventListener:u,errorsRef:d,dirtyFieldsRef:f,isDirtyRef:p,touchedFieldsRef:h,readFormStateRef:m,watchFieldArrayRef:v,validFieldsRef:b,fieldsWithValidationRef:g,validateSchemaIsValid:y}=e||r.control,E=Mn(xt(l.current,t,[])),[O,j]=Pn(wn(E.current,n)),S=Mn(O),T=e=>e.map(e=>Tn(e,n));S.current=O;const w=e=>{v.current=Object.assign(Object.assign({},v.current),{[t]:e}),j(e),m.current.isValid&&y&&y({[t]:e})},x=e=>{m.current.dirty&&(p.current=!!tt(e)||un(e,E.current));for(const e in s.current)dn(e,t)&&s.current[e]&&u(s.current[e],!0)},A=()=>{const e=c({nest:!0})[t];if(rt(e))for(let t=0;t<e.length;t++)S.current[t]=Object.assign(Object.assign({},S.current[t]),e[t])},I=()=>{x(),E.current=xt(l.current,t,[]),j(wn(E.current,n))};return Nn(()=>{const e=i.current,n=a.current;return n.add(t),e[t]=I,v.current=Object.assign(Object.assign({},v.current),{[t]:O}),()=>{x(),delete e[t],n.delete(t)}},[]),{swap:Bn((e,n)=>{A();const r=ln(s.current,t);_n(r,e,n),x(r),_n(S.current,e,n),w([...S.current]),d.current[t]&&_n(d.current[t],e,n),m.current.touched&&h.current[t]&&(_n(h.current[t],e,n),o())},[]),move:Bn((e,n)=>{A();const r=ln(s.current,t);In(r,e,n),x(r),In(S.current,e,n),w([...S.current]),d.current[t]&&In(d.current[t],e,n),m.current.touched&&h.current[t]&&(In(h.current[t],e,n),o())},[]),prepend:Bn(e=>{x(),w(Rn(S.current,rt(e)?T(e):[Tn(e,n)])),d.current[t]&&(d.current[t]=Rn(d.current[t],Cn(e))),m.current.touched&&h.current[t]&&(h.current[t]=Rn(h.current[t],Cn(e)),o())},[]),append:Bn(e=>{m.current.dirty&&(p.current=!0,o()),w([...S.current,...rt(e)?T(e):[Tn(e,n)]])},[]),remove:Bn(e=>{let n=!1;if(tt(e)||A(),x(An(ln(s.current,t),e)),w(An(S.current,e)),d.current[t]&&(d.current[t]=An(d.current[t],e),d.current[t].filter(Boolean).length||delete d.current[t]),m.current.touched&&h.current[t]&&(h.current[t]=An(h.current[t],e),n=!0),m.current.dirty&&(f.current.forEach(n=>{(tt(t)||n.startsWith(`${t}[${e}]`))&&f.current.delete(n)}),n=!0),m.current.isValid&&!y){let r=-1,i=!1;const a=tt(e);for(;r++<O.length;){const n=r===O.length-1,o=(rt(e)?e:[e]).indexOf(r)>=0;if((o||a)&&(i=!0),i)for(const e in O[r]){const i=`${t}[${r}].${e}`;if(o||n||a)b.current.delete(i),g.current.delete(i);else{const n=`${t}[${r-1}].${e}`;b.current.has(i)&&b.current.add(n),g.current.has(i)&&g.current.add(n)}}}n=!0}n&&o()},[O]),insert:Bn((e,r)=>{A(),x(kn(ln(s.current,t),e)),w(kn(S.current,e,rt(r)?T(r):[Tn(r,n)])),d.current[t]&&(d.current[t]=kn(d.current[t],e,Cn(r))),m.current.touched&&h.current[t]&&(h.current[t]=kn(h.current[t],e,Cn(r)),o())},[]),fields:O}};const Vn=e=>{var{name:t,rules:n,as:r,onBlur:i,onChange:a,onChangeName:o=st.onChange,onBlurName:s=st.onBlur,valueName:c,defaultValue:l,control:u}=e,d=yn(e,["name","rules","as","onBlur","onChange","onChangeName","onBlurName","valueName","defaultValue","control"]);const f=On(),{defaultValuesRef:p,setValue:h,register:m,unregister:v,errorsRef:b,removeFieldEventListener:y,triggerValidation:E,mode:{isOnSubmit:O,isOnBlur:j,isOnChange:S},reValidateMode:{isReValidateOnBlur:T,isReValidateOnSubmit:w},formState:{isSubmitted:x},fieldsRef:A,fieldArrayNamesRef:I}=u||f.control,[_,R]=Object(g.useState)(tt(l)?xt(p.current,t):l),k=Object(g.useRef)(_),C=Kt(_),N=()=>!cn({hasError:!!xt(b.current,t),isOnBlur:j,isOnSubmit:O,isOnChange:S,isReValidateOnBlur:T,isReValidateOnSubmit:w,isSubmitted:x}),B=e=>{const t=((e,t)=>rn(e)||!at(e.target)||at(e.target)&&!e.type?e:t||tt(e.target.value)?e.target.checked:e.target.value)(e,C);return R(t),k.current=t,t},M=()=>{fn(I.current,t)&&A.current[t]&&y(A.current[t],!0),m(Object.defineProperty({name:t},"value",{set(e){R(e),k.current=e},get:()=>k.current}),Object.assign({},n))};Object(g.useEffect)(()=>{A.current[t]||(M(),R(tt(l)?xt(p.current,t):l))}),Object(g.useEffect)(()=>(M(),()=>{fn(I.current,t)||v(t)}),[t]),Object(g.useEffect)(()=>{M()},[n]);const P=j||T,D=Object.assign(Object.assign(Object.assign(Object.assign({name:t},d),a?{[o]:(V=a,(...e)=>h(t,B(V(e)),N()))}:{[o]:e=>{const n=B(e);h(t,n,N())}}),i||P?{[s]:(...e)=>{i&&i(e),P&&E(t)}}:{}),{[c||(C?"checked":"value")]:_});var V;return Object(g.isValidElement)(r)?Object(g.cloneElement)(r,D):Object(g.createElement)(r,D)};var Ln,Fn,Hn,qn,Gn,Un,$n,zn,Wn,Zn,Xn,Kn,Jn,Yn,Qn,er,tr,nr,rr,ir,ar,or,sr,cr,lr,ur,dr,fr,pr,hr,mr,vr=function(e){return{container:Object(R.css)(Ln||(Ln=Object(b.e)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: ",";\n  "],["\n    display: flex;\n    align-items: center;\n    margin-bottom: ",";\n  "])),e.spacing.md),checkbox:Object(R.css)(Fn||(Fn=Object(b.e)(["\n    position: relative;\n  "],["\n    position: relative;\n  "]))),label:Object(R.css)(Hn||(Hn=Object(b.e)(["\n    margin-bottom: 0;\n  "],["\n    margin-bottom: 0;\n  "])))}},br=function(e){var t=e.disabled,n=e.id,r=e.name,i=e.label,a=e.description,o=e.className,s=e.value,c=e.onChange,l=Object(I.useStyles)(vr),u=On().register;return y.a.createElement("div",{className:Object(R.cx)(l.container,o)},y.a.createElement(I.Checkbox,{name:r,ref:r?u:void 0,disabled:t,id:n,style:{position:"relative"},value:s,onChange:c}),y.a.createElement(I.Label,{description:a,htmlFor:n,className:l.label},i))},gr=function(e){var t=e.name,n=e.disabled,r=e.limit,i=e.label,a=(e.validateName,e.validateValue,On()),o=a.register,s=a.control,c=a.errors,l=Dn({control:s,name:t}),u=l.fields,d=l.append,f=l.remove,p=Object(I.useTheme)(),h=t.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),c);return y.a.createElement(I.VerticalGroup,{justify:"space-between"},u.map((function(e,r){var i,a,s,c,l,u,d;return y.a.createElement(I.HorizontalGroup,{key:e.id,align:"flex-start"},y.a.createElement(I.Field,{invalid:Boolean(null===(a=null===(i=null==h?void 0:h[r])||void 0===i?void 0:i.name)||void 0===a?void 0:a.type),error:null===(c=null===(s=null==h?void 0:h[r])||void 0===s?void 0:s.name)||void 0===c?void 0:c.message,className:Object(R.css)(qn||(qn=Object(b.e)(["\n              margin-bottom: 0;\n            "],["\n              margin-bottom: 0;\n            "])))},y.a.createElement(I.Input,{ref:o({required:!0}),name:t+"["+r+"].name",type:"text",placeholder:"name",disabled:n})),y.a.createElement(I.Field,{invalid:Boolean(null===(l=null==h?void 0:h[r])||void 0===l?void 0:l.value),error:null===(d=null===(u=null==h?void 0:h[r])||void 0===u?void 0:u.value)||void 0===d?void 0:d.message,className:Object(R.css)(Gn||(Gn=Object(b.e)(["\n              margin-bottom: 0;\n            "],["\n              margin-bottom: 0;\n            "])))},y.a.createElement(I.Input,{ref:o({required:!0}),name:t+"["+r+"].value",type:"text",placeholder:"value",disabled:n})),y.a.createElement(I.IconButton,{className:Object(R.css)(Un||(Un=Object(b.e)(["\n              margin-top: ",";\n            "],["\n              margin-top: ",";\n            "])),p.spacing.sm),name:"minus-circle",type:"button",onClick:function(){return f(r)},disabled:n}))})),u.length<r&&y.a.createElement(I.Button,{onClick:function(){return d({name:"",value:""})},disabled:n,variant:"secondary",size:"sm",type:"button"},y.a.createElement(I.Icon,{name:"plus"})," Add ",i))},yr=function(e){var t=e.isEditor,n=e.limit;return y.a.createElement(I.Field,{label:"Labels",description:"Custom labels to be included with collected metrics and logs.",disabled:!t},y.a.createElement(gr,{name:"labels",disabled:!t,label:"label",limit:null!=n?n:5,validateName:Ne,validateValue:Be}))},Er=function(e){var t=e.isEditor,n=Object(b.f)(Object(g.useState)(!1),2),r=n[0],i=n[1],a=On(),o=a.control,s=a.register;return y.a.createElement(W,{label:"Advanced options",collapsible:!0,onToggle:function(){return i(!r)},isOpen:r},y.a.createElement("div",{className:Object(R.css)($n||($n=Object(b.e)(["\n          max-width: 500px;\n        "],["\n          max-width: 500px;\n        "])))},y.a.createElement(yr,{isEditor:t}),y.a.createElement(I.Field,{label:"IP version",description:"The IP protocol of the ICMP request",disabled:!t},y.a.createElement(Vn,{name:"settings.ping.ipVersion",as:I.Select,control:o,options:Y,rules:{required:!0}})),y.a.createElement(I.Field,{label:"Don't fragment",description:"Set the DF-bit in the IP-header. Only works with ipV4",disabled:!t},y.a.createElement(I.Switch,{id:"ping-settings-dont-fragment",ref:s(),name:"settings.ping.dontFragment",disabled:!t}))))},Or=function(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,h,m,v,E,O,j,S,T,w,x,A,_=e.isEditor,R=e.checkType,k=Object(b.f)(Object(g.useState)(!1),2),C=k[0],N=k[1],B=On(),M=B.register,P=B.errors;return y.a.createElement(W,{label:"TLS config",onToggle:function(){return N(!C)},isOpen:C,collapsible:!0},y.a.createElement(br,{id:"tls-config-skip-validation",name:"settings."+R+".tlsConfig.insecureSkipVerify",disabled:!_,label:"Disable target certificate validation"}),y.a.createElement(I.Field,{label:"Server name",description:"Used to verify the hostname for the targets",disabled:!_,invalid:Boolean(null===(r=null===(n=null===(t=P.settings)||void 0===t?void 0:t[R])||void 0===n?void 0:n.tlsConfig)||void 0===r?void 0:r.serverName),error:null===(o=null===(a=null===(i=P.settings)||void 0===i?void 0:i[R])||void 0===a?void 0:a.tlsConfig)||void 0===o?void 0:o.serverName},y.a.createElement(I.Input,{id:"tls-config-server-name",ref:M({validate:Pe}),name:"settings."+R+".tlsConfig.serverName",type:"text",placeholder:"Server name",disabled:!_})),y.a.createElement(I.Container,null,y.a.createElement(I.Field,{label:"CA certificate",description:"The CA cert to use for the targets",disabled:!_,invalid:Boolean(null===(l=null===(c=null===(s=P.settings)||void 0===s?void 0:s[R])||void 0===c?void 0:c.tlsConfig)||void 0===l?void 0:l.caCert),error:null===(f=null===(d=null===(u=P.settings)||void 0===u?void 0:u[R])||void 0===d?void 0:d.tlsConfig)||void 0===f?void 0:f.caCert},y.a.createElement(I.TextArea,{id:"tls-config-ca-certificate",ref:M({validate:De}),name:"settings."+R+".tlsConfig.caCert",rows:2,disabled:!_,placeholder:"CA certificate"}))),y.a.createElement(I.Container,null,y.a.createElement(I.Field,{label:"Client certificate",description:"The client cert file for the targets",disabled:!_,invalid:Boolean(null===(m=null===(h=null===(p=null==P?void 0:P.settings)||void 0===p?void 0:p[R])||void 0===h?void 0:h.tlsConfig)||void 0===m?void 0:m.clientCert),error:null===(O=null===(E=null===(v=null==P?void 0:P.settings)||void 0===v?void 0:v[R])||void 0===E?void 0:E.tlsConfig)||void 0===O?void 0:O.clientCert},y.a.createElement(I.TextArea,{id:"tls-config-client-cert",ref:M({validate:Ve}),name:"settings."+R+".tlsConfig.clientCert",rows:2,disabled:!_,placeholder:"Client certificate"}))),y.a.createElement(I.Container,null,y.a.createElement(I.Field,{label:"Client key",description:"The client key file for the targets",disabled:!_,invalid:Boolean(null===(T=null===(S=null===(j=null==P?void 0:P.settings)||void 0===j?void 0:j[R])||void 0===S?void 0:S.tlsConfig)||void 0===T?void 0:T.clientKey),error:null===(A=null===(x=null===(w=null==P?void 0:P.settings)||void 0===w?void 0:w[R])||void 0===x?void 0:x.tlsConfig)||void 0===A?void 0:A.clientKey},y.a.createElement(I.TextArea,{id:"tls-config-client-key",ref:M({validate:Le}),name:"settings."+R+".tlsConfig.clientKey",type:"password",rows:2,disabled:!_,placeholder:"Client key"}))))},jr=[{label:"HTTP/1.0",value:a.HTTP1_0},{label:"HTTP/1.1",value:a.HTTP1_1},{label:"HTTP/2",value:a.HTTP2_0}],Sr=[{label:"GET",value:i.GET},{label:"HEAD",value:i.HEAD},{label:"PUT",value:i.PUT},{label:"POST",value:i.POST},{label:"DELETE",value:i.DELETE},{label:"OPTIONS",value:i.OPTIONS}],Tr=function(){for(var e=[],t=100;t<=102;t++)e.push({label:""+t,value:t});for(t=200;t<=208;t++)e.push({label:""+t,value:t});for(t=300;t<=308;t++)e.push({label:""+t,value:t});for(t=400;t<=418;t++)e.push({label:""+t,value:t});e.push({label:"422",value:422}),e.push({label:"426",value:426}),e.push({label:"428",value:428}),e.push({label:"429",value:429}),e.push({label:"431",value:431});for(t=500;t<=511;t++)e.push({label:""+t,value:t});return e.push({label:"598",value:598}),e.push({label:"599",value:599}),e}(),wr="settings.http.regexValidations",xr=function(e){return{validationGroup:Object(R.css)(zn||(zn=Object(b.e)(["\n    max-width: 400px;\n  "],["\n    max-width: 400px;\n  "]))),validationGrid:Object(R.css)(Wn||(Wn=Object(b.e)(["\n    display: grid;\n    grid-template-columns: 300px auto 70px auto auto;\n    grid-gap: ",";\n    align-items: center;\n    width: 100%;\n  "],["\n    display: grid;\n    grid-template-columns: 300px auto 70px auto auto;\n    grid-gap: ",";\n    align-items: center;\n    width: 100%;\n  "])),e.spacing.sm),validationInverted:Object(R.css)(Zn||(Zn=Object(b.e)(["\n    position: relative;\n    margin-top: -20px;\n    justify-self: center;\n  "],["\n    position: relative;\n    margin-top: -20px;\n    justify-self: center;\n  "]))),maxWidth:Object(R.css)(Xn||(Xn=Object(b.e)(["\n    max-width: 500px;\n  "],["\n    max-width: 500px;\n  "]))),validationExpressions:Object(R.css)(Kn||(Kn=Object(b.e)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  "],["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  "]))),validationHeaderName:Object(R.css)(Jn||(Jn=Object(b.e)(["\n    margin-right: ",";\n  "],["\n    margin-right: ",";\n  "])),e.spacing.sm),validationAllowMissing:Object(R.css)(Yn||(Yn=Object(b.e)(["\n    justify-self: center;\n  "],["\n    justify-self: center;\n  "])))}},Ar=function(e){var t,n,r,i,a,o,s,c,u,d,f,h,m=e.isEditor,v=On(),E=v.register,O=v.watch,j=v.control,S=v.errors,T=Object(b.f)(Object(g.useState)(!1),2),w=T[0],x=T[1],A=Object(b.f)(Object(g.useState)(!1),2),_=A[0],k=A[1],C=Object(b.f)(Object(g.useState)(!1),2),N=C[0],B=C[1],M=Object(b.f)(Object(g.useState)(!1),2),P=M[0],D=M[1],V=O("settings.http.bearerToken"),L=O("settings.http.basicAuth"),F=Object(b.f)(Object(g.useState)(Boolean(V)),2),H=F[0],q=F[1],G=Object(b.f)(Object(g.useState)(Boolean(L)),2),U=G[0],$=G[1],z=Dn({control:j,name:wr}),Z=z.fields,X=z.append,K=z.remove,J=Object(I.useStyles)(xr);return y.a.createElement(I.Container,null,y.a.createElement(W,{label:"HTTP settings",onToggle:function(){return x(!w)},isOpen:w,collapsible:!0},y.a.createElement(I.HorizontalGroup,null,y.a.createElement(I.Field,{label:"Request method",description:"The HTTP method the probe will use",disabled:!m,invalid:Boolean(null===(n=null===(t=null==S?void 0:S.settings)||void 0===t?void 0:t.http)||void 0===n?void 0:n.method),error:null===(i=null===(r=null==S?void 0:S.settings)||void 0===r?void 0:r.http)||void 0===i?void 0:i.method},y.a.createElement(Vn,{as:I.Select,rules:{required:!0},name:"settings.http.method",options:Sr}))),y.a.createElement(I.Container,null,y.a.createElement(I.Field,{label:"Request body",description:"The body of the HTTP request used in probe.",disabled:!m,invalid:Boolean(null===(o=null===(a=null==S?void 0:S.settings)||void 0===a?void 0:a.http)||void 0===o?void 0:o.body),error:null===(c=null===(s=null==S?void 0:S.settings)||void 0===s?void 0:s.http)||void 0===c?void 0:c.body},y.a.createElement(I.TextArea,{id:"http-settings-request-body",ref:E({validate:He}),name:"settings.http.body",rows:2,disabled:!m}))),y.a.createElement(I.Container,null,y.a.createElement(I.Field,{label:"Request headers",description:"The HTTP headers set for the probe..",disabled:!m},y.a.createElement(gr,{name:"settings.http.headers",disabled:!m,label:"header",limit:10,validateName:qe,validateValue:Ge})))),y.a.createElement(Or,{isEditor:m,checkType:l.HTTP}),y.a.createElement(W,{label:"Authentication",onToggle:function(){return k(!_)},isOpen:_,collapsible:!0},y.a.createElement(I.VerticalGroup,{spacing:"xs"},y.a.createElement(br,{label:"Include bearer authorization header in request",id:"http-settings-bearer-authorization",disabled:!m,className:H?Object(R.css)(Qn||(Qn=Object(b.e)(["\n                    margin-bottom: 1px;\n                  "],["\n                    margin-bottom: 1px;\n                  "]))):void 0,value:H,onChange:function(){return q(!H)}}),H&&y.a.createElement(I.Field,{invalid:Boolean(null===(d=null===(u=S.settings)||void 0===u?void 0:u.http)||void 0===d?void 0:d.bearerToken),error:null===(h=null===(f=S.settings)||void 0===f?void 0:f.http)||void 0===h?void 0:h.bearerToken},y.a.createElement(I.Input,{ref:E({validate:Me}),name:"settings.http.bearerToken",type:"password",placeholder:"Bearer token",disabled:!m}))),y.a.createElement(I.VerticalGroup,{spacing:"xs"},y.a.createElement(br,{label:"Include basic authorization header in request",id:"http-settings-basic-authorization",disabled:!m,className:U?Object(R.css)(er||(er=Object(b.e)(["\n                    margin-bottom: 1px;\n                  "],["\n                    margin-bottom: 1px;\n                  "]))):void 0,value:U,onChange:function(){return $(!U)}}),U&&y.a.createElement(I.HorizontalGroup,null,y.a.createElement(I.Input,{ref:E(),name:"settings.http.basicAuth.username",type:"text",placeholder:"Username",disabled:!m}),y.a.createElement(I.Input,{ref:E(),name:"settings.http.basicAuth.password",type:"password",placeholder:"Password",disabled:!m})))),y.a.createElement(W,{label:"Validation",onToggle:function(){return B(!N)},isOpen:N,collapsible:!0},y.a.createElement("div",{className:J.validationGroup},y.a.createElement(I.Field,{label:"Valid status codes",description:"Accepted status codes for this probe. Defaults to 2xx.",disabled:!m},y.a.createElement(Vn,{as:I.MultiSelect,control:j,name:"settings.http.validStatusCodes",options:Tr,disabled:!m})),y.a.createElement(I.Field,{label:"Valid HTTP versions",description:"Accepted HTTP versions for this probe",disabled:!m},y.a.createElement(Vn,{as:I.MultiSelect,control:j,name:"settings.http.validHTTPVersions",options:jr,disabled:!m})),y.a.createElement(I.Field,{label:"SSL options",description:"Choose whether probe fails if SSL is present or not present",disabled:!m},y.a.createElement(Vn,{as:I.Select,name:"settings.http.sslOptions",control:j,options:te,disabled:!m}))),y.a.createElement(I.VerticalGroup,{width:"100%"},y.a.createElement(I.Label,null,"Regex Validation"),Boolean(Z.length)&&y.a.createElement("div",{className:J.validationGrid},y.a.createElement(I.Label,null,"Field Name"),y.a.createElement(I.Label,null,"Match condition"),y.a.createElement(I.Label,null,"Invert Match"),y.a.createElement(I.Label,null,"Allow Missing"),y.a.createElement("div",null),Z.map((function(e,t){var n,r=(null===(n=O(wr+"["+t+"].matchType"))||void 0===n?void 0:n.value)===p.Header;return y.a.createElement(g.Fragment,{key:e.id},y.a.createElement(Vn,{as:I.Select,name:wr+"["+t+"].matchType",placeholder:"Field name",options:ne}),y.a.createElement("div",{className:J.validationExpressions},r&&y.a.createElement("div",{className:J.validationHeaderName},y.a.createElement(I.Input,{ref:E,name:wr+"["+t+"].header",placeholder:"Header name"})),y.a.createElement(I.Input,{ref:E,name:wr+"["+t+"].expression",placeholder:"Regex"})),y.a.createElement("div",{className:J.validationInverted},y.a.createElement(I.Checkbox,{ref:E,name:wr+"["+t+"].inverted"})),r?y.a.createElement("div",{className:J.validationAllowMissing},y.a.createElement(I.Switch,{ref:E,name:wr+"["+t+"].allowMissing"})):y.a.createElement("div",null),y.a.createElement(I.IconButton,{name:"minus-circle",onClick:function(){return K(t)}}))}))),y.a.createElement(I.Button,{type:"button",icon:"plus",variant:"secondary",size:"sm",disabled:!m,onClick:function(){return X({matchType:ne[1],expression:"",inverted:!1})}},"Add Regex Validation"))),y.a.createElement(W,{label:"Advanced options",onToggle:function(){return D(!P)},isOpen:P,collapsible:!0},y.a.createElement("div",{className:J.maxWidth},y.a.createElement(yr,{isEditor:m}),y.a.createElement(I.Field,{label:"IP version",description:"The IP protocol of the HTTP request",disabled:!m},y.a.createElement(Vn,{as:I.Select,name:"settings.http.ipVersion",options:Y})),y.a.createElement(br,{id:"http-settings-followRedirects",label:"Follow redirects",disabled:!m,name:"settings.http.followRedirects"}),y.a.createElement(I.Field,{label:"Cache busting query parameter name",description:"The name of the query parameter used to prevent the server from using a cached response. Each probe will assign a random value to this parameter each time a request is made."},y.a.createElement(I.Input,{id:"https-settings-cache-busting-query",ref:E,name:"settings.http.cacheBustingQueryParamName",type:"string",placeholder:"cache-bust",disabled:!m})))))},Ir=[{label:"Validate "+c.Authority+" matches",value:c.Authority},{label:"Validate "+c.Answer+" matches",value:c.Answer},{label:"Validate "+c.Additional+" matches",value:c.Additional}],_r=function(e){var t=e.isEditor,n=Object(I.useTheme)().spacing,r=On(),i=r.register,a=r.control,o=Dn({control:a,name:"settings.dns.validations"}),s=o.fields,c=o.append,l=o.remove,u=Object(b.f)(Object(g.useState)(!1),2),d=u[0],f=u[1],p=Object(b.f)(Object(g.useState)(!1),2),h=p[0],m=p[1],v=Object(b.f)(Object(g.useState)(!1),2),E=v[0],O=v[1];return y.a.createElement(I.Container,null,y.a.createElement(W,{label:"DNS settings",onToggle:function(){return O(!E)},isOpen:E,collapsible:!0},y.a.createElement("div",{className:Object(R.css)(tr||(tr=Object(b.e)(["\n            max-width: 240px;\n          "],["\n            max-width: 240px;\n          "])))},y.a.createElement(I.Field,{label:"Record type",disabled:!t},y.a.createElement(Vn,{as:I.Select,name:"settings.dns.recordType",options:X})),y.a.createElement(I.Field,{label:"Server",disabled:!t},y.a.createElement(I.Input,{id:"dns-settings-server-address",ref:i,name:"settings.dns.server",type:"text",placeholder:"server"})),y.a.createElement(I.Field,{label:"Protocol",disabled:!t},y.a.createElement(Vn,{as:I.Select,name:"settings.dns.protocol",options:K})),y.a.createElement(I.Field,{label:"Port",disabled:!t},y.a.createElement(I.Input,{id:"dns-settings-port",ref:i,name:"settings.dns.port",type:"number",placeholder:"port"})))),y.a.createElement(W,{label:"Validation",onToggle:function(){return f(!d)},isOpen:d,collapsible:!0},y.a.createElement(I.HorizontalGroup,null,y.a.createElement(I.Field,{label:"Valid response codes",description:"List of valid response codes",disabled:!t},y.a.createElement(Vn,{as:I.MultiSelect,name:"settings.dns.validRCodes",options:Z,defaultValue:[Z[0]]}))),y.a.createElement(I.Label,null,"Valid Response Matches"),Boolean(s.length)&&y.a.createElement("div",{className:Object(R.css)(nr||(nr=Object(b.e)(["\n              display: grid;\n              grid-template-columns: auto auto 70px auto;\n              grid-gap: ",";\n              align-items: center;\n            "],["\n              display: grid;\n              grid-template-columns: auto auto 70px auto;\n              grid-gap: ",";\n              align-items: center;\n            "])),n.sm)},y.a.createElement(I.Label,null,"DNS Response Match"),y.a.createElement(I.Label,null,"Expression"),y.a.createElement(I.Label,null,"Invert Match"),y.a.createElement("div",null),s.map((function(e,t){return y.a.createElement(g.Fragment,{key:e.id},y.a.createElement(Vn,{as:I.Select,name:"settings.dns.validations["+t+"].responseMatch",options:Ir,defaultValue:Ir[0]}),y.a.createElement(I.Input,{ref:i,name:"settings.dns.validations["+t+"].expression",placeholder:"Type expression"}),y.a.createElement("div",{className:Object(R.css)(rr||(rr=Object(b.e)(["\n                    position: relative;\n                    margin-top: -20px;\n                    justify-self: center;\n                  "],["\n                    position: relative;\n                    margin-top: -20px;\n                    justify-self: center;\n                  "])))},y.a.createElement(I.Checkbox,{ref:i,name:"settings.dns.validations["+t+"].inverted","aria-label":"dns-validation-inverted"})),y.a.createElement(I.IconButton,{name:"minus-circle",onClick:function(){return l(t)}}))}))),y.a.createElement(I.Button,{onClick:function(){return c({responseMatch:Ir[0],expression:"",inverted:!1})},type:"button",variant:"secondary",className:Object(R.css)(ir||(ir=Object(b.e)(["\n            margin: "," 0 "," 0;\n          "],["\n            margin: "," 0 "," 0;\n          "])),n.sm,n.md),size:"sm",disabled:!t},"Add RegEx Validation")),y.a.createElement(W,{label:"Advanced options",collapsible:!0,onToggle:function(){return m(!h)},isOpen:h},y.a.createElement(yr,{isEditor:t}),y.a.createElement(I.HorizontalGroup,null,y.a.createElement(I.Field,{label:"IP version",description:"The IP protocol of the ICMP request",disabled:!t},y.a.createElement(Vn,{name:"settings.dns.ipVersion",as:I.Select,options:Y})))))},Rr=function(e){var t=e.isEditor,n=Object(b.f)(Object(g.useState)(!1),2),r=n[0],i=n[1],a=Object(b.f)(Object(g.useState)(!1),2),o=a[0],s=a[1],c=Object(b.f)(Object(g.useState)(!1),2),u=c[0],d=c[1],f=On(),p=f.register,h=f.control,m=Dn({control:h,name:"settings.tcp.queryResponse"}),v=m.fields,E=m.append,O=m.remove;return y.a.createElement(I.Container,null,y.a.createElement(W,{label:"TCP settings",onToggle:function(){return i(!r)},isOpen:r,collapsible:!0},y.a.createElement(I.Field,{label:"Use TLS",description:"Whether or not TLS is used when the connection is initiated.",disabled:!t},y.a.createElement(I.Container,{padding:"sm"},y.a.createElement(I.Switch,{ref:p,title:"Use TLS",name:"settings.tcp.tls",disabled:!t})))),y.a.createElement(W,{label:"Query/Response",onToggle:function(){return s(!o)},isOpen:o,collapsible:!0},y.a.createElement(I.Field,{label:"Query/Response",description:"The query sent in the TCP probe and the expected associated response. StartTLS upgrades TCP connection to TLS.",disabled:!t},y.a.createElement(I.VerticalGroup,null,v.map((function(e,n){return y.a.createElement(I.HorizontalGroup,{key:e.id},y.a.createElement(I.Input,{ref:p,name:"settings.tcp.queryResponse["+n+"].expect",type:"text",placeholder:"Response to expect",disabled:!t}),y.a.createElement(I.TextArea,{ref:p,name:"settings.tcp.queryResponse["+n+"].send",type:"text",placeholder:"Data to send",rows:1,disabled:!t}),y.a.createElement("span",null,"StartTLS"),y.a.createElement(I.Container,{padding:"sm"},y.a.createElement(I.Switch,{ref:p,name:"settings.tcp.queryResponse["+n+"].startTLS",label:"StartTLS",disabled:!t})),y.a.createElement(I.IconButton,{name:"minus-circle",onClick:function(){return O(n)},disabled:!t}))})),y.a.createElement(I.IconButton,{name:"plus-circle",onClick:function(){return E({expect:"",send:"",startTLS:!1})},disabled:!t})))),y.a.createElement(Or,{isEditor:t,checkType:l.TCP}),y.a.createElement(W,{label:"Advanced options",onToggle:function(){return d(!u)},isOpen:u,collapsible:!0},y.a.createElement(yr,{isEditor:t}),y.a.createElement(I.HorizontalGroup,null,y.a.createElement("div",null,y.a.createElement(I.Field,{label:"IP version",description:"The IP protocol of the ICMP request",disabled:!t},y.a.createElement(Vn,{as:I.Select,name:"settings.tcp.ipVersion",options:Y,defaultValue:Y[1]}))))))},kr=function(e){var t=e.isEditor;switch(e.typeOfCheck){case l.PING:return y.a.createElement(Er,{isEditor:t});case l.HTTP:return y.a.createElement(Ar,{isEditor:t});case l.DNS:return y.a.createElement(_r,{isEditor:t});case l.TCP:return y.a.createElement(Rr,{isEditor:t})}},Cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={probes:t.props.probes||[],probeStr:t.props.probes.join(",")},t.onChange=function(e){var n,r,i=[];try{for(var a=Object(b.i)(e.values()),o=a.next();!o.done;o=a.next()){var s=o.value;s.value&&i.push(s.value)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}var c=i.join(",");t.setState({probes:i,probeStr:c},t.onUpdate)},t.onUpdate=function(){t.props.onChange(t.state.probes)},t.onAllLocations=function(){var e,n,r=[];try{for(var i=Object(b.i)(t.props.availableProbes),a=i.next();!a.done;a=i.next()){var o=a.value;o.id&&r.push(o.id)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}var s=r.join(",");t.setState({probes:r,probeStr:s},t.onUpdate)},t.onClearLocations=function(){t.setState({probes:[],probeStr:""},t.onUpdate)},t}return Object(b.c)(t,e),t.prototype.render=function(){var e,t,n,r,i=this,a=this.state.probes,o=this.props,s=o.availableProbes,c=o.isEditor,l=o.onBlur,u=o.invalid,d=o.error,f=[];try{for(var p=Object(b.i)(s),h=p.next();!h.done;h=p.next()){var m=h.value;f.push({label:m.name,value:m.id,description:m.online?"Online":"Offline"})}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}var v=[],g=function(e){var t=f.find((function(t){return t.value===e}));t&&v.push(t)};try{for(var E=Object(b.i)(a),O=E.next();!O.done;O=E.next()){g(m=O.value)}}catch(e){n={error:e}}finally{try{O&&!O.done&&(r=E.return)&&r.call(E)}finally{if(n)throw n.error}}return y.a.createElement(I.ThemeContext.Consumer,null,(function(e){return y.a.createElement(y.a.Fragment,null,y.a.createElement(I.Field,{label:"Probe locations",description:"Select up to 20 locations where this target will be checked from.",disabled:!c,error:d,invalid:u},y.a.createElement(I.MultiSelect,{options:f,value:v,onChange:i.onChange,disabled:!c,closeMenuOnSelect:!1,onBlur:l})),y.a.createElement("div",{className:Object(R.css)(ar||(ar=Object(b.e)(["\n                margin-top: ",";\n                margin-bottom: ",";\n              "],["\n                margin-top: ",";\n                margin-bottom: ",";\n              "])),e.spacing.sm,e.spacing.md)},y.a.createElement(I.HorizontalGroup,{spacing:"sm"},y.a.createElement(I.Button,{onClick:i.onAllLocations,disabled:!c,variant:"secondary",size:"sm",type:"button"},"All"),y.a.createElement(I.Button,{onClick:i.onClearLocations,disabled:!c,variant:"secondary",size:"sm",type:"reset"},"Clear"))))}))},t}(g.PureComponent),Nr={container:Object(R.css)(or||(or=Object(b.e)(["\n    display: flex;\n    align-items: center;\n  "],["\n    display: flex;\n    align-items: center;\n  "]))),slider:Object(R.css)(sr||(sr=Object(b.e)(["\n    width: 14rem;\n    margin-right: 1.5rem;\n    margin-left: 0;\n  "],["\n    width: 14rem;\n    margin-right: 1.5rem;\n    margin-left: 0;\n  "]))),inputGroupWrapper:Object(R.css)(cr||(cr=Object(b.e)(["\n    margin-top: 1rem;\n    display: flex;\n    align-items: center;\n  "],["\n    margin-top: 1rem;\n    display: flex;\n    align-items: center;\n  "]))),rightMargin:Object(R.css)(lr||(lr=Object(b.e)(["\n    margin-right: 0.5rem;\n  "],["\n    margin-right: 0.5rem;\n  "]))),sliderInput:Object(R.css)(ur||(ur=Object(b.e)(["\n    width: 40px;\n    margin-right: 0.5rem;\n  "],["\n    width: 40px;\n    margin-right: 0.5rem;\n  "])))},Br=function(e){var t=e.value,n=e.min,r=e.max,i=e.id,a=e.onChange,o=e.separationLabel,s=e.suffixLabel,c=e.invalid,l=e.step,u=void 0===l?1:l,d=e.onBlur;return y.a.createElement("div",{className:Nr.container},y.a.createElement("div",{className:Nr.slider},y.a.createElement(I.Slider,{tooltipAlwaysVisible:!1,css:Nr.slider,min:n,max:r,step:u,value:[t],onAfterChange:function(e){var t=Object(b.f)(e,1)[0];a(t),d()}})),y.a.createElement("div",{className:Nr.inputGroupWrapper},y.a.createElement("span",{className:Nr.rightMargin},o),y.a.createElement(I.Input,{id:i,invalid:c,onBlur:d,className:Nr.sliderInput,type:"number",value:t,step:u,max:r,min:n,onChange:function(e){return a(e.target.valueAsNumber)}}),s))},Mr=function(e){var t,n,r,i=e.frequency,a=e.timeout,o=e.isEditor,s=e.probes,c=Object(b.f)(Object(g.useState)([]),2),l=c[0],u=c[1],d=On(),f=d.control,p=d.errors,h=Object(g.useContext)(oe).instance;return Object(g.useEffect)((function(){Object(b.b)(void 0,void 0,void 0,(function(){var e;return Object(b.d)(this,(function(t){switch(t.label){case 0:return[4,null==h?void 0:h.api.listProbes()];case 1:return e=t.sent(),u(null!=e?e:[]),[2]}}))}))}),[h]),y.a.createElement("div",null,y.a.createElement(et,null,"Probe options"),y.a.createElement(Vn,{as:Cr,control:f,name:"probes",valueName:"probes",rules:{validate:Fe},probes:s,availableProbes:l,isEditor:o,invalid:p.probes,error:null===(t=p.probes)||void 0===t?void 0:t.message}),y.a.createElement(I.Field,{label:"Frequency",description:"How frequently the check should run.",disabled:!o,invalid:Boolean(p.frequency),error:null===(n=p.frequency)||void 0===n?void 0:n.message},y.a.createElement(Vn,{id:"probe-options-frequency",name:"frequency",rules:{validate:Re},control:f,value:i,defaultValue:i/1e3,as:Br,step:.5,min:10,max:120,separationLabel:"every",suffixLabel:"seconds"})),y.a.createElement(I.Field,{label:"Timeout",description:"Maximum execution time for a check",disabled:!o,invalid:Boolean(p.timeout),error:null===(r=p.timeout)||void 0===r?void 0:r.message},y.a.createElement(Vn,{id:"probe-options-timeout",name:"timeout",rules:{validate:ke},value:a,defaultValue:a/1e3,as:Br,max:10,min:1,step:.5,suffixLabel:"seconds",separationLabel:"after"})))},Pr=function(e){return{formBody:Object(R.css)(dr||(dr=Object(b.e)(["\n    margin-bottom: ",";\n  "],["\n    margin-bottom: ",";\n  "])),e.spacing.sm),enabledField:Object(R.css)(fr||(fr=Object(b.e)(["\n    display: flex;\n    align-items: flex-start;\n    margin-bottom: ",";\n  "],["\n    display: flex;\n    align-items: flex-start;\n    margin-bottom: ",";\n  "])),e.spacing.md),enabledCheckbox:Object(R.css)(pr||(pr=Object(b.e)(["\n    margin-right: ",";\n    display: flex;\n  "],["\n    margin-right: ",";\n    display: flex;\n  "])),e.spacing.sm),breakLine:Object(R.css)(hr||(hr=Object(b.e)(["\n    margin-top: ",";\n  "],["\n    margin-top: ",";\n  "])),e.spacing.lg),submissionError:Object(R.css)(mr||(mr=Object(b.e)(["\n    margin-top: ",";\n  "],["\n    margin-top: ",";\n  "])),e.spacing.md)}},Dr=function(e){var t,n,r,i,a,o=e.check,s=e.instance,c=e.onReturn,l=Object(b.f)(Object(g.useState)(!1),2),d=l[0],f=l[1],p=Object(I.useStyles)(Pr),h=Object(g.useMemo)((function(){return ve(o)}),[o]),m=gn({defaultValues:h,mode:"onChange"}),v=m.watch("checkType").value,E=T(u.EDITOR),O=Object(se.useAsyncCallback)((function(e){return Object(b.b)(void 0,void 0,void 0,(function(){var t;return Object(b.d)(this,(function(n){switch(n.label){case 0:return t=function(e,t){var n,r;return{job:e.job,target:e.target,enabled:e.enabled,labels:null!==(r=null!==(n=e.labels)&&void 0!==n?n:t.labels)&&void 0!==r?r:[],probes:e.probes,timeout:1e3*e.timeout,frequency:1e3*e.frequency,settings:Se(e,t)}}(e,h),(null==o?void 0:o.id)?[4,s.updateCheck(Object(b.a)({id:o.id,tenantId:o.tenantId},t))]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,s.addCheck(t)];case 3:n.sent(),n.label=4;case 4:return c(!0),[2]}}))}))})),j=O.execute,S=O.error,w=O.loading,x=S,A=m.watch("target","");return y.a.createElement(jn,Object(b.a)({},m),y.a.createElement("form",{onSubmit:m.handleSubmit(j)},y.a.createElement(I.Legend,null,(null==o?void 0:o.id)?"Edit Check":"Add Check"),y.a.createElement("div",{className:p.formBody},y.a.createElement(et,null,"Check Details"),y.a.createElement(I.Field,{label:"Check type",disabled:!!(null==o?void 0:o.id)},y.a.createElement(Vn,{name:"checkType",placeholder:"Check type",control:m.control,as:I.Select,options:ee,width:30})),y.a.createElement(br,{disabled:!E,name:"enabled",id:"check-form-enabled",label:"Enabled",description:"If a check is enabled, metrics and logs are published to your Grafana Cloud stack."}),y.a.createElement(I.Field,{label:"Job name",description:"Name used for job label",disabled:!E,invalid:Boolean(m.errors.job),error:null===(t=m.errors.job)||void 0===t?void 0:t.message},y.a.createElement(I.Input,{id:"check-editor-job-input",ref:m.register({required:!0,validate:Ie}),name:"job",type:"string",placeholder:"jobName"})),y.a.createElement(Vn,{name:"target",as:Qe,control:m.control,target:A,valueName:"target",typeOfCheck:v,invalid:Boolean(m.errors.target),error:null===(n=m.errors.target)||void 0===n?void 0:n.message,rules:{required:!0,validate:function(e){return _e(v,e)}},disabled:!E}),y.a.createElement("hr",{className:p.breakLine}),y.a.createElement(Mr,{isEditor:E,timeout:null!==(r=null==o?void 0:o.timeout)&&void 0!==r?r:re.timeout,frequency:null!==(i=null==o?void 0:o.frequency)&&void 0!==i?i:re.frequency,probes:null!==(a=null==o?void 0:o.probes)&&void 0!==a?a:re.probes}),y.a.createElement(kr,{typeOfCheck:v,isEditor:E})),y.a.createElement(I.HorizontalGroup,null,y.a.createElement(I.Button,{type:"submit",disabled:m.formState.isSubmitting||w||Object.keys(m.errors).length>0},"Save"),(null==o?void 0:o.id)&&y.a.createElement(I.Button,{variant:"destructive",onClick:function(){return f(!0)},disabled:!E,type:"button"},"Delete Check"),y.a.createElement(I.ConfirmModal,{isOpen:d,title:"Delete check",body:"Are you sure you want to delete this check?",confirmText:"Delete check",onConfirm:function(){return Object(b.b)(void 0,void 0,void 0,(function(){var e;return Object(b.d)(this,(function(t){switch(t.label){case 0:return(e=null==o?void 0:o.id)?[4,s.deleteCheck(e)]:[2];case 1:return t.sent(),c(!0),[2]}}))}))},onDismiss:function(){return f(!1)}}),y.a.createElement("a",{onClick:function(){return c(!0)}},"Back")),x&&y.a.createElement("div",{className:p.submissionError},y.a.createElement(I.Alert,{title:"Save failed",severity:"error"},x.status+": "+x.message))))};function Vr(e,t){var n=this,r=Object(g.useContext)(oe).instance,i=Object(b.f)(Object(g.useState)(!0),2),a=i[0],o=i[1],s=Object(b.f)(Object(g.useState)([]),2),c=s[0],l=s[1],u=Object(b.f)(Object(g.useState)(),2),d=u[0],f=u[1];return Object(g.useEffect)((function(){var i=function(){return Object(b.b)(n,void 0,void 0,(function(){var n,i,a,s,c,u;return Object(b.d)(this,(function(d){switch(d.label){case 0:return n=null===(u=null===(c=null==r?void 0:r.api)||void 0===c?void 0:c.getMetricsDS())||void 0===u?void 0:u.url,(null==t?void 0:t.skip)||!n?[2]:(o(!0),[4,A(n,e,t)]);case 1:return i=d.sent(),a=i.error,s=i.data,l(s),f(a),o(!1),[2]}}))}))};i();var a=setInterval((function(){i()}),6e4);return function(){return clearInterval(a)}}),[e,null==r?void 0:r.api,t]),{loading:a,data:c,error:d}}var Lr,Fr,Hr,qr,Gr,Ur,$r,zr=function(e,t,n,r){return e?"exclamation-triangle":t?"question-circle":r?n<50?"heart-break":"heart":"pause"},Wr=function(e,t,n,r){return e?"critical":t?"paused":r?n<50?"critical":n<99?"warning":"ok":"paused"},Zr=function(e){var t,n,r,i=e.check,a='instance="'+i.target+'", job="'+i.job+'"',o=Vr("sum(probe_success{"+a+"}) / count(probe_success{"+a+"})"),s=o.data,c=o.error,l=!s||s.length<1,u=100*parseFloat(null!==(r=null===(n=null===(t=null==s?void 0:s[0])||void 0===t?void 0:t.value)||void 0===n?void 0:n[1])&&void 0!==r?r:0);return y.a.createElement(I.Icon,{name:zr(c,l,u,i.enabled),size:"xxl",className:"alert-rule-item__icon alert-state-"+Wr(c,l,u,i.enabled)})},Xr=function(e){var t=e.labelNames,n=e.labelValues,r=e.height,i=e.width,a=e.sparkline,o=e.onClick,s=t.reduce((function(e,t,r){return e.push(t+'="'+n[r]+'"'),e}),[]).join(","),c="sum(rate(probe_success_sum{"+s+"}[3h])) / sum(rate(probe_success_count{"+s+"}[3h]))",l="100 * sum(rate(probe_success_sum{"+s+"}[10m])) / sum(rate(probe_success_count{"+s+"}[10m]))",u=Math.floor(Date.now()/1e3),d=Object(b.f)(Object(g.useState)({skip:!a,start:u-10800,end:u,step:600}),1)[0],f=Vr(c),p=f.data,m=f.loading,v=Vr(l,d),E=v.data,O=v.loading,j=function(e,t){if(t)return{numeric:0,title:"Success rate",text:"loading..."};if(!e||e.length<1)return{numeric:0,text:"N/A",title:"Success rate"};var n=100*parseFloat(e[0].value[1]);return{title:"Success rate",color:n<99?"red":"green",numeric:n,text:n.toFixed(2)+"%"}}(p,m),S=function(e,t,n){var r,i,a;if(!(!n||t||e.length<1))return{yMin:0,yMax:150,data:null!==(a=null===(i=null===(r=e[0])||void 0===r?void 0:r.values)||void 0===i?void 0:i.map((function(e,t){return[t,parseFloat(e[1])]})))&&void 0!==a?a:[]}}(E,O,a);return y.a.createElement(I.Container,null,y.a.createElement(I.BigValue,{theme:h.config.theme,colorMode:I.BigValueColorMode.Value,height:r,width:i,graphMode:I.BigValueGraphMode.Area,value:j,sparkline:S,onClick:o}))},Kr=function(e){var t=e.instance,n=e.onAddNewClick,r=e.checks,i=Object(b.f)(Object(g.useState)(""),2),a=i[0],o=i[1],s=Object(b.f)(Object(g.useState)("all"),2),c=s[0],l=s[1],d=Object(b.f)(Object(g.useState)(1),2),f=d[0],p=d[1];if(!r)return null;if(0===r.length)return y.a.createElement(I.InfoBox,{title:"Grafana Cloud Synthetic Monitoring",url:"https://grafana.com/docs/grafana-cloud/synthetic-monitoring/"},y.a.createElement("p",null,"This account does not currently have any checks configured. Click the button below to start monitoring your services with Grafana Cloud."),T(u.EDITOR)&&y.a.createElement(I.Button,{variant:"primary",onClick:n,type:"button"},"New Check"));var m=r.filter((function(e){return function(e,t){return"all"===t||x(e.settings)===t}(e,c)&&function(e,t){var n=e.target,r=e.job,i=e.labels;if(!t)return!0;var a=t.toLowerCase().trim().split("="),o=i.reduce((function(e,t){var n=t.name,r=t.value;return e.push(n),e.push(r),e}),[]);return a.some((function(e){return t=e,i=Object(b.h)([n,r],o),a=t.toLowerCase(),i.some((function(e){return e.toLowerCase().match(a)}));var t,i,a}))}(e,a)})).sort((function(e,t){return t.job.localeCompare(e.job)})),E=Math.ceil(r.length/15);return y.a.createElement("div",null,y.a.createElement("div",{className:"page-action-bar"},y.a.createElement("div",{className:"gf-form gf-form--grow"},y.a.createElement(I.Input,{autoFocus:!0,prefix:y.a.createElement(I.Icon,{name:"search"}),width:40,type:"text",value:a?Object(v.unEscapeStringFromRegex)(a):"",onChange:function(e){return o(Object(v.escapeStringForRegex)(e.currentTarget.value))},placeholder:"search checks"})),y.a.createElement("div",{className:"gf-form"},y.a.createElement("label",{className:"gf-form-label"},"Types"),y.a.createElement("div",{className:"width-13"},y.a.createElement(I.Select,{"aria-label":"Types",options:Q,onChange:function(e){var t;return l(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:c)},value:c}))),y.a.createElement("div",{className:"page-action-bar__spacer"}),T(u.EDITOR)&&y.a.createElement(I.Button,{variant:"secondary",onClick:n,type:"button"},"New Check")),y.a.createElement("section",{className:"card-section card-list-layout-list"},y.a.createElement("ol",{className:"card-list"},m.map((function(e,n){if(!e.id)return null;var r=x(e.settings);return y.a.createElement("li",{className:"card-item-wrapper",key:n,"aria-label":"check-card"},y.a.createElement("a",{className:"card-item",onClick:function(){return Object(h.getLocationSrv)().update({partial:!0,query:{id:e.id}})}},y.a.createElement(I.HorizontalGroup,{justify:"space-between"},y.a.createElement("div",{className:"card-item-body"},y.a.createElement("figure",{className:"card-item-figure"},y.a.createElement(Zr,{check:e})),y.a.createElement(I.VerticalGroup,null,y.a.createElement("div",{className:"card-item-name"},e.target),y.a.createElement("div",{className:"card-item-sub-name"},e.job))),y.a.createElement(I.HorizontalGroup,{justify:"flex-end"},y.a.createElement("div",{className:"card-item-header"},y.a.createElement("div",{className:"card-item-type"},r),e.labels.map((function(e,t){return y.a.createElement(I.Button,{variant:"secondary",key:t,className:Object(R.css)(Lr||(Lr=Object(b.e)(["\n                              border: none;\n                              background: inherit;\n                            "],["\n                              border: none;\n                              background: inherit;\n                            "]))),onClick:function(t){t.stopPropagation(),o(e.name+"="+e.value),p(1)},type:"button"},e.name,"=",e.value)}))),y.a.createElement(I.Container,{margin:"lg"},y.a.createElement(I.IconButton,{name:"apps",size:"xl",onClick:function(n){!function(e,n){var r=w(n,t.api);r?Object(h.getLocationSrv)().update({partial:!1,path:"d/"+r.uid,query:{"var-instance":e.target,"var-job":e.job}}):console.log("dashboard not found.",n)}(e,r),n.stopPropagation()}})),y.a.createElement(Xr,{labelNames:["instance","job"],labelValues:[e.target,e.job],height:70,width:150,sparkline:!1})))))})))),E>1&&y.a.createElement(I.Pagination,{numberOfPages:E,currentPage:f,onNavigate:function(e){return p(e)}}))},Jr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={checks:[],addNew:!1,loading:!0},t.onAddNew=function(){t.setState({addNew:!0})},t.onRefresh=function(){return Object(b.b)(t,void 0,void 0,(function(){var e;return Object(b.d)(this,(function(t){switch(t.label){case 0:return[4,this.props.instance.api.listChecks()];case 1:return e=t.sent(),this.setState({checks:e}),[2]}}))}))},t.onGoBack=function(e){t.setState({addNew:!1}),e&&t.onRefresh(),Object(h.getLocationSrv)().update({partial:!0,query:{id:""}})},t}return Object(b.c)(t,e),t.prototype.componentDidMount=function(){return Object(b.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a;return Object(b.d)(this,(function(o){switch(o.label){case 0:return e=this.props,t=e.instance,n=e.id,[4,t.api.listChecks()];case 1:return r=o.sent(),i=n?parseInt(n,10):-1,a=r.find((function(e){return e.id===i})),this.setState({checks:r,check:a,loading:!1}),[2]}}))}))},t.prototype.componentDidUpdate=function(e){if(this.props.id!==e.id){var t=this.props.id,n=t?parseInt(t,10):-1,r=this.state.checks.find((function(e){return e.id===n}));this.setState({check:r})}},t.prototype.render=function(){var e=this.props.instance,t=this.state,n=t.check,r=t.addNew,i=t.loading,a=t.checks;return i?y.a.createElement("div",null,"Loading..."):n?y.a.createElement(Dr,{check:n,instance:e.api,onReturn:this.onGoBack}):r?y.a.createElement(Dr,{instance:e.api,onReturn:this.onGoBack}):y.a.createElement(Kr,{instance:e,onAddNewClick:this.onAddNew,checks:a})},t}(g.PureComponent),Yr=Object(I.stylesFactory)((function(e){return{legend:Object(R.css)(Fr||(Fr=Object(b.e)(["\n    margin: "," "," 0 0;\n    width: auto;\n  "],["\n    margin: "," "," 0 0;\n    width: auto;\n  "])),e.spacing.sm,e.spacing.sm),container:Object(R.css)(Hr||(Hr=Object(b.e)(["\n    padding-left: ",";\n    margin-bottom: ",";\n  "],["\n    padding-left: ",";\n    margin-bottom: ",";\n  "])),e.spacing.sm,e.spacing.md),badgeContainer:Object(R.css)(qr||(qr=Object(b.e)(["\n    margin-bottom: ",";\n    display: flex;\n    align-items: center;\n  "],["\n    margin-bottom: ",";\n    display: flex;\n    align-items: center;\n  "])),e.spacing.sm)}})),Qr=function(e){var t=e.probe,n=e.onResetToken,r=Object(b.f)(Object(g.useState)(!1),2),i=r[0],a=r[1],o=Object(I.useTheme)();if(!t)return null;var s=!t.public&&T(u.EDITOR),c=t.online?{text:"Online",color:"green",icon:"heart"}:{text:"Offline",color:"red",icon:"heart-break"},l=Yr(o);return y.a.createElement(I.Container,{margin:"md"},y.a.createElement("div",{className:l.container},y.a.createElement("div",{className:l.badgeContainer},y.a.createElement(I.Legend,{className:l.legend},"Status:"),y.a.createElement(I.Badge,{color:c.color,icon:c.icon,text:c.text})),!t.public&&y.a.createElement(I.Container,null,y.a.createElement(I.Button,{variant:"destructive",onClick:function(){return a(!0)},disabled:!s},"Reset Access Token"),y.a.createElement(I.ConfirmModal,{isOpen:i,title:"Reset Probe Access Token",body:"Are you sure you want to reset the access token for this Probe?",confirmText:"Reset Token",onConfirm:function(){n(),a(!1)},onDismiss:function(){return a(!1)}}))),y.a.createElement(Xr,{labelNames:["probe"],labelValues:[t.name],height:200,width:300,sparkline:!0}))},ei=Object(R.css)(Gr||(Gr=Object(b.e)(["\n  min-width: 200px;\n"],["\n  min-width: 200px;\n"]))),ti=function(e){var t=e.probe,n=e.onReturn,r=Object(b.f)(Object(g.useState)(!1),2),i=r[0],a=r[1],o=Object(b.f)(Object(g.useState)(!1),2),s=o[0],c=o[1],l=Object(b.f)(Object(g.useState)(""),2),d=l[0],f=l[1],p=Object(g.useContext)(oe).instance,h=gn({defaultValues:t,mode:"onChange"}),m=Object(se.useAsyncCallback)((function(e){return Object(b.b)(void 0,void 0,void 0,(function(){var r;return Object(b.d)(this,(function(i){switch(i.label){case 0:return e.latitude=Number(e.latitude),e.longitude=Number(e.longitude),t.id?[4,null==p?void 0:p.api.updateProbe(Object(b.a)(Object(b.a)({},t),e))]:[3,2];case 1:return i.sent(),n(!0),[3,4];case 2:return[4,null==p?void 0:p.api.addProbe(Object(b.a)(Object(b.a)({},t),e))];case 3:r=i.sent(),c(!0),f(r.token),i.label=4;case 4:return[2]}}))}))})),v=m.execute,E=m.error;if(!t||!p)return y.a.createElement("div",null,"Loading...");var O=t.id?"Configuration":"Add Probe",j=!t.public&&T(u.EDITOR);return y.a.createElement(I.HorizontalGroup,{align:"flex-start"},y.a.createElement(jn,Object(b.a)({},h),y.a.createElement("form",{onSubmit:h.handleSubmit(v)},y.a.createElement("div",null,y.a.createElement(I.Legend,null,O),y.a.createElement(I.Container,{margin:"md"},y.a.createElement(I.Field,{error:"Name is required",invalid:Boolean(h.errors.name),label:"Probe Name",description:"Unique name of probe",disabled:!j,className:ei,required:!0},y.a.createElement(I.Input,{type:"text",maxLength:32,ref:h.register({required:!0,maxLength:32}),id:"probe-name-input",placeholder:"Probe name",name:"name"})),y.a.createElement(I.Field,{label:"Public",description:"Public probes are run by Grafana Labs and can be used by all users"},y.a.createElement(I.Container,{padding:"sm"},y.a.createElement(I.Switch,{ref:h.register,name:"public",disabled:!j})))),y.a.createElement(I.Container,{margin:"md"},y.a.createElement(I.Legend,null,"Location information"),y.a.createElement(I.Field,{error:"Must be between -90 and 90",invalid:Boolean(h.errors.latitude),required:!0,label:"Latitude",description:"Latitude coordinates of this probe",disabled:!j,className:ei},y.a.createElement(I.Input,{ref:h.register({required:!0,max:90,min:-90}),label:"Latitude",max:90,min:-90,id:"probe-editor-latitude",type:"number",placeholder:"0.0",name:"latitude"})),y.a.createElement(I.Field,{error:"Must be between -180 and 180",invalid:Boolean(h.errors.longitude),required:!0,label:"Longitude",description:"Longitude coordinates of this probe",disabled:!j},y.a.createElement(I.Input,{ref:h.register({required:!0,max:180,min:-180}),label:"Longitude",name:"longitude",max:180,min:-180,id:"probe-editor-longitude",type:"number",placeholder:"0.0"}))),y.a.createElement(I.Container,{margin:"md"},y.a.createElement(I.Field,{error:"Region is required",invalid:Boolean(h.errors.region),required:!0,label:"Region",description:"Region of this probe",disabled:!j,className:ei},y.a.createElement(I.Input,{ref:h.register({required:!0}),name:"region",label:"Region",type:"string",placeholder:"Region"}))),y.a.createElement(I.Container,{margin:"md"},y.a.createElement(I.Field,{label:"Labels",invalid:Boolean(h.errors.labels),error:"Name and value are required"},y.a.createElement(yr,{isEditor:j,limit:3}))),y.a.createElement(I.Container,{margin:"md"},y.a.createElement(I.HorizontalGroup,null,y.a.createElement(I.Button,{type:"submit",disabled:!j||!h.formState.isValid||!h.formState.touched||h.formState.isSubmitting},"Save"),t.id&&y.a.createElement(I.Button,{type:"button",variant:"destructive",onClick:function(){return a(!0)},disabled:!j},"Delete Probe"),y.a.createElement(I.ConfirmModal,{isOpen:i,title:"Delete Probe",body:"Are you sure you want to delete this Probe?",confirmText:"Delete Probe",onConfirm:function(){return Object(b.b)(void 0,void 0,void 0,(function(){return Object(b.d)(this,(function(e){switch(e.label){case 0:return t.id?[4,p.api.deleteProbe(t.id)]:[2];case 1:return e.sent(),n(!0),[2]}}))}))},onDismiss:function(){return a(!1)}}),y.a.createElement(I.Button,{variant:"secondary",onClick:function(){return n(!1)},type:"button"},"Back"))),E&&y.a.createElement("div",{className:Object(R.css)(Ur||(Ur=Object(b.e)(["\n                  margin-top: 1rem;\n                "],["\n                  margin-top: 1rem;\n                "])))},y.a.createElement(I.Alert,{title:"Save failed",severity:"error"},E.status+": "+E.message)),y.a.createElement(I.Modal,{isOpen:s,title:"Probe Authentication Token",icon:"lock",onDismiss:function(){return t.id?c(!1):n(!1)}},d)))),t.id&&y.a.createElement(Qr,{probe:t,onResetToken:function(){return Object(b.b)(void 0,void 0,void 0,(function(){var e;return Object(b.d)(this,(function(n){switch(n.label){case 0:return[4,p.api.resetProbeToken(t)];case 1:return e=n.sent(),c(!0),f(e.token),[2]}}))}))}}))},ni=function(e){var t=e.probes,n=e.onAddNew,r=e.onSelectProbe,i=Object(g.useContext)(oe),a=i.instance;return i.loading||!a?y.a.createElement("div",null,"Loading..."):t?y.a.createElement("div",null,T(u.EDITOR)&&y.a.createElement(I.HorizontalGroup,{justify:"flex-end"},y.a.createElement(I.Button,{type:"button",onClick:n,className:Object(R.css)($r||($r=Object(b.e)(["\n              margin-bottom: 1rem;\n            "],["\n              margin-bottom: 1rem;\n            "])))},"New")),t.sort((function(e,t){return e.name.localeCompare(t.name)})).filter((function(e){return Boolean(e.id)})).map((function(e){var t=e.online?"Online":"Offline",n=e.online?"heart":"heart-break",i=e.online?"green":"red";return y.a.createElement("div",{key:e.id,className:"add-data-source-item",onClick:function(){return r(e.id)}},y.a.createElement("div",{className:"add-data-source-item-text-wrapper"},y.a.createElement("span",{className:"add-data-source-item-text"},e.name),y.a.createElement("span",{className:"add-data-source-item-desc"},y.a.createElement(I.Badge,{color:i,icon:n,text:t}),y.a.createElement("div",null,e.labels.map((function(e){return e.name+"="+e.value}))))),y.a.createElement(Xr,{labelNames:["probe"],labelValues:[e.name],height:60,width:150,sparkline:!1}),y.a.createElement("div",{className:"add-data-source-item-actions"},y.a.createElement(I.Button,null,"Select")))})),y.a.createElement("br",null)):null},ri=function(e){var t=e.id,n=Object(b.f)(Object(g.useState)(!1),2),r=n[0],i=n[1],a=Object(b.f)(Object(g.useState)(!0),2),o=a[0],s=a[1],c=Object(b.f)(Object(g.useState)([]),2),l=c[0],u=c[1],d=Object(b.f)(Object(g.useState)(),2),f=d[0],p=d[1],m=Object(g.useContext)(oe),v=m.instance,E=m.loading;Object(g.useEffect)((function(){Object(b.b)(void 0,void 0,void 0,(function(){var e,n;return Object(b.d)(this,(function(r){switch(r.label){case 0:return[4,null==v?void 0:v.api.listProbes()];case 1:return(e=r.sent())&&(u(e),s(!1)),t&&(n=null==e?void 0:e.find((function(e){return e.id===parseInt(t,10)})),p(n)),[2]}}))}))}),[E,null==v?void 0:v.api,t]);var O=function(){p(void 0),i(!1),Object(h.getLocationSrv)().update({partial:!0,query:{id:""}})};if(o||E)return y.a.createElement("div",null,"Loading...");if(f)return y.a.createElement(ti,{probe:f,onReturn:O});if(r){return y.a.createElement(ti,{probe:{name:"",public:!1,latitude:0,longitude:0,region:"",labels:[],online:!1,onlineChange:0},onReturn:O})}return y.a.createElement(ni,{probes:l,onAddNew:function(){return i(!0)},onSelectProbe:function(e){Object(h.getLocationSrv)().update({partial:!0,query:{id:e}})}})},ii=function(e){function t(t){var n=e.call(this,t)||this;return n.state={settings:Object.values(h.config.datasources).filter((function(e){return"synthetic-monitoring-datasource"===e.type})),loadingInstance:!0},n}return Object(b.c)(t,e),t.prototype.loadInstances=function(){var e,t;return Object(b.b)(this,void 0,void 0,(function(){var n,r,i,a,o;return Object(b.d)(this,(function(s){switch(s.label){case 0:return(n=this.state.settings[0])&&n.name?[4,Object(h.getDataSourceSrv)().get(n.name)]:[3,4];case 1:return(r=s.sent())?(i=r.instanceSettings.jsonData,o={api:r},[4,ai(null===(e=null==i?void 0:i.metrics)||void 0===e?void 0:e.grafanaName)]):[3,4];case 2:return o.metrics=s.sent(),[4,ai(null===(t=null==i?void 0:i.logs)||void 0===t?void 0:t.grafanaName)];case 3:return o.logs=s.sent(),a=o,this.setState({instance:a,loadingInstance:!1,valid:oi(a)}),this.updateNav(),[2];case 4:return console.log("Creating a new datasource TODO, check user auth"),[4,j()];case 5:s.sent(),console.log("Reload the windows (will redirect)"),window.location.reload(),s.label=6;case 6:return[2]}}))}))},t.prototype.componentDidMount=function(){return Object(b.b)(this,void 0,void 0,(function(){return Object(b.d)(this,(function(e){return this.updateNav(),this.loadInstances(),[2]}))}))},t.prototype.componentDidUpdate=function(e){this.props.query!==e.query&&this.props.query.page!==e.query.page&&this.updateNav()},t.prototype.updateNav=function(){var e,t,n=this.props,r=n.path,i=n.onNavChanged,a=n.query,o=n.meta,s=a.page||"checks",c=[];this.state.valid&&"config"!==s&&"redirect"!==s?(c.push({text:"Checks",url:r+"?page=checks",id:"checks"}),c.push({text:"Probes",url:r+"?page=probes",id:"probes"})):this.state.valid&&"redirect"===s?(c.push({text:"Dashboard Redirect",url:r+"?page=redirect",id:"redirect"}),c.push({text:"Config",url:r,id:"config"})):c.push({text:"Config",url:r,id:"config"});var l=!1;try{for(var u=Object(b.i)(c),d=u.next();!d.done;d=u.next()){var f=d.value;f.active=!l&&s===f.id,f.active&&(l=!0)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}l||(c[0].active=!0);var p={text:"Synthetic Monitoring",img:o.info.logos.large,subTitle:"Grafana Cloud Synthetic Monitoring",url:r,children:c};i({node:p,main:p})},t.prototype.renderMultipleConfigs=function(){return y.a.createElement("div",null,"TODO... multiple instances... delete one!!!!")},t.prototype.dashboardRedirect=function(){var e=this.state.instance,t=this.props.query;if(!e)return y.a.createElement("div",null,"Loading.... (or maybe a user permissions error?)");if(!t.dashboard)return y.a.createElement("div",null,"Dashboard not found");var n=w(t.dashboard,e.api);if(!n)return console.log("dashboard not found.",t),y.a.createElement("div",null,"Dashboard not found");var r="d/"+n.uid,i=Object(b.a)({},t);return delete i.dashboard,delete i.page,Object(h.getLocationSrv)().update({partial:!1,path:r,query:i}),null},t.prototype.renderConfig=function(){var e=this.state.instance;return e?y.a.createElement(ae,{instance:e.api}):y.a.createElement("div",null,"Loading.... (or maybe a user permissions error?)")},t.prototype.renderPage=function(){var e=this.state,t=e.settings,n=e.valid,r=e.instance;if(t.length>1)return this.renderMultipleConfigs();var i=this.props.query;return n&&"config"!==i.page?"dashboard"in i?this.dashboardRedirect():"checks"===i.page?y.a.createElement(Jr,{instance:r,id:i.id}):"probes"===i.page?y.a.createElement(ri,{id:i.id}):y.a.createElement("div",null,"Page not found."):this.renderConfig()},t.prototype.render=function(){var e=this.state,t=e.instance,n=e.loadingInstance;return y.a.createElement(oe.Provider,{value:{instance:t,loading:n}},this.renderPage())},t}(g.PureComponent);function ai(e){return Object(b.b)(this,void 0,void 0,(function(){return Object(b.d)(this,(function(t){switch(t.label){case 0:if(!e)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(h.getDataSourceSrv)().get()];case 2:return[2,t.sent()];case 3:return t.sent(),[3,4];case 4:return[2,void 0]}}))}))}function oi(e){return!!(e&&e.logs&&e.metrics&&e.api)}n.d(t,"plugin",(function(){return si})),n.d(t,"ConfigCtrl",(function(){return m}));var si=(new v.AppPlugin).setRootPage(ii)}])}));
//# sourceMappingURL=module.js.map