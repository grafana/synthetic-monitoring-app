/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","@grafana/runtime","@grafana/data","emotion"],(function(e,t,n,r,a){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=29)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return p}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function i(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}function p(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),a=n(0),o=n.n(a),i=n(3),s=n(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.c)(t,e),t.prototype.render=function(){var e=this.props.settings;return e?o.a.createElement("div",null,o.a.createElement("h2",null,"Linked Data Sources"),o.a.createElement(s.Container,{margin:"sm"},o.a.createElement(c,{info:e.metrics}),o.a.createElement(c,{info:e.logs}))):o.a.createElement("div",null,"Loading...")},t}(a.PureComponent),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onClick=function(){var e=t.state.ds;"synthetic-monitoring-datasource"===(null==e?void 0:e.type)?Object(i.getLocationSrv)().update({partial:!1,path:"a/grafana-synthetic-monitoring-app/"}):Object(i.getLocationSrv)().update({partial:!1,path:"datasources/edit/"+(null==e?void 0:e.id)+"/"})},t}return Object(r.c)(t,e),t.prototype.componentDidMount=function(){var e=this.props.info;this.setState({ds:i.config.datasources[e.grafanaName]})},t.prototype.render=function(){var e=this.state.ds;return e?o.a.createElement("div",{className:"add-data-source-item",onClick:this.onClick},o.a.createElement("img",{className:"add-data-source-item-logo",src:e.meta.info.logos.small}),o.a.createElement("div",{className:"add-data-source-item-text-wrapper"},o.a.createElement("span",{className:"add-data-source-item-text"},e.name),o.a.createElement("span",{className:"add-data-source-item-desc"},e.type)),o.a.createElement("div",{className:"add-data-source-item-actions"},o.a.createElement(s.Button,null,"Edit"))):o.a.createElement("div",null,"Loading...")},t}(a.PureComponent)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return s(c(e),arguments)}function i(e,t){return o.apply(null,[e].concat(t||[]))}function s(e,t){var n,r,i,s,l,c,u,p,d,h=1,f=e.length,v="";for(r=0;r<f;r++)if("string"==typeof e[r])v+=e[r];else if("object"==typeof e[r]){if((s=e[r]).keys)for(n=t[h],i=0;i<s.keys.length;i++){if(null==n)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));n=n[s.keys[i]]}else n=s.param_no?t[s.param_no]:t[h++];if(a.not_type.test(s.type)&&a.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),a.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(a.number.test(s.type)&&(p=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}a.json.test(s.type)?v+=n:(!a.number.test(s.type)||p&&!s.sign?d="":(d=p?"+":"-",n=n.toString().replace(a.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(d+n).length,l=s.width&&u>0?c.repeat(u):"",v+=s.align?d+n+l:"0"===c?d+l+n:l+d+n)}return v}var l=Object.create(null);function c(e){if(l[e])return l[e];for(var t,n=e,r=[],o=0;n;){if(null!==(t=a.text.exec(n)))r.push(t[0]);else if(null!==(t=a.modulo.exec(n)))r.push("%");else{if(null===(t=a.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],s=t[2],c=[];if(null===(c=a.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(c[1]);""!==(s=s.substring(c[0].length));)if(null!==(c=a.key_access.exec(s)))i.push(c[1]);else{if(null===(c=a.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(c[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=r}t.sprintf=o,t.vsprintf=i,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=i,void 0===(r=function(){return{sprintf:o,vsprintf:i}}.call(t,n,t,e))||(e.exports=r))}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(2),a=n(0),o=n.n(a),i=n(1),s=n(6),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAccessTokenChange=function(e){var n=t.props,a=n.onOptionsChange,o=n.options;a(Object(r.a)(Object(r.a)({},o),{secureJsonData:{accessToken:e.target.value}}))},t.onResetAccessToken=function(){var e=t.props,n=e.onOptionsChange,a=e.options;n(Object(r.a)(Object(r.a)({},a),{secureJsonFields:Object(r.a)(Object(r.a)({},a.secureJsonFields),{accessToken:!1}),secureJsonData:Object(r.a)(Object(r.a)({},a.secureJsonData),{accessToken:""})}))},t}return Object(r.c)(t,e),t.prototype.render=function(){var e=this.props.options,t=e.secureJsonFields,n=e.secureJsonData||{};function r(){return t&&t.accessToken}return o.a.createElement("div",null,c(e.jsonData)&&r()&&o.a.createElement(s.a,{settings:e.jsonData}),o.a.createElement("br",null),o.a.createElement("div",{className:"gf-form-group"},o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form"},o.a.createElement(i.LegacyForms.SecretFormField,{isConfigured:r(),value:n.accessToken||"",label:"Access Token",placeholder:"access token saved on the server",labelWidth:10,inputWidth:20,onReset:this.onResetAccessToken,onChange:this.onAccessTokenChange})))))},t}(a.PureComponent);function c(e){if(!e)return!1;var t=e.apiHost,n=e.metrics,r=e.logs;return!!(t&&n&&n.grafanaName&&n.hostedId)&&!!(r&&r.grafanaName&&r.hostedId)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){t.BITS=32,t.GROUPS=4,t.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,t.RE_SUBNET_STRING=/\/\d{1,2}$/},function(e,t){t.BITS=128,t.GROUPS=8,t.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},t.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},t.RE_BAD_CHARACTERS=/([^0-9a-f:\/%])/gi,t.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,t.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,t.RE_ZONE_STRING=/%.*$/,t.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),t.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)},function(e,t,n){"use strict";t.Address4=n(14),t.Address6=n(22),t.v6={helpers:n(19)}},function(e,t,n){"use strict";var r=n(15).BigInteger,a=n(16),o=n(8).sprintf,i=n(17),s=n(18),l=n(11);function c(e){this.valid=!1,this.address=e,this.groups=l.GROUPS,this.v4=!0,this.subnet="/32",this.subnetMask=32;var t=l.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>l.BITS)return this.valid=!1,void(this.error="Invalid subnet mask.");e=e.replace(l.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}c.prototype.parse=function(e){var t=e.split(".");return e.match(l.RE_ADDRESS)?this.valid=!0:this.error="Invalid IPv4 address.",t},c.prototype.isValid=function(){return this.valid},c.prototype.correctForm=function(){return this.parsedAddress.map((function(e){return parseInt(e,10)})).join(".")},c.prototype.isCorrect=a.isCorrect(l.BITS),c.fromHex=function(e){var t,n=i(e.replace(/:/g,""),8,"0"),r=[];for(t=0;t<8;t+=2){var a=n.slice(t,t+2);r.push(parseInt(a,16))}return new c(r.join("."))},c.fromInteger=function(e){return c.fromHex(e.toString(16))},c.prototype.toHex=function(){return this.parsedAddress.map((function(e){return o("%02x",parseInt(e,10))})).join(":")},c.prototype.toArray=function(){return this.parsedAddress.map((function(e){return parseInt(e,10)}))},c.prototype.toGroup6=function(){var e,t=[];for(e=0;e<l.GROUPS;e+=2){var n=o("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push(o("%x",parseInt(n,16)))}return t.join(":")},c.prototype.bigInteger=function(){return this.valid?new r(this.parsedAddress.map((function(e){return o("%02x",parseInt(e,10))})).join(""),16):null},c.prototype._startAddress=function(){return new r(this.mask()+s("0",l.BITS-this.subnetMask),2)},c.prototype.startAddress=function(){return c.fromBigInteger(this._startAddress())},c.prototype.startAddressExclusive=function(){var e=new r("1");return c.fromBigInteger(this._startAddress().add(e))},c.prototype._endAddress=function(){return new r(this.mask()+s("1",l.BITS-this.subnetMask),2)},c.prototype.endAddress=function(){return c.fromBigInteger(this._endAddress())},c.prototype.endAddressExclusive=function(){var e=new r("1");return c.fromBigInteger(this._endAddress().subtract(e))},c.fromBigInteger=function(e){return c.fromInteger(parseInt(e.toString(),10))},c.prototype.mask=function(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)},c.prototype.getBitsBase2=function(e,t){return this.binaryZeroPad().slice(e,t)},c.prototype.isInSubnet=a.isInSubnet,c.prototype.isMulticast=function(){return this.isInSubnet(new c("224.0.0.0/4"))},c.prototype.binaryZeroPad=function(){return i(this.bigInteger().toString(2),l.BITS,"0")},e.exports=c},function(e,t,n){(function(){var t;function n(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new n(null)}var a="undefined"!=typeof navigator;a&&"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=function(e,t,n,r,a,o){for(var i=32767&t,s=t>>15;--o>=0;){var l=32767&this[e],c=this[e++]>>15,u=s*l+c*i;a=((l=i*l+((32767&u)<<15)+n[r]+(1073741823&a))>>>30)+(u>>>15)+s*c+(a>>>30),n[r++]=1073741823&l}return a},t=30):a&&"Netscape"!=navigator.appName?(n.prototype.am=function(e,t,n,r,a,o){for(;--o>=0;){var i=t*this[e++]+n[r]+a;a=Math.floor(i/67108864),n[r++]=67108863&i}return a},t=26):(n.prototype.am=function(e,t,n,r,a,o){for(var i=16383&t,s=t>>14;--o>=0;){var l=16383&this[e],c=this[e++]>>14,u=s*l+c*i;a=((l=i*l+((16383&u)<<14)+n[r]+a)>>28)+(u>>14)+s*c,n[r++]=268435455&l}return a},t=28),n.prototype.DB=t,n.prototype.DM=(1<<t)-1,n.prototype.DV=1<<t;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-t,n.prototype.F2=2*t-52;var o,i,s=new Array;for(o="0".charCodeAt(0),i=0;i<=9;++i)s[o++]=i;for(o="a".charCodeAt(0),i=10;i<36;++i)s[o++]=i;for(o="A".charCodeAt(0),i=10;i<36;++i)s[o++]=i;function l(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function c(e,t){var n=s[e.charCodeAt(t)];return null==n?-1:n}function u(e){var t=r();return t.fromInt(e),t}function p(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function d(e){this.m=e}function h(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function f(e,t){return e&t}function v(e,t){return e|t}function m(e,t){return e^t}function b(e,t){return e&~t}function g(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function y(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function E(){}function S(e){return e}function T(e){this.r2=r(),this.q3=r(),n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}d.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},d.prototype.revert=function(e){return e},d.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},d.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},h.prototype.convert=function(e){var t=r();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},h.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},h.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},h.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},n.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},n.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},n.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var a=e.length,o=!1,i=0;--a>=0;){var s=8==r?255&e[a]:c(e,a);s<0?"-"==e.charAt(a)&&(o=!0):(o=!1,0==i?this[this.t++]=s:i+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=r)>=this.DB&&(i-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),o&&n.ZERO.subTo(this,this)},n.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},n.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},n.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},n.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,a=this.DB-r,o=(1<<a)-1,i=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+i+1]=this[n]>>a|s,s=(this[n]&o)<<r;for(n=i-1;n>=0;--n)t[n]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},n.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,a=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var i=n+1;i<this.t;++i)t[i-n-1]|=(this[i]&o)<<a,t[i-n]=this[i]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<a),t.t=this.t-n,t.clamp()}},n.prototype.subTo=function(e,t){for(var n=0,r=0,a=Math.min(e.t,this.t);n<a;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},n.prototype.multiplyTo=function(e,t){var r=this.abs(),a=e.abs(),o=r.t;for(t.t=o+a.t;--o>=0;)t[o]=0;for(o=0;o<a.t;++o)t[o+r.t]=r.am(0,a[o],t,o,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)},n.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},n.prototype.divRemTo=function(e,t,a){var o=e.abs();if(!(o.t<=0)){var i=this.abs();if(i.t<o.t)return null!=t&&t.fromInt(0),void(null!=a&&this.copyTo(a));null==a&&(a=r());var s=r(),l=this.s,c=e.s,u=this.DB-p(o[o.t-1]);u>0?(o.lShiftTo(u,s),i.lShiftTo(u,a)):(o.copyTo(s),i.copyTo(a));var d=s.t,h=s[d-1];if(0!=h){var f=h*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),v=this.FV/f,m=(1<<this.F1)/f,b=1<<this.F2,g=a.t,y=g-d,E=null==t?r():t;for(s.dlShiftTo(y,E),a.compareTo(E)>=0&&(a[a.t++]=1,a.subTo(E,a)),n.ONE.dlShiftTo(d,E),E.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--y>=0;){var S=a[--g]==h?this.DM:Math.floor(a[g]*v+(a[g-1]+b)*m);if((a[g]+=s.am(0,S,a,y,0,d))<S)for(s.dlShiftTo(y,E),a.subTo(E,a);a[g]<--S;)a.subTo(E,a)}null!=t&&(a.drShiftTo(d,t),l!=c&&n.ZERO.subTo(t,t)),a.t=d,a.clamp(),u>0&&a.rShiftTo(u,a),l<0&&n.ZERO.subTo(a,a)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},n.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(e,t){if(e>4294967295||e<1)return n.ONE;var a=r(),o=r(),i=t.convert(this),s=p(e)-1;for(i.copyTo(a);--s>=0;)if(t.sqrTo(a,o),(e&1<<s)>0)t.mulTo(o,i,a);else{var l=a;a=o,o=l}return t.revert(a)},n.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,a=!1,o="",i=this.t,s=this.DB-i*this.DB%t;if(i-- >0)for(s<this.DB&&(n=this[i]>>s)>0&&(a=!0,o=l(n));i>=0;)s<t?(n=(this[i]&(1<<s)-1)<<t-s,n|=this[--i]>>(s+=this.DB-t)):(n=this[i]>>(s-=t)&r,s<=0&&(s+=this.DB,--i)),n>0&&(a=!0),a&&(o+=l(n));return a?o:"0"},n.prototype.negate=function(){var e=r();return n.ZERO.subTo(this,e),e},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(e){var t=r();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t},n.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new d(t):new h(t),this.exp(e,n)},n.ZERO=u(0),n.ONE=u(1),E.prototype.convert=S,E.prototype.revert=S,E.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},E.prototype.sqrTo=function(e,t){e.squareTo(t)},T.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t},T.prototype.revert=function(e){return e},T.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},T.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},T.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var C,w,j,O=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/O[O.length-1];function k(){var e;e=(new Date).getTime(),w[j++]^=255&e,w[j++]^=e>>8&255,w[j++]^=e>>16&255,w[j++]^=e>>24&255,j>=N&&(j-=N)}if(n.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},n.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),a=u(n),o=r(),i=r(),s="";for(this.divRemTo(a,o,i);o.signum()>0;)s=(n+i.intValue()).toString(e).substr(1)+s,o.divRemTo(a,o,i);return i.intValue().toString(e)+s},n.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),a=Math.pow(t,r),o=!1,i=0,s=0,l=0;l<e.length;++l){var u=c(e,l);u<0?"-"==e.charAt(l)&&0==this.signum()&&(o=!0):(s=t*s+u,++i>=r&&(this.dMultiply(a),this.dAddOffset(s,0),i=0,s=0))}i>0&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),o&&n.ZERO.subTo(this,this)},n.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(n.ONE.shiftLeft(e-1),v,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(n.ONE.shiftLeft(e-1),this);else{var a=new Array,o=7&e;a.length=1+(e>>3),t.nextBytes(a),o>0?a[0]&=(1<<o)-1:a[0]=0,this.fromString(a,256)}},n.prototype.bitwiseTo=function(e,t,n){var r,a,o=Math.min(e.t,this.t);for(r=0;r<o;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(a=e.s&this.DM,r=o;r<this.t;++r)n[r]=t(this[r],a);n.t=this.t}else{for(a=this.s&this.DM,r=o;r<e.t;++r)n[r]=t(a,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},n.prototype.changeBit=function(e,t){var r=n.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},n.prototype.addTo=function(e,t){for(var n=0,r=0,a=Math.min(e.t,this.t);n<a;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},n.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},n.prototype.multiplyLowerTo=function(e,t,n){var r,a=Math.min(this.t+e.t,t);for(n.s=0,n.t=a;a>0;)n[--a]=0;for(r=n.t-this.t;a<r;++a)n[a+this.t]=this.am(0,e[a],n,a,0,this.t);for(r=Math.min(e.t,t);a<r;++a)this.am(0,e[a],n,a,0,t-a);n.clamp()},n.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},n.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},n.prototype.millerRabin=function(e){var t=this.subtract(n.ONE),a=t.getLowestSetBit();if(a<=0)return!1;var o=t.shiftRight(a);(e=e+1>>1)>O.length&&(e=O.length);for(var i=r(),s=0;s<e;++s){i.fromInt(O[Math.floor(Math.random()*O.length)]);var l=i.modPow(o,this);if(0!=l.compareTo(n.ONE)&&0!=l.compareTo(t)){for(var c=1;c++<a&&0!=l.compareTo(t);)if(0==(l=l.modPowInt(2,this)).compareTo(n.ONE))return!1;if(0!=l.compareTo(t))return!1}}return!0},n.prototype.clone=function(){var e=r();return this.copyTo(e),e},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},n.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,a=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[a++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==a&&(128&this.s)!=(128&n)&&++a,(a>0||n!=this.s)&&(t[a++]=n);return t},n.prototype.equals=function(e){return 0==this.compareTo(e)},n.prototype.min=function(e){return this.compareTo(e)<0?this:e},n.prototype.max=function(e){return this.compareTo(e)>0?this:e},n.prototype.and=function(e){var t=r();return this.bitwiseTo(e,f,t),t},n.prototype.or=function(e){var t=r();return this.bitwiseTo(e,v,t),t},n.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,m,t),t},n.prototype.andNot=function(e){var t=r();return this.bitwiseTo(e,b,t),t},n.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},n.prototype.shiftLeft=function(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},n.prototype.shiftRight=function(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},n.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+g(this[e]);return this.s<0?this.t*this.DB:-1},n.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=y(this[n]^t);return e},n.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},n.prototype.setBit=function(e){return this.changeBit(e,v)},n.prototype.clearBit=function(e){return this.changeBit(e,b)},n.prototype.flipBit=function(e){return this.changeBit(e,m)},n.prototype.add=function(e){var t=r();return this.addTo(e,t),t},n.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t},n.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t},n.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t},n.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t},n.prototype.divideAndRemainder=function(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n)},n.prototype.modPow=function(e,t){var n,a,o=e.bitLength(),i=u(1);if(o<=0)return i;n=o<18?1:o<48?3:o<144?4:o<768?5:6,a=o<8?new d(t):t.isEven()?new T(t):new h(t);var s=new Array,l=3,c=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var v=r();for(a.sqrTo(s[1],v);l<=f;)s[l]=r(),a.mulTo(v,s[l-2],s[l]),l+=2}var m,b,g=e.t-1,y=!0,E=r();for(o=p(e[g])-1;g>=0;){for(o>=c?m=e[g]>>o-c&f:(m=(e[g]&(1<<o+1)-1)<<c-o,g>0&&(m|=e[g-1]>>this.DB+o-c)),l=n;0==(1&m);)m>>=1,--l;if((o-=l)<0&&(o+=this.DB,--g),y)s[m].copyTo(i),y=!1;else{for(;l>1;)a.sqrTo(i,E),a.sqrTo(E,i),l-=2;l>0?a.sqrTo(i,E):(b=i,i=E,E=b),a.mulTo(E,s[m],i)}for(;g>=0&&0==(e[g]&1<<o);)a.sqrTo(i,E),b=i,i=E,E=b,--o<0&&(o=this.DB-1,--g)}return a.revert(i)},n.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return n.ZERO;for(var r=e.clone(),a=this.clone(),o=u(1),i=u(0),s=u(0),l=u(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(e,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;a.isEven();)a.rShiftTo(1,a),t?(s.isEven()&&l.isEven()||(s.addTo(this,s),l.subTo(e,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);r.compareTo(a)>=0?(r.subTo(a,r),t&&o.subTo(s,o),i.subTo(l,i)):(a.subTo(r,a),t&&s.subTo(o,s),l.subTo(i,l))}return 0!=a.compareTo(n.ONE)?n.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l},n.prototype.pow=function(e){return this.exp(e,new E)},n.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var a=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(a<o&&(o=a),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=n.getLowestSetBit())>0&&n.rShiftTo(a,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},n.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=O[O.length-1]){for(t=0;t<O.length;++t)if(n[0]==O[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<O.length;){for(var r=O[t],a=t+1;a<O.length&&r<A;)r*=O[a++];for(r=n.modInt(r);t<a;)if(r%O[t++]==0)return!1}return n.millerRabin(e)},n.prototype.square=function(){var e=r();return this.squareTo(e),e},n.prototype.Barrett=T,null==w){var x;if(w=new Array,j=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var I=new Uint8Array(32);for(window.crypto.getRandomValues(I),x=0;x<32;++x)w[j++]=I[x]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var R=window.crypto.random(32);for(x=0;x<R.length;++x)w[j++]=255&R.charCodeAt(x)}for(;j<N;)x=Math.floor(65536*Math.random()),w[j++]=x>>>8,w[j++]=255&x;j=0,k()}function _(){if(null==C){for(k(),(C=new B).init(w),j=0;j<w.length;++j)w[j]=0;j=0}return C.next()}function M(){}function B(){this.i=0,this.j=0,this.S=new Array}M.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=_()},B.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},B.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var N=256;e.exports={default:n,BigInteger:n,SecureRandom:M}}).call(this)},function(e,t,n){"use strict";var r=t.falseIfInvalid=function(e){return function(){return!!this.valid&&e.apply(this,arguments)}};t.isInSubnet=r((function(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()})),t.isCorrect=function(e){return r((function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}))}},function(e,t,n){(function(t){var n,r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s="[\\ud800-\\udfff]",l="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",c="\\ud83c[\\udffb-\\udfff]",u="[^\\ud800-\\udfff]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="(?:"+l+"|"+c+")"+"?",f="[\\ufe0e\\ufe0f]?"+h+("(?:\\u200d(?:"+[u,p,d].join("|")+")[\\ufe0e\\ufe0f]?"+h+")*"),v="(?:"+[u+l+"?",l,p,d,s].join("|")+")",m=RegExp(c+"(?="+c+")|"+v+f,"g"),b=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),g=parseInt,y="object"==typeof t&&t&&t.Object===Object&&t,E="object"==typeof self&&self&&self.Object===Object&&self,S=y||E||Function("return this")(),T=(n="length",function(e){return null==e?void 0:e[n]});function C(e){return b.test(e)}function w(e){return C(e)?function(e){var t=m.lastIndex=0;for(;m.test(e);)t++;return t}(e):T(e)}function j(e){return C(e)?function(e){return e.match(m)||[]}(e):function(e){return e.split("")}(e)}var O=Object.prototype.toString,A=S.Symbol,k=Math.ceil,x=Math.floor,I=A?A.prototype:void 0,R=I?I.toString:void 0;function _(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=x(t/2))&&(e+=e)}while(t);return n}function M(e){if("string"==typeof e)return e;if(D(e))return R?R.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function B(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}(e,t,n)}function N(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function D(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==O.call(e)}function P(e){return e?(e=function(e){if("number"==typeof e)return e;if(D(e))return NaN;if(N(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=N(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||i.test(e)?g(e.slice(2),n?2:8):a.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}e.exports=function(e,t,n){var r;e=null==(r=e)?"":M(r);var a=(t=function(e){var t=P(e),n=t%1;return t==t?n?t-n:t:0}(t))?w(e):0;return t&&a<t?function(e,t){var n=(t=void 0===t?" ":M(t)).length;if(n<2)return n?_(t,e):t;var r=_(t,k(e/w(t)));return C(t)?B(j(r),0,e).join(""):r.slice(0,e)}(t-a,n)+e:e}}).call(this,n(7))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=/^(?:0|[1-9]\d*)$/,s=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),p=Object.prototype.toString,d=u.Symbol,h=Math.floor,f=d?d.prototype:void 0,v=f?f.toString:void 0;function m(e,t,n){if(!b(n))return!1;var r=typeof t;return!!("number"==r?function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=b(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(n)&&function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}(t,n.length):"string"==r&&t in n)&&function(e,t){return e===t||e!=e&&t!=t}(n[t],e)}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}function y(e){return e?(e=function(e){if("number"==typeof e)return e;if(g(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var i=a.test(e);return i||o.test(e)?s(e.slice(2),i?2:8):r.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function E(e){return null==e?"":function(e){if("string"==typeof e)return e;if(g(e))return v?v.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}e.exports=function(e,t,n){var r,a;return(n?m(e,t,n):void 0===t)?t=1:(r=y(t),a=r%1,t=r==r?a?r-a:r:0),function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=h(t/2))&&(e+=e)}while(t);return n}(E(e),t)}}).call(this,n(7))},function(e,t,n){"use strict";var r=n(8).sprintf,a=t.spanAllZeroes=function(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')};function o(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}t.spanAll=function(e,t){return void 0===t&&(t=0),e.split("").map((function(e,n){return r('<span class="digit value-%s position-%d">%s</span>',e,n+t,a(e))})).join("")},t.spanLeadingZeroes=function(e){return e.split(":").map((function(e){return o(e)})).join(":")},t.simpleGroup=function(e,t){var n=e.split(":");return t||(t=0),n.map((function(e,n){return/group-v4/.test(e)?e:r('<span class="hover-group group-%d">%s</span>',n+t,o(e))})).join(":")}},function(e,t,n){(function(e,r){var a;!function(o){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof r&&r;i.global!==i&&i.window!==i&&i.self;var s,l=2147483647,c=/^xn--/,u=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function v(e){throw new RangeError(d[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function b(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(p,".")).split("."),t).join(".")}function g(e){for(var t,n,r=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function y(e){return m(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=36)e=h(e/35);return h(r+36*e/(e+38))}function T(e){var t,n,r,a,o,i,s,c,u,p,d,f=[],m=e.length,b=0,g=128,E=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),f.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<m;){for(o=b,i=1,s=36;a>=m&&v("invalid-input"),((c=(d=e.charCodeAt(a++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||c>h((l-b)/i))&&v("overflow"),b+=c*i,!(c<(u=s<=E?1:s>=E+26?26:s-E));s+=36)i>h(l/(p=36-u))&&v("overflow"),i*=p;E=S(b-o,t=f.length+1,0==o),h(b/t)>l-g&&v("overflow"),g+=h(b/t),b%=t,f.splice(b++,0,g)}return y(f)}function C(e){var t,n,r,a,o,i,s,c,u,p,d,m,b,y,T,C=[];for(m=(e=g(e)).length,t=128,n=0,o=72,i=0;i<m;++i)(d=e[i])<128&&C.push(f(d));for(r=a=C.length,a&&C.push("-");r<m;){for(s=l,i=0;i<m;++i)(d=e[i])>=t&&d<s&&(s=d);for(s-t>h((l-n)/(b=r+1))&&v("overflow"),n+=(s-t)*b,t=s,i=0;i<m;++i)if((d=e[i])<t&&++n>l&&v("overflow"),d==t){for(c=n,u=36;!(c<(p=u<=o?1:u>=o+26?26:u-o));u+=36)T=c-p,y=36-p,C.push(f(E(p+T%y,0))),c=h(T/y);C.push(f(E(c,0))),o=S(n,b,r==a),n=0,++r}++n,++t}return C.join("")}s={version:"1.4.1",ucs2:{decode:g,encode:y},decode:T,encode:C,toASCII:function(e){return b(e,(function(e){return u.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return b(e,(function(e){return c.test(e)?T(e.slice(4).toLowerCase()):e}))}},void 0===(a=function(){return s}.call(t,n,t,e))||(e.exports=a)}()}).call(this,n(10)(e),n(7))},,function(e,t,n){"use strict";var r=n(15).BigInteger,a=n(8).sprintf,o=n(23),i=n(17),s=n(18),l=n(24),c=n(25),u=n(11),p=n(12),d=n(14);function h(e){return e=(e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function f(e,t){this.groups=void 0===t?p.GROUPS:t,this.v4=!1,this.subnet="/128",this.subnetMask=128,this.zone="",this.address=e;var n=p.RE_SUBNET_STRING.exec(e);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>p.BITS)return this.valid=!1,void(this.error="Invalid subnet mask.");e=e.replace(p.RE_SUBNET_STRING,"")}else if(/\//.test(e))return this.valid=!1,void(this.error="Invalid subnet mask.");var r=p.RE_ZONE_STRING.exec(e);r&&(this.zone=r[0],e=e.replace(p.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}function v(e){return a("%04x",parseInt(e,16))}function m(e){return 255&e}o(f.prototype,n(26)),o(f.prototype,n(27)),o(f.prototype,n(28)),f.fromBigInteger=function(e){var t,n=i(e.toString(16),32,"0"),r=[];for(t=0;t<p.GROUPS;t++)r.push(n.slice(4*t,4*(t+1)));return new f(r.join(":"))},f.fromURL=function(e){var t,n,r;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(null===(r=p.RE_URL_WITH_PORT.exec(e)))return{error:"failed to parse address with port",address:null,port:null};t=r[1],n=r[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),null===(r=p.RE_URL.exec(e)))return{error:"failed to parse address from URL",address:null,port:null};t=r[1]}else t=e;return n?((n=parseInt(n,10))<0||n>65536)&&(n=null):n=null,{address:new f(t),port:n}},f.fromAddress4=function(e){e=new d(e);var t=p.BITS-(u.BITS-e.subnetMask);return new f("::ffff:"+e.correctForm()+"/"+t)},f.fromArpa=function(e){var t=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==t.length)return t={error:"Not Valid 'ip6.arpa' form",address:null};t=t.split(".").reverse();for(var n=7;n>0;n--){var r=4*n;t.splice(r,0,":")}return new f(t=t.join(""))},f.prototype.microsoftTranscription=function(){return a("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},f.prototype.mask=function(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)},f.prototype.possibleSubnets=function(e){void 0===e&&(e=128);var t=p.BITS-this.subnetMask-Math.abs(e-p.BITS);return t<0?"0":function(e){for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e}(new r("2",10).pow(t).toString(10))},f.prototype._startAddress=function(){return new r(this.mask()+s("0",p.BITS-this.subnetMask),2)},f.prototype.startAddress=function(){return f.fromBigInteger(this._startAddress())},f.prototype.startAddressExclusive=function(){var e=new r("1");return f.fromBigInteger(this._startAddress().add(e))},f.prototype._endAddress=function(){return new r(this.mask()+s("1",p.BITS-this.subnetMask),2)},f.prototype.endAddress=function(){return f.fromBigInteger(this._endAddress())},f.prototype.endAddressExclusive=function(){var e=new r("1");return f.fromBigInteger(this._endAddress().subtract(e))},f.prototype.getScope=function(){var e=p.SCOPES[this.getBits(12,16)];return"Global unicast"===this.getType()&&"Link local"!==e&&(e="Global"),e},f.prototype.getType=function(){var e=this;return l(p.TYPES,(function(t,n){return e.isInSubnet(new f(n))}))||"Global unicast"},f.prototype.getBits=function(e,t){return new r(this.getBitsBase2(e,t),2)},f.prototype.getBitsBase2=function(e,t){return this.binaryZeroPad().slice(e,t)},f.prototype.getBitsBase16=function(e,t){var n=t-e;return n%4!=0?null:i(this.getBits(e,t).toString(16),n/4,"0")},f.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,p.BITS)},f.prototype.reverseForm=function(e){e||(e={});var t=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?n:a("%s.ip6.arpa.",n):e.omitSuffix?"":"ip6.arpa."},f.prototype.correctForm=function(){if(!this.parsedAddress)return null;var e,t=[],n=0,r=[];for(e=0;e<this.parsedAddress.length;e++){var a=parseInt(this.parsedAddress[e],16);0===a&&n++,0!==a&&n>0&&(n>1&&r.push([e-n,e-1]),n=0)}n>1&&r.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);var o=r.map((function(e){return e[1]-e[0]+1}));if(r.length>0){var i=o.indexOf(c(o));t=function(e,t){var n,r=[],a=[];for(n=0;n<e.length;n++)n<t[0]?r.push(e[n]):n>t[1]&&a.push(e[n]);return r.concat(["compact"]).concat(a)}(this.parsedAddress,r[i])}else t=this.parsedAddress;for(e=0;e<t.length;e++)"compact"!==t[e]&&(t[e]=parseInt(t[e],16).toString(16));var s=t.join(":");return s=(s=(s=s.replace(/^compact$/,"::")).replace(/^compact|compact$/,":")).replace(/compact/,"")},f.prototype.binaryZeroPad=function(){return i(this.bigInteger().toString(2),p.BITS,"0")},f.prototype.parse4in6=function(e){var t=e.split(":"),n=t.slice(-1)[0].match(u.RE_ADDRESS);if(n){for(var r=new d(n[0]),a=0;a<r.groups;a++)if(/^0[0-9]+/.test(r.parsedAddress[a]))return this.valid=!1,this.error="IPv4 addresses can not have leading zeroes.",this.parseError=e.replace(u.RE_ADDRESS,r.parsedAddress.map(h).join(".")),null;this.v4=!0,t[t.length-1]=r.toGroup6(),e=t.join(":")}return e},f.prototype.parse=function(e){if(e=this.parse4in6(e),this.error)return null;var t=e.match(p.RE_BAD_CHARACTERS);if(t)return this.valid=!1,this.error=a("Bad character%s detected in address: %s",t.length>1?"s":"",t.join("")),this.parseError=e.replace(p.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'),null;var n=e.match(p.RE_BAD_ADDRESS);if(n)return this.valid=!1,this.error=a("Address failed regex: %s",n.join("")),this.parseError=e.replace(p.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'),null;var r=[],o=e.split("::");if(2===o.length){var i=o[0].split(":"),s=o[1].split(":");1===i.length&&""===i[0]&&(i=[]),1===s.length&&""===s[0]&&(s=[]);var l=this.groups-(i.length+s.length);if(!l)return this.valid=!1,this.error="Error parsing groups",null;this.elidedGroups=l,this.elisionBegin=i.length,this.elisionEnd=i.length+this.elidedGroups,i.forEach((function(e){r.push(e)}));for(var c=0;c<l;c++)r.push(0);s.forEach((function(e){r.push(e)}))}else{if(1!==o.length)return this.valid=!1,this.error="Too many :: groups found",null;r=e.split(":"),this.elidedGroups=0}return(r=r.map((function(e){return a("%x",parseInt(e,16))}))).length!==this.groups?(this.valid=!1,this.error="Incorrect number of groups found",null):(this.valid=!0,r)},f.prototype.canonicalForm=function(){return this.valid?this.parsedAddress.map(v).join(":"):null},f.prototype.decimal=function(){return this.valid?this.parsedAddress.map((function(e){return a("%05d",parseInt(e,16))})).join(":"):null},f.prototype.bigInteger=function(){return this.valid?new r(this.parsedAddress.map(v).join(""),16):null},f.prototype.to4=function(){var e=this.binaryZeroPad().split("");return d.fromHex(new r(e.slice(96,128).join(""),2).toString(16))},f.prototype.to4in6=function(){var e=this.to4(),t=new f(this.parsedAddress.slice(0,6).join(":"),6),n=t.correctForm(),r="";return/:$/.test(n)||(r=":"),t.correctForm()+r+e.address},f.prototype.inspectTeredo=function(){var e=this.getBitsBase16(0,32),t=this.getBits(80,96).xor(new r("ffff",16)).toString(),n=d.fromHex(this.getBitsBase16(32,64)),o=d.fromHex(this.getBits(96,128).xor(new r("ffffffff",16)).toString(16)),i=this.getBits(64,80),s=this.getBitsBase2(64,80),l=i.testBit(15),c=i.testBit(14),u=i.testBit(8),p=i.testBit(9),h=new r(s.slice(2,6)+s.slice(8,16),2).toString(10);return{prefix:a("%s:%s",e.slice(0,4),e.slice(4,8)),server4:n.address,client4:o.address,flags:s,coneNat:l,microsoft:{reserved:c,universalLocal:p,groupIndividual:u,nonce:h},udpPort:t}},f.prototype.inspect6to4=function(){var e=this.getBitsBase16(0,16),t=d.fromHex(this.getBitsBase16(16,48));return{prefix:a("%s",e.slice(0,4)),gateway:t.address}},f.prototype.to6to4=function(){return this.is4()?new f(["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":")):null},f.prototype.toByteArray=function(){var e=this.bigInteger().toByteArray();return 17===e.length&&0===e[0]?e.slice(1):e},f.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(m)},f.fromByteArray=function(e){return this.fromUnsignedByteArray(e.map(m))},f.fromUnsignedByteArray=function(e){for(var t=new r("256",10),n=new r("0",10),a=new r("1",10),o=e.length-1;o>=0;o--)n=n.add(a.multiply(new r(e[o].toString(10),10))),a=a.multiply(t);return f.fromBigInteger(n)},e.exports=f},function(e,t,n){(function(e,n){var r=/^\[object .+?Constructor\]$/,a=/^(?:0|[1-9]\d*)$/,o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var i="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,l=i||s||Function("return this")(),c=t&&!t.nodeType&&t,u=c&&"object"==typeof n&&n&&!n.nodeType&&n,p=u&&u.exports===c,d=p&&i.process,h=function(){try{var e=u&&u.require&&u.require("util").types;return e||d&&d.binding&&d.binding("util")}catch(e){}}(),f=h&&h.isTypedArray;function v(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var m,b,g,y=Array.prototype,E=Function.prototype,S=Object.prototype,T=l["__core-js_shared__"],C=E.toString,w=S.hasOwnProperty,j=(m=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",O=S.toString,A=C.call(Object),k=RegExp("^"+C.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=p?l.Buffer:void 0,I=l.Symbol,R=l.Uint8Array,_=x?x.allocUnsafe:void 0,M=(b=Object.getPrototypeOf,g=Object,function(e){return b(g(e))}),B=Object.create,N=S.propertyIsEnumerable,D=y.splice,P=I?I.toStringTag:void 0,U=function(){try{var e=ce(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),L=x?x.isBuffer:void 0,F=Math.max,V=Date.now,H=ce(l,"Map"),G=ce(Object,"create"),q=function(){function e(){}return function(t){if(!Se(t))return{};if(B)return B(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Q(e){var t=this.__data__=new $(e);this.size=t.size}function K(e,t){var n=me(e),r=!n&&ve(e),a=!n&&!r&&ge(e),o=!n&&!r&&!a&&Ce(e),i=n||r||a||o,s=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!w.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ue(c,l))||s.push(c);return s}function X(e,t,n){(void 0!==n&&!fe(e[t],n)||void 0===n&&!(t in e))&&Y(e,t,n)}function J(e,t,n){var r=e[t];w.call(e,t)&&fe(r,n)&&(void 0!==n||t in e)||Y(e,t,n)}function W(e,t){for(var n=e.length;n--;)if(fe(e[n][0],t))return n;return-1}function Y(e,t,n){"__proto__"==t&&U?U(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}z.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},z.prototype.get=function(e){var t=this.__data__;if(G){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return w.call(t,e)?t[e]:void 0},z.prototype.has=function(e){var t=this.__data__;return G?void 0!==t[e]:w.call(t,e)},z.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=G&&void 0===t?"__lodash_hash_undefined__":t,this},$.prototype.clear=function(){this.__data__=[],this.size=0},$.prototype.delete=function(e){var t=this.__data__,n=W(t,e);return!(n<0)&&(n==t.length-1?t.pop():D.call(t,n,1),--this.size,!0)},$.prototype.get=function(e){var t=this.__data__,n=W(t,e);return n<0?void 0:t[n][1]},$.prototype.has=function(e){return W(this.__data__,e)>-1},$.prototype.set=function(e,t){var n=this.__data__,r=W(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Z.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(H||$),string:new z}},Z.prototype.delete=function(e){var t=le(this,e).delete(e);return this.size-=t?1:0,t},Z.prototype.get=function(e){return le(this,e).get(e)},Z.prototype.has=function(e){return le(this,e).has(e)},Z.prototype.set=function(e,t){var n=le(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Q.prototype.clear=function(){this.__data__=new $,this.size=0},Q.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Q.prototype.get=function(e){return this.__data__.get(e)},Q.prototype.has=function(e){return this.__data__.has(e)},Q.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $){var r=n.__data__;if(!H||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Z(r)}return n.set(e,t),this.size=n.size,this};var ee,te=function(e,t,n){for(var r=-1,a=Object(e),o=n(e),i=o.length;i--;){var s=o[ee?i:++r];if(!1===t(a[s],s,a))break}return e};function ne(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":P&&P in Object(e)?function(e){var t=w.call(e,P),n=e[P];try{e[P]=void 0;var r=!0}catch(e){}var a=O.call(e);r&&(t?e[P]=n:delete e[P]);return a}(e):function(e){return O.call(e)}(e)}function re(e){return Te(e)&&"[object Arguments]"==ne(e)}function ae(e){return!(!Se(e)||function(e){return!!j&&j in e}(e))&&(ye(e)?k:r).test(function(e){if(null!=e){try{return C.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function oe(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=pe(e),n=[];for(var r in e)("constructor"!=r||!t&&w.call(e,r))&&n.push(r);return n}function ie(e,t,n,r,a){e!==t&&te(t,(function(o,i){if(a||(a=new Q),Se(o))!function(e,t,n,r,a,o,i){var s=de(e,n),l=de(t,n),c=i.get(l);if(c)return void X(e,n,c);var u=o?o(s,l,n+"",e,t,i):void 0,p=void 0===u;if(p){var d=me(l),h=!d&&ge(l),f=!d&&!h&&Ce(l);u=l,d||h||f?me(s)?u=s:Te(y=s)&&be(y)?u=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(s):h?(p=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=_?_(n):new e.constructor(n);return e.copy(r),r}(l,!0)):f?(p=!1,v=l,m=!0?(b=v.buffer,g=new b.constructor(b.byteLength),new R(g).set(new R(b)),g):v.buffer,u=new v.constructor(m,v.byteOffset,v.length)):u=[]:function(e){if(!Te(e)||"[object Object]"!=ne(e))return!1;var t=M(e);if(null===t)return!0;var n=w.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&C.call(n)==A}(l)||ve(l)?(u=s,ve(s)?u=function(e){return function(e,t,n,r){var a=!n;n||(n={});var o=-1,i=t.length;for(;++o<i;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),a?Y(n,s,l):J(n,s,l)}return n}(e,we(e))}(s):Se(s)&&!ye(s)||(u=function(e){return"function"!=typeof e.constructor||pe(e)?{}:q(M(e))}(l))):p=!1}var v,m,b,g;var y;p&&(i.set(l,u),a(u,l,r,o,i),i.delete(l));X(e,n,u)}(e,t,i,n,ie,r,a);else{var s=r?r(de(e,i),o,i+"",e,t,a):void 0;void 0===s&&(s=o),X(e,i,s)}}),we)}function se(e,t){return he(function(e,t,n){return t=F(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=F(r.length-t,0),i=Array(o);++a<o;)i[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(i),v(e,this,s)}}(e,t,Ae),e+"")}function le(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function ce(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ae(n)?n:void 0}function ue(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&a.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||S)}function de(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var he=function(e){var t=0,n=0;return function(){var r=V(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(U?function(e,t){return U(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ae);function fe(e,t){return e===t||e!=e&&t!=t}var ve=re(function(){return arguments}())?re:function(e){return Te(e)&&w.call(e,"callee")&&!N.call(e,"callee")},me=Array.isArray;function be(e){return null!=e&&Ee(e.length)&&!ye(e)}var ge=L||function(){return!1};function ye(e){if(!Se(e))return!1;var t=ne(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Te(e){return null!=e&&"object"==typeof e}var Ce=f?function(e){return function(t){return e(t)}}(f):function(e){return Te(e)&&Ee(e.length)&&!!o[ne(e)]};function we(e){return be(e)?K(e,!0):oe(e)}var je,Oe=(je=function(e,t,n){ie(e,t,n)},se((function(e,t){var n=-1,r=t.length,a=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(a=je.length>3&&"function"==typeof a?(r--,a):void 0,o&&function(e,t,n){if(!Se(n))return!1;var r=typeof t;return!!("number"==r?be(n)&&ue(t,n.length):"string"==r&&t in n)&&fe(n[t],e)}(t[0],t[1],o)&&(a=r<3?void 0:a,r=1),e=Object(e);++n<r;){var i=t[n];i&&je(e,i,n,a)}return e})));function Ae(e){return e}n.exports=Oe}).call(this,n(7),n(10)(e))},function(e,t,n){(function(e,n){var r="[object Arguments]",a="[object Map]",o="[object Object]",i="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,c=/^\./,u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/^\s+|\s+$/g,d=/\\(\\)?/g,h=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,v=/^\[object .+?Constructor\]$/,m=/^0o[0-7]+$/i,b=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[r]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g["[object Function]"]=g[a]=g["[object Number]"]=g[o]=g["[object RegExp]"]=g[i]=g["[object String]"]=g["[object WeakMap]"]=!1;var y=parseInt,E="object"==typeof e&&e&&e.Object===Object&&e,S="object"==typeof self&&self&&self.Object===Object&&self,T=E||S||Function("return this")(),C=t&&!t.nodeType&&t,w=C&&"object"==typeof n&&n&&!n.nodeType&&n,j=w&&w.exports===C&&E.process,O=function(){try{return j&&j.binding("util")}catch(e){}}(),A=O&&O.isTypedArray;function k(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function x(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function I(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function R(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var _,M,B,N=Array.prototype,D=Function.prototype,P=Object.prototype,U=T["__core-js_shared__"],L=(_=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",F=D.toString,V=P.hasOwnProperty,H=P.toString,G=RegExp("^"+F.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=T.Symbol,z=T.Uint8Array,$=P.propertyIsEnumerable,Z=N.splice,Q=(M=Object.keys,B=Object,function(e){return M(B(e))}),K=Math.max,X=Oe(T,"DataView"),J=Oe(T,"Map"),W=Oe(T,"Promise"),Y=Oe(T,"Set"),ee=Oe(T,"WeakMap"),te=Oe(Object,"create"),ne=Be(X),re=Be(J),ae=Be(W),oe=Be(Y),ie=Be(ee),se=q?q.prototype:void 0,le=se?se.valueOf:void 0,ce=se?se.toString:void 0;function ue(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function de(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function he(e){var t=-1,n=e?e.length:0;for(this.__data__=new de;++t<n;)this.add(e[t])}function fe(e){this.__data__=new pe(e)}function ve(e,t){var n=Fe(e)||Le(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,a=!!r;for(var o in e)!t&&!V.call(e,o)||a&&("length"==o||ke(o,r))||n.push(o);return n}function me(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}function be(e,t){for(var n=0,r=(t=xe(t,e)?[t]:Ce(t)).length;null!=e&&n<r;)e=e[Me(t[n++])];return n&&n==r?e:void 0}function ge(e,t){return null!=e&&t in Object(e)}function ye(e,t,n,s,l){return e===t||(null==e||null==t||!qe(e)&&!ze(t)?e!=e&&t!=t:function(e,t,n,s,l,c){var u=Fe(e),p=Fe(t),d="[object Array]",h="[object Array]";u||(d=(d=Ae(e))==r?o:d);p||(h=(h=Ae(t))==r?o:h);var f=d==o&&!x(e),v=h==o&&!x(t),m=d==h;if(m&&!f)return c||(c=new fe),u||Ze(e)?we(e,t,n,s,l,c):function(e,t,n,r,o,s,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new z(e),new z(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ue(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case a:var c=I;case i:var u=2&s;if(c||(c=R),e.size!=t.size&&!u)return!1;var p=l.get(e);if(p)return p==t;s|=1,l.set(e,t);var d=we(c(e),c(t),r,o,s,l);return l.delete(e),d;case"[object Symbol]":if(le)return le.call(e)==le.call(t)}return!1}(e,t,d,n,s,l,c);if(!(2&l)){var b=f&&V.call(e,"__wrapped__"),g=v&&V.call(t,"__wrapped__");if(b||g){var y=b?e.value():e,E=g?t.value():t;return c||(c=new fe),n(y,E,s,l,c)}}if(!m)return!1;return c||(c=new fe),function(e,t,n,r,a,o){var i=2&a,s=Qe(e),l=s.length,c=Qe(t).length;if(l!=c&&!i)return!1;var u=l;for(;u--;){var p=s[u];if(!(i?p in t:V.call(t,p)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var h=!0;o.set(e,t),o.set(t,e);var f=i;for(;++u<l;){p=s[u];var v=e[p],m=t[p];if(r)var b=i?r(m,v,p,t,e,o):r(v,m,p,e,t,o);if(!(void 0===b?v===m||n(v,m,r,a,o):b)){h=!1;break}f||(f="constructor"==p)}if(h&&!f){var g=e.constructor,y=t.constructor;g==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,s,l,c)}(e,t,ye,n,s,l))}function Ee(e){return!(!qe(e)||function(e){return!!L&&L in e}(e))&&(He(e)||x(e)?G:v).test(Be(e))}function Se(e){return"function"==typeof e?e:null==e?Ke:"object"==typeof e?Fe(e)?function(e,t){if(xe(e)&&Ie(t))return Re(Me(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:be(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){t=xe(t,e)?[t]:Ce(t);var r,a=-1,o=t.length;for(;++a<o;){var i=Me(t[a]);if(!(r=null!=e&&n(e,i)))break;e=e[i]}if(r)return r;return!!(o=e?e.length:0)&&Ge(o)&&ke(i,o)&&(Fe(e)||Le(e))}(e,t,ge)}(n,e):ye(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=Qe(e),n=t.length;for(;n--;){var r=t[n],a=e[r];t[n]=[r,a,Ie(a)]}return t}(e);if(1==t.length&&t[0][2])return Re(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var a=n.length,o=a,i=!r;if(null==e)return!o;for(e=Object(e);a--;){var s=n[a];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<o;){var l=(s=n[a])[0],c=e[l],u=s[1];if(i&&s[2]){if(void 0===c&&!(l in e))return!1}else{var p=new fe;if(r)var d=r(c,u,l,e,t,p);if(!(void 0===d?ye(u,c,r,3,p):d))return!1}}return!0}(n,e,t)}}(e):xe(t=e)?(n=Me(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return be(t,e)}}(t);var t,n}function Te(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||P,t!==r)return Q(e);var t,n,r,a=[];for(var o in Object(e))V.call(e,o)&&"constructor"!=o&&a.push(o);return a}function Ce(e){return Fe(e)?e:_e(e)}function we(e,t,n,r,a,o){var i=2&a,s=e.length,l=t.length;if(s!=l&&!(i&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,p=!0,d=1&a?new he:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var h=e[u],f=t[u];if(r)var v=i?r(f,h,u,t,e,o):r(h,f,u,e,t,o);if(void 0!==v){if(v)continue;p=!1;break}if(d){if(!k(t,(function(e,t){if(!d.has(t)&&(h===e||n(h,e,r,a,o)))return d.add(t)}))){p=!1;break}}else if(h!==f&&!n(h,f,r,a,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function je(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function Oe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ee(n)?n:void 0}ue.prototype.clear=function(){this.__data__=te?te(null):{}},ue.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ue.prototype.get=function(e){var t=this.__data__;if(te){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return V.call(t,e)?t[e]:void 0},ue.prototype.has=function(e){var t=this.__data__;return te?void 0!==t[e]:V.call(t,e)},ue.prototype.set=function(e,t){return this.__data__[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this},pe.prototype.clear=function(){this.__data__=[]},pe.prototype.delete=function(e){var t=this.__data__,n=me(t,e);return!(n<0)&&(n==t.length-1?t.pop():Z.call(t,n,1),!0)},pe.prototype.get=function(e){var t=this.__data__,n=me(t,e);return n<0?void 0:t[n][1]},pe.prototype.has=function(e){return me(this.__data__,e)>-1},pe.prototype.set=function(e,t){var n=this.__data__,r=me(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},de.prototype.clear=function(){this.__data__={hash:new ue,map:new(J||pe),string:new ue}},de.prototype.delete=function(e){return je(this,e).delete(e)},de.prototype.get=function(e){return je(this,e).get(e)},de.prototype.has=function(e){return je(this,e).has(e)},de.prototype.set=function(e,t){return je(this,e).set(e,t),this},he.prototype.add=he.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},he.prototype.has=function(e){return this.__data__.has(e)},fe.prototype.clear=function(){this.__data__=new pe},fe.prototype.delete=function(e){return this.__data__.delete(e)},fe.prototype.get=function(e){return this.__data__.get(e)},fe.prototype.has=function(e){return this.__data__.has(e)},fe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof pe){var r=n.__data__;if(!J||r.length<199)return r.push([e,t]),this;n=this.__data__=new de(r)}return n.set(e,t),this};var Ae=function(e){return H.call(e)};function ke(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||b.test(e))&&e>-1&&e%1==0&&e<t}function xe(e,t){if(Fe(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!$e(e))||(l.test(e)||!s.test(e)||null!=t&&e in Object(t))}function Ie(e){return e==e&&!qe(e)}function Re(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(X&&"[object DataView]"!=Ae(new X(new ArrayBuffer(1)))||J&&Ae(new J)!=a||W&&"[object Promise]"!=Ae(W.resolve())||Y&&Ae(new Y)!=i||ee&&"[object WeakMap]"!=Ae(new ee))&&(Ae=function(e){var t=H.call(e),n=t==o?e.constructor:void 0,r=n?Be(n):void 0;if(r)switch(r){case ne:return"[object DataView]";case re:return a;case ae:return"[object Promise]";case oe:return i;case ie:return"[object WeakMap]"}return t});var _e=Pe((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if($e(e))return ce?ce.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return c.test(e)&&n.push(""),e.replace(u,(function(e,t,r,a){n.push(r?a.replace(d,"$1"):t||e)})),n}));function Me(e){if("string"==typeof e||$e(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Be(e){if(null!=e){try{return F.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Ne,De=(Ne=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var a,o,i=null==n?0:(a=function(e){return e?(e=function(e){if("number"==typeof e)return e;if($e(e))return NaN;if(qe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var n=f.test(e);return n||m.test(e)?y(e.slice(2),n?2:8):h.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(n),o=a%1,a==a?o?a-o:a:0);return i<0&&(i=K(r+i,0)),function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}(e,Se(t),i)},function(e,t,n){var r=Object(e);if(!Ve(e)){var a=Se(t);e=Qe(e),t=function(e){return a(r[e],e,r)}}var o=Ne(e,t,n);return o>-1?r[a?e[o]:o]:void 0});function Pe(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i),i};return n.cache=new(Pe.Cache||de),n}function Ue(e,t){return e===t||e!=e&&t!=t}function Le(e){return function(e){return ze(e)&&Ve(e)}(e)&&V.call(e,"callee")&&(!$.call(e,"callee")||H.call(e)==r)}Pe.Cache=de;var Fe=Array.isArray;function Ve(e){return null!=e&&Ge(e.length)&&!He(e)}function He(e){var t=qe(e)?H.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Ge(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function qe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ze(e){return!!e&&"object"==typeof e}function $e(e){return"symbol"==typeof e||ze(e)&&"[object Symbol]"==H.call(e)}var Ze=A?function(e){return function(t){return e(t)}}(A):function(e){return ze(e)&&Ge(e.length)&&!!g[H.call(e)]};function Qe(e){return Ve(e)?ve(e):Te(e)}function Ke(e){return e}n.exports=De}).call(this,n(7),n(10)(e))},function(e,t){var n=Object.prototype.toString;function r(e,t){return e>t}function a(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==n.call(e)}function o(e){return e}e.exports=function(e){return e&&e.length?function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],s=t(i);if(null!=s&&(void 0===l?s==s&&!a(s):n(s,l)))var l=s,c=i}return c}(e,o,r):void 0}},function(e,t,n){"use strict";var r=n(16),a=n(12);t.isValid=function(){return this.valid},t.isInSubnet=r.isInSubnet,t.isCorrect=r.isCorrect(a.BITS),t.isCanonical=r.falseIfInvalid((function(){return this.addressMinusSuffix===this.canonicalForm()})),t.isLinkLocal=r.falseIfInvalid((function(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)})),t.isMulticast=r.falseIfInvalid((function(){return"Multicast"===this.getType()})),t.is4=r.falseIfInvalid((function(){return this.v4})),t.isTeredo=r.falseIfInvalid((function(){return this.isInSubnet(new this.constructor("2001::/32"))})),t.is6to4=r.falseIfInvalid((function(){return this.isInSubnet(new this.constructor("2002::/16"))})),t.isLoopback=r.falseIfInvalid((function(){return"Loopback"===this.getType()}))},function(e,t,n){"use strict";var r=n(11),a=n(19),o=n(8).sprintf;t.href=function(e){return e=void 0===e?"":o(":%s",e),o("http://[%s]%s/",this.correctForm(),e)},t.link=function(e){e||(e={}),void 0===e.className&&(e.className=""),void 0===e.prefix&&(e.prefix="/#address="),void 0===e.v4&&(e.v4=!1);var t=this.correctForm;return e.v4&&(t=this.to4in6),e.className?o('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,t.call(this),e.className):o('<a href="%1$s%2$s">%2$s</a>',e.prefix,t.call(this))},t.group=function(){var e,t=this.address.match(r.RE_ADDRESS);if(t){var n=t[0].split(".");this.address=this.address.replace(r.RE_ADDRESS,o('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',n.slice(0,2).join("."),n.slice(2,4).join(".")))}if(0===this.elidedGroups)return a.simpleGroup(this.address);var i=[],s=this.address.split("::");s[0].length?i.push(a.simpleGroup(s[0])):i.push("");var l=["hover-group"];for(e=this.elisionBegin;e<this.elisionBegin+this.elidedGroups;e++)l.push(o("group-%d",e));return i.push(o('<span class="%s"></span>',l.join(" "))),s[1].length?i.push(a.simpleGroup(s[1],this.elisionEnd)):i.push(""),i.join(":")}},function(e,t,n){"use strict";var r=n(8).sprintf,a=n(12);function o(e){return r("(%s)",e.join("|"))}function i(e){return e.length<4?r("0{0,%d}%s",4-e.length,e):e}function s(e){var t=[];e.forEach((function(e,n){0===parseInt(e,16)&&t.push(n)}));var n=t.map((function(t){return e.map((function(e,n){if(n===t){var r=0===n||n===a.GROUPS-1?":":"";return o([i(e),r])}return i(e)})).join(":")}));return n.push(e.map(i).join(":")),o(n)}function l(e,t,n){var a=t?"":":",i=n?"":":",s=[];t||n||s.push("::"),t&&n&&s.push(""),(n&&!t||!n&&t)&&s.push(":"),s.push(r("%s(:0{1,4}){1,%d}",a,e-1)),s.push(r("(0{1,4}:){1,%d}%s",e-1,i)),s.push(r("(0{1,4}:){%d}0{1,4}",e-1));for(var l=1;l<e-1;l++)for(var c=1;c<e-l;c++)s.push(r("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",c,e-c-l-1));return o(s)}t.regularExpressionString=function(e){void 0===e&&(e=!1);var t=[],n=new this.constructor(this.correctForm());if(0===n.elidedGroups)t.push(s(n.parsedAddress));else if(n.elidedGroups===a.GROUPS)t.push(l(a.GROUPS));else{var r=n.address.split("::");r[0].length&&t.push(s(r[0].split(":"))),t.push(l(n.elidedGroups,0!==r[0].length,0!==r[1].length)),r[1].length&&t.push(s(r[1].split(":"))),t=[t.join(":")]}return e||(t=[].concat("(?=^|","[^A-Fa-f0-9:]","|[^\\w\\:])(",t,")(?=[^\\w\\:]|","[^A-Fa-f0-9:]","|$)")),t.join("")},t.regularExpression=function(e){return new RegExp(this.regularExpressionString(e),"i")}},function(e,t,n){"use strict";n.r(t);var r,a,o,i,s,l,c,u,p=n(3),d=function(){function e(e,t,n){var r;this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this)),this.$q=n,this.appModel||(this.appModel={});var a=this.appModel;(a.jsonData||(a.jsonData={}),this.configured=!1,null===(r=this.appModel)||void 0===r?void 0:r.enabled)&&(Object.values(p.config.datasources).filter((function(e){return"synthetic-monitoring-datasource"===e.type})).length>0&&(this.configured=!0))}return e.$inject=["$scope","$injector","$q"],e.prototype.postUpdate=function(){var e;if(null===(e=this.appModel)||void 0===e?void 0:e.enabled)return Object(p.getLocationSrv)().update({path:"a/grafana-synthetic-monitoring-app/?page=config",partial:!1}),this.$q.resolve(!0)},e.templateUrl="legacy/config.html",e}(),h=n(4),f=n(2),v=n(0),m=n.n(v);function b(e,t){var n,r;if(t){var a=""+t.id,o=t.url+("logs"===t.type?"":"/api/prom");try{for(var i=Object(f.h)(e),s=i.next();!s.done;s=i.next()){var l=s.value;if(l.url===o&&(console.log("MAYBE:",a,l.basicAuthUser,l),a===l.basicAuthUser))return l}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}function g(){return Object(f.b)(this,void 0,Promise,(function(){var e,t,n,r,a,o,i,s;return Object(f.d)(this,(function(l){switch(l.label){case 0:e=[],l.label=1;case 1:l.trys.push([1,6,7,8]),t=Object(f.h)(Object.values(p.config.datasources)),n=t.next(),l.label=2;case 2:return n.done?[3,5]:"prometheus"!==(r=n.value).type&&"loki"!==r.type?[3,4]:[4,Object(p.getBackendSrv)().get("api/datasources/"+r.id)];case 3:(a=l.sent()).url&&a.url.indexOf("grafana.net")>0&&e.push(a),l.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),i={error:o},[3,8];case 7:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}return[7];case 8:return[2,e]}}))}))}function y(){return Object(f.b)(this,void 0,Promise,(function(){return Object(f.d)(this,(function(e){return[2,Object(p.getBackendSrv)().post("api/datasources",{name:"Synthetic Monitoring",type:"synthetic-monitoring-datasource",access:"proxy",isDefault:!1})]}))}))}function E(e,t,n){return Object(f.b)(this,void 0,Promise,(function(){var r;return Object(f.d)(this,(function(a){return r={name:e,url:t.url+("logs"===t.type?"":"/api/prom"),access:"proxy",basicAuth:!0,basicAuthUser:""+t.id,secureJsonData:{basicAuthPassword:n},type:"logs"===t.type?"loki":"prometheus"},[2,Object(p.getBackendSrv)().post("api/datasources",r).then((function(e){return e.datasource}))]}))}))}function S(e){var t=p.config.bootData.user;switch(e){case c.ADMIN:return t.orgRole===c.ADMIN;case c.EDITOR:return t.orgRole===c.ADMIN||t.orgRole===c.EDITOR;case c.VIEWER:return t.orgRole===c.ADMIN||t.orgRole===c.EDITOR||t.orgRole===c.VIEWER;default:return!1}}function T(e){var t=Object.keys(e);return t.length<1?l.HTTP:t[0]}function C(e){switch(e){case l.HTTP:return{http:{method:a.GET,ipVersion:r.V4,noFollowRedirects:!1}};case l.PING:return{ping:{ipVersion:r.V4,dontFragment:!1}};case l.DNS:return{dns:{recordType:i.A,server:"8.8.8.8",ipVersion:r.V4,protocol:s.UDP,port:53}};case l.TCP:return{tcp:{ipVersion:r.V4,tls:!1}}}}function w(e,t){var n,r,a=t.instanceSettings.jsonData.dashboards,o=void 0;try{for(var i=Object(f.h)(a),s=i.next();!s.done;s=i.next()){var l=s.value;l.json.toLocaleLowerCase()==="sm-"+e+".json"&&(o=l)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}!function(e){e.Any="Any",e.V4="V4",e.V6="V6"}(r||(r={})),function(e){e.GET="GET",e.HEAD="HEAD",e.POST="POST",e.PUT="PUT",e.OPTIONS="OPTIONS",e.DELETE="DELETE"}(a||(a={})),function(e){e.HTTP1_0="HTTP/1.0",e.HTTP1_1="HTTP/1.1",e.HTTP2_0="HTTP/2"}(o||(o={})),function(e){e.A="A",e.AAAA="AAAA",e.CNAME="CNAME",e.MX="MX",e.NS="NS",e.PTR="PTR",e.SOA="SOA",e.SRV="SRV",e.TXT="TXT"}(i||(i={})),function(e){e.TCP="TCP",e.UDP="UDP"}(s||(s={})),function(e){e.HTTP="http",e.PING="ping",e.DNS="dns",e.TCP="tcp"}(l||(l={})),function(e){e.ADMIN="Admin",e.EDITOR="Editor",e.VIEWER="Viewer"}(c||(c={})),function(e){e.NOERROR="NOERROR",e.BADALG="BADALG",e.BADCOOKIE="BADCOOKIE",e.BADKEY="BADKEY",e.BADMODE="BADMODE",e.BADNAME="BADNAME",e.BADSIG="BADSIG",e.BADTIME="BADTIME",e.BADTRUNC="BADTRUNC",e.BADVERS="BADVERS",e.FORMERR="FORMERR",e.NOTAUTH="NOTAUTH",e.NOTIMP="NOTIMP",e.NOTZONE="NOTZONE",e.NXDOMAIN="NXDOMAIN",e.NXRRSET="NXRRSET",e.REFUSED="REFUSED",e.SERVFAIL="SERVFAIL",e.YXDOMAIN="YXDOMAIN",e.YXRRSET="YXRRSET"}(u||(u={}));var j=n(1),O=n(9),A=n(5),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(f.c)(t,e),t.prototype.render=function(){var e=this,t=this.props.selected;return m.a.createElement("div",null,this.props.instances.map((function(n){var r=t===n.id,a="public/app/plugins/datasource/prometheus/img/prometheus_logo.svg",o="metrics";"logs"===n.type&&(a="public/app/plugins/datasource/loki/img/loki_icon.svg",o="logs");var i="add-data-source-item";return r&&(i+=" "+Object(A.css)("border:1px solid #5794f2")),m.a.createElement("div",{key:n.id,className:i,onClick:function(){return e.props.onSelected(n.id)}},m.a.createElement("img",{className:"add-data-source-item-logo",src:a}),m.a.createElement("div",{className:"add-data-source-item-text-wrapper"},m.a.createElement("span",{className:"add-data-source-item-text"},n.name),m.a.createElement("span",{className:"add-data-source-item-desc"},n.url)),m.a.createElement("div",{className:"add-data-source-item-actions"},m.a.createElement(j.LinkButton,{variant:"secondary",href:"https://grafana.com/orgs/"+n.orgSlug+"/hosted-"+o+"/"+n.id+"?utm_source=synthetic_monitoring_app",target:"_blank",rel:"noopener",icon:"external-link-alt"},"grafana.com"),!r&&m.a.createElement(j.Button,null,"Select")))})))},t}(v.PureComponent),x=n(6),I=["sm-http.json","sm-ping.json","sm-dns.json","sm-tcp.json","sm-summary.json"];function R(){return Object(f.b)(this,void 0,Promise,(function(){var e,t,n,r,a,o,i;return Object(f.d)(this,(function(s){switch(s.label){case 0:return[4,(e=Object(p.getBackendSrv)()).get("api/folders")];case 1:t=s.sent();try{for(n=Object(f.h)(t),r=n.next();!r.done;r=n.next())if("Synthetic Monitoring"===(a=r.value).title)return[2,a]}catch(e){o={error:e}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return[4,e.post("api/folders",{title:"Synthetic Monitoring"})];case 2:return[2,s.sent()]}}))}))}function _(e,t){return Object(f.b)(this,void 0,Promise,(function(){var n,r,a;return Object(f.d)(this,(function(o){switch(o.label){case 0:return[4,(n=Object(p.getBackendSrv)()).get("public/plugins/grafana-synthetic-monitoring-app/dashboards/"+e)];case 1:return r=o.sent(),[4,R()];case 2:return a=o.sent(),[4,n.post("api/dashboards/import",{dashboard:r,overwrite:!0,inputs:[{name:"DS_SM_METRICS",type:"datasource",pluginId:"prometheus",value:t.metrics.grafanaName},{name:"DS_SM_LOGS",type:"datasource",pluginId:"loki",value:t.logs.grafanaName}],folderId:a.id})];case 3:return[2,{title:o.sent().title,uid:r.uid,json:e,version:r.version,latestVersion:r.version}]}}))}))}function M(){return Object(f.b)(this,void 0,Promise,(function(){var e,t,n,r,a,o,i,s,l,c;return Object(f.d)(this,(function(u){switch(u.label){case 0:e=Object(p.getBackendSrv)(),t=[],u.label=1;case 1:u.trys.push([1,6,7,8]),n=Object(f.h)(I),r=n.next(),u.label=2;case 2:return r.done?[3,5]:(a=r.value,[4,e.get("public/plugins/grafana-synthetic-monitoring-app/dashboards/"+a)]);case 3:o=u.sent(),i={title:o.title,uid:o.uid,json:a,version:0,latestVersion:o.version},t.push(i),u.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),l={error:s},[3,8];case 7:try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,t]}}))}))}function B(e){return Object(f.b)(this,void 0,Promise,(function(){return Object(f.d)(this,(function(t){return[2,Object(p.getBackendSrv)().delete("/api/dashboards/uid/"+e.uid)]}))}))}var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dashboards:t.props.options.dashboards},t.onImport=function(e){return function(){return Object(f.b)(t,void 0,void 0,(function(){var t,n,r,a,o;return Object(f.d)(this,(function(i){switch(i.label){case 0:return(t=this.props.onChange)?(n=Object(f.a)({},this.props.options),[4,_(e.json,n)]):[2];case 1:return r=i.sent(),console.log("dashboard updated"),(a=n.dashboards.findIndex((function(e){return e.uid===r.uid})))<0?n.dashboards.push(r):n.dashboards[a]=r,o=Object(f.g)(this.state.dashboards),(a=o.findIndex((function(e){return e.uid===r.uid})))<0?o.push(r):o[a]=r,this.setState({dashboards:o}),[2,t(n)]}}))}))}},t.onRemove=function(e){return function(){return Object(f.b)(t,void 0,void 0,(function(){var t,n,r,a;return Object(f.d)(this,(function(o){switch(o.label){case 0:return(t=this.props.onChange)?(n=Object(f.a)({},this.props.options),[4,B(e)]):[2];case 1:return o.sent(),(r=n.dashboards.findIndex((function(t){return t.uid===e.uid})))>=0&&n.dashboards.splice(r,1),a=Object(f.g)(this.state.dashboards),(r=a.findIndex((function(t){return t.uid===e.uid})))>=0&&(a[r].version=0),this.setState({dashboards:a}),[2,t(n)]}}))}))}},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,l,c,u;return Object(f.d)(this,(function(p){switch(p.label){case 0:return e=this.props,t=e.checkUpdates,n=e.onChange,t&&n?(r=Object(f.g)(this.state.dashboards),[4,M()]):[2];case 1:a=p.sent(),o=function(e){var t=r.findIndex((function(t){return t.uid===e.uid}));t<0?r.push(e):(r[t].latestVersion=e.latestVersion,r[t].version||(r[t].version=-1))};try{for(i=Object(f.h)(a),s=i.next();!s.done;s=i.next())l=s.value,o(l)}catch(e){c={error:e}}finally{try{s&&!s.done&&(u=i.return)&&u.call(i)}finally{if(c)throw c.error}}return console.log(r),this.setState({dashboards:r}),[2]}}))}))},t.prototype.withImports=function(e){if(this.props.checkUpdates)return m.a.createElement("td",{style:{textAlign:"right"}},0===e.version?m.a.createElement("button",{className:"btn btn-secondary btn-small",onClick:this.onImport(e)},"Import"):m.a.createElement("button",{className:"btn btn-secondary btn-small",onClick:this.onImport(e)},function(e){return(e.latestVersion||0)>(e.version||0)?"Update":"Re-import"}(e)),0!==e.version&&m.a.createElement("button",{className:"btn btn-danger btn-small",onClick:this.onRemove(e)},m.a.createElement(j.Icon,{name:"trash-alt"})))},t.prototype.render=function(){var e=this,t=this.state.dashboards;return m.a.createElement("div",null,m.a.createElement("h3",null,"Dashboards:"),m.a.createElement("table",{className:"filter-table"},m.a.createElement("tbody",null,t.map((function(t){return m.a.createElement("tr",{key:t.uid},m.a.createElement("td",{className:"width-1"},m.a.createElement(j.Icon,{name:"apps"})),m.a.createElement("td",null,m.a.createElement("a",{href:"d/"+t.uid+"/"},t.title)),e.withImports(t))})))))},t}(v.PureComponent),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultApiHost="https://synthetic-monitoring-api.grafana.net",t.state={showResetModal:!1,resetConfig:!1,apiHost:t.defaultApiHost,showAdvanced:!1},t.onInit=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,l,c=this;return Object(f.d)(this,(function(u){switch(u.label){case 0:return e=this.props.instance,t=this.state,n=t.adminApiToken,r=t.apiHost,n?r?[4,e.registerInit(r,n).catch((function(e){if(console.error("failed to init. ",e),e.data.msg)c.setState({userError:e.data.msg,backendError:void 0});else{var t="failed to initialize with provided Admin API Key";e.statusText&&(t=e.status+": "+e.statusText),c.setState({backendError:t,userError:void 0})}}))]:(alert("Missing apiHost"),[2]):(alert("Missing admin key"),[2]);case 1:return(a=u.sent())?(this.setState({info:a,logsInstance:null===(i=null===(o=a.tenantInfo)||void 0===o?void 0:o.logInstance)||void 0===i?void 0:i.id,metricsInstance:null===(l=null===(s=a.tenantInfo)||void 0===s?void 0:s.metricInstance)||void 0===l?void 0:l.id,userError:void 0,backendError:void 0}),[2]):(console.log("info not returned from registerInit"),[2])}}))}))},t.onApiHostChange=function(e){t.setState({apiHost:e.target.value})},t.onApiTokenChange=function(e){t.setState({adminApiToken:e.target.value})},t.onSelectLogs=function(e){t.setState({logsInstance:e})},t.onSelectMetrics=function(e){t.setState({metricsInstance:e})},t.createDataSource=function(e,n){return Object(f.b)(t,void 0,void 0,(function(){var t,r,a,o;return Object(f.d)(this,(function(i){switch(i.label){case 0:t=this.props.instance,r=this.state.adminApiToken,i.label=1;case 1:return i.trys.push([1,5,,6]),[4,t.getViewerToken(r,n)];case 2:return(a=i.sent())?[4,E(e,n,a)]:[3,4];case 3:return[2,i.sent()];case 4:return console.error("error getting token"),[2,void 0];case 5:return o=i.sent(),console.log("Error creating",e,n,o),[3,6];case 6:return[2,void 0]}}))}))},t.onSave=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,l,c,u,p,d,h,v,m,y,E,S=this;return Object(f.d)(this,(function(T){switch(T.label){case 0:return e=this.props.instance,t=this.state,n=t.info,r=t.adminApiToken,a=t.apiHost,o=null==e?void 0:e.instanceSettings.name,i=null==n?void 0:n.instances.find((function(e){return e.id===S.state.metricsInstance})),s=null==n?void 0:n.instances.find((function(e){return e.id===S.state.logsInstance})),i?s?a?[4,g()]:(alert("Missing apiHost"),[2]):(alert("Missing logs instance"),[2]):(alert("Missing metrics instance"),[2]);case 1:return l=T.sent(),(c=b(l,i))?[3,3]:[4,this.createDataSource(o+" Metrics",i)];case 2:c=T.sent(),T.label=3;case 3:return(u=b(l,s))?[3,5]:[4,this.createDataSource(o+" Logs",s)];case 4:u=T.sent(),T.label=5;case 5:p={apiHost:a,logs:{grafanaName:u.name,hostedId:s.id},metrics:{grafanaName:c.name,hostedId:i.id},dashboards:[]},T.label=6;case 6:T.trys.push([6,11,12,13]),d=Object(f.h)(I),h=d.next(),T.label=7;case 7:return h.done?[3,10]:[4,_(h.value,p)];case 8:v=T.sent(),p.dashboards.push(v),T.label=9;case 9:return h=d.next(),[3,7];case 10:return[3,13];case 11:return m=T.sent(),y={error:m},[3,13];case 12:try{h&&!h.done&&(E=d.return)&&E.call(d)}finally{if(y)throw y.error}return[7];case 13:return[4,e.registerSave(r,p,null==n?void 0:n.accessToken)];case 14:return T.sent(),window.location.reload(),[2]}}))}))},t.onToggleAdvanced=function(e){t.setState({showAdvanced:!t.state.showAdvanced})},t.showResetModal=function(e){return function(){t.setState({showResetModal:e})}},t.onReset=function(){t.setState({resetConfig:!0})},t.onOptionsChange=function(e){return t.props.instance.onOptionsChange(e)},t}return Object(f.c)(t,e),t.prototype.renderSetup=function(){var e=this.state,t=e.info,n=e.adminApiToken,r=e.apiHost,a=e.logsInstance,o=e.metricsInstance,i=e.showAdvanced,s=e.userError,l=e.backendError;return t?m.a.createElement("div",null,m.a.createElement("div",null,"Select the Grafana Cloud instances Synthetic Monitoring will send data to"),m.a.createElement("h4",null,"Metrics"),m.a.createElement(k,{instances:t.instances.filter((function(e){return"prometheus"===e.type})),onSelected:this.onSelectMetrics,selected:o}),m.a.createElement("h4",null,"Logs"),m.a.createElement(k,{instances:t.instances.filter((function(e){return"logs"===e.type})),onSelected:this.onSelectLogs,selected:a}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement(j.Button,{variant:"primary",onClick:this.onSave},"Setup")):m.a.createElement("div",null,m.a.createElement(j.HorizontalGroup,{wrap:!0},m.a.createElement(j.InfoBox,{title:"Initialize Synthetic Monitoring App",url:"https://grafana.com/grafana/plugins/grafana-synthetic-monitoring-app/"},m.a.createElement("p",null,"To initialize the App and connect it to your Grafana Cloud service you will need a Admin API key for you Grafana.com account. The ",m.a.createElement("b",null,"API key")," is only needed for the initialization process and will not be stored. Once the initialization is complete you can safely delete the key.",m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("a",{className:"highlight-word",href:"//grafana.com/profile/api-keys",target:"_blank"},"Generate a new API key"))),m.a.createElement(j.Field,{label:"Admin API Key",error:s,invalid:void 0!==s},m.a.createElement(j.Input,{type:"text",width:100,placeholder:"Grafana.com Admin Api Key",value:n||"",onChange:this.onApiTokenChange}))),m.a.createElement("br",null),m.a.createElement(j.Collapse,{label:"Advanced",collapsible:!0,onToggle:this.onToggleAdvanced,isOpen:i},m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Backend Address"},m.a.createElement(j.Input,{type:"text",width:40,placeholder:"Synthetic Monitoring Backend Address",value:r||this.defaultApiHost,onChange:this.onApiHostChange})))),m.a.createElement(j.Button,{variant:"primary",onClick:this.onInit},"Initalize"),void 0!==l&&m.a.createElement(j.Container,{margin:"md"},m.a.createElement(j.Alert,{title:"Backend Error",severity:"error"},l)))},t.prototype.render=function(){var e,t=this.props.instance;if(!t)return m.a.createElement("div",null,"Loading...");var n=this.state,r=n.showResetModal,a=n.resetConfig;return!Object(O.b)(null===(e=t.instanceSettings)||void 0===e?void 0:e.jsonData)||a?this.renderSetup():m.a.createElement("div",null,m.a.createElement(N,{options:t.instanceSettings.jsonData,checkUpdates:!0,onChange:this.onOptionsChange}),m.a.createElement("br",null),m.a.createElement(x.a,{settings:t.instanceSettings.jsonData}),m.a.createElement(j.Button,{variant:"destructive",onClick:this.showResetModal(!0)},"Reset"),m.a.createElement(j.ConfirmModal,{isOpen:r,title:"Reset Configuration",body:"Are you sure you want to reset the configuration?",confirmText:"Reset Configuration",onConfirm:this.onReset,onDismiss:this.showResetModal(!1)}))},t}(v.PureComponent),P=n(20),U=n(13),L={job:V,target:H,frequency:G,timeout:q,labels:z,settings:function(e){var t=T(e);if(!e[t])return!1;switch(t){case l.HTTP:return e.http,!0;case l.PING:return e.ping,!0;case l.DNS:return e.dns,!0;case l.TCP:return e.tcp,!0}},probes:K};function F(e){return L.job(e.job)&&L.target(T(e.settings),e.target)&&L.frequency(e.frequency)&&L.timeout(e.timeout)&&L.labels(e.labels)&&L.settings(e.settings)&&L.probes(e.probes)}function V(e){return e.length>0&&e.length<=32}function H(e,t){if(!(t.length>0&&t.length<=2040))return!1;switch(e){case l.HTTP:return function(e){try{var t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol}catch(e){return!1}}(t);case l.PING:case l.DNS:return X(t);case l.TCP:return function(e){var t=new RegExp(/^(?:\[([0-9a-f:.]+)\]|([^:]+)):(\d+)$/,"i"),n=e.match(t);if(null===n)return!1;var r=void 0!==n[1]?n[1]:n[2],a=parseInt(n[3],10);return X(r)&&!isNaN(a)&&a>0&&a<=65535}(t);default:return!1}}function G(e){return e>=1e4&&e<=12e4}function q(e){return e>=1e3&&e<=1e4}function z(e){var t,n,r;if(e.length<0||e.length>5)return!1;try{for(var a=Object(f.h)(e),o=a.next();!o.done;o=a.next()){var i=o.value;if(!Z((r=i).name)||!Q(r.value))return!1}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}var $=/^[a-zA-Z_][a-zA-Z0-9_]*$/;function Z(e){return!(e.length<1||e.length>32)&&$.test(e)}function Q(e){return e.length>0&&e.length<=32}function K(e){return e.length>0&&e.length<=64}function X(e){if(new U.Address4(e).isValid())return!0;if(new U.Address6(e).isValid())return!0;var t=P.toASCII(e),n=new RegExp(/^[a-z]([-a-z0-9]{0,62}[a-z0-9])?(\.[a-z]([-a-z0-9]{0,62}[a-z0-9])?)+$/,"i");return null!=t.match(n)}var J,W,Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={labels:t.props.labels||[],numLabels:t.props.labels.length},t.addLabel=function(){var e=t.state.labels;console.log("adding new label",e);var n=e.push({name:"",value:""});t.setState({labels:e,numLabels:n},t.onUpdate)},t.onDelete=function(e){var n=t.state.labels;n.splice(e,1),t.setState({labels:n,numLabels:n.length},t.onUpdate)},t.onUpdate=function(){t.props.onUpdate(t.state.labels)},t.onChange=function(e,n){var r=t.state.labels;r[e]=n,t.setState({labels:r},t.onUpdate)},t}return Object(f.c)(t,e),t.prototype.render=function(){var e=this,t=this.state.labels,n=this.props,r=n.isEditor,a=n.limit;return m.a.createElement(j.VerticalGroup,{justify:"space-between"},m.a.createElement(j.List,{items:t,renderItem:function(t,n){return m.a.createElement(ee,{onDelete:e.onDelete,onChange:e.onChange,label:t,index:n,isEditor:r})}}),t.length<a&&m.a.createElement(j.Button,{onClick:this.addLabel,disabled:!r,variant:"secondary",size:"sm"},m.a.createElement(j.Icon,{name:"plus"})," Add ",this.props.type))},t}(v.PureComponent),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={name:t.props.label.name,value:t.props.label.value},t.onNameChange=function(e){t.setState({name:e.target.value},t.onChange)},t.onValueChange=function(e){t.setState({value:e.target.value},t.onChange)},t.onDelete=function(){t.props.onDelete(t.props.index)},t.onChange=function(){t.props.onChange(t.props.index,{name:t.state.name,value:t.state.value})},t}return Object(f.c)(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.label,r=t.index;n===e.label&&r===e.index||this.setState({name:this.props.label.name,value:this.props.label.value})},t.prototype.render=function(){var e=this.state,t=e.name,n=e.value,r=this.props.isEditor;return console.log("rendering label with name:",t),m.a.createElement(j.HorizontalGroup,{justify:"space-between"},m.a.createElement(j.Input,{type:"text",placeholder:"name",value:t,onChange:this.onNameChange,disabled:!r,invalid:!Z(t)}),m.a.createElement(j.Input,{type:"text",placeholder:"value",value:n,onChange:this.onValueChange,disabled:!r,invalid:!Q(n)}),m.a.createElement(j.IconButton,{name:"minus-circle",onClick:this.onDelete,disabled:!r}))},t}(v.PureComponent),te=[{label:"Any",value:r.Any},{label:"V4",value:r.V4},{label:"V6",value:r.V6}],ne=function(e){function t(){var t,n,a=e.apply(this,Object(f.g)(arguments))||this;return a.state={ipVersion:(null===(t=a.props.settings.ping)||void 0===t?void 0:t.ipVersion)||r.V4,dontFragment:(null===(n=a.props.settings.ping)||void 0===n?void 0:n.dontFragment)||!1,showAdvanced:!1},a.onUpdate=function(){var e=a.state;a.props.onUpdate({ping:e})},a.onIpVersionChange=function(e){a.setState({ipVersion:e.value||r.Any},a.onUpdate)},a.onDontFragmentChange=function(e){a.setState({dontFragment:!a.state.dontFragment},a.onUpdate)},a.onToggleOptions=function(e){a.setState({showAdvanced:!a.state.showAdvanced})},a}return Object(f.c)(t,e),t.prototype.render=function(){var e=this.state,t=e.ipVersion,n=e.dontFragment,r=e.showAdvanced,a=this.props.isEditor;return m.a.createElement(j.Container,null,m.a.createElement(j.Collapse,{label:"Advanced Options",collapsible:!0,onToggle:this.onToggleOptions,isOpen:r},m.a.createElement(j.HorizontalGroup,null,m.a.createElement("div",null,m.a.createElement(j.Field,{label:"IP Version",description:"The IP protocol of the ICMP request",disabled:!a},m.a.createElement(j.Select,{value:t,options:te,onChange:this.onIpVersionChange}))),m.a.createElement("div",null,m.a.createElement(j.Field,{label:"Don't Fragment",description:"Set the DF-bit in the IP-header. Only works with ipV4",disabled:!a},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{value:n,onChange:this.onDontFragmentChange,disabled:!a})))))))},t}(v.PureComponent),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasBasicAuth:!1,hasBearerToken:!1,showAuthentication:!1},t.onUpdate=function(){t.props.onUpdate(t.state.token,t.state.basicAuth)},t.onToggleAuthentication=function(e){t.setState({showAuthentication:!t.state.showAuthentication})},t.onBearerTokenChange=function(e){t.setState({token:e.target.value},t.onUpdate)},t.onBasicAuthChange=function(e){var n=t.state,r=n.hasBasicAuth,a=n.hasBearerToken,o=n.token;e?(r=!0,a=!1,o=void 0):r=!1,t.setState({basicAuth:e,hasBasicAuth:r,hasBearerToken:a,token:o},t.onUpdate)},t.onHasBearerAuth=function(e){var n=t.state,r=n.hasBasicAuth,a=n.basicAuth,o=n.hasBearerToken,i=n.token;o?i=void 0:r&&(r=!1,a=void 0),o=!o,t.setState({hasBasicAuth:r,basicAuth:a,hasBearerToken:o,token:i},t.onUpdate)},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.bearerToken,n=e.basicAuth,r=!1,a=!1;t&&t.length>0?r=!0:n&&(n.username.length>0||n.password.length>0)&&(a=!0),this.setState({hasBasicAuth:a,hasBearerToken:r,token:t,basicAuth:n})},t.prototype.render=function(){var e=this.state,t=e.showAuthentication,n=e.hasBearerToken,r=e.token,a=e.basicAuth,o=this.props.isEditor;return m.a.createElement(j.Collapse,{label:"Authentication",collapsible:!0,onToggle:this.onToggleAuthentication,isOpen:t},m.a.createElement(j.VerticalGroup,{spacing:"xs"},m.a.createElement(j.Field,{label:"Bearer Token",description:"Include bearer Authorization header in request",disabled:!o,horizontal:!0,className:n?Object(A.css)(J||(J=Object(f.e)(["\n                    margin-bottom: 1px;\n                  "],["\n                    margin-bottom: 1px;\n                  "]))):void 0},m.a.createElement(j.Container,{margin:"sm"},m.a.createElement(j.Switch,{value:n,onChange:this.onHasBearerAuth,disabled:!o}))),n&&m.a.createElement(j.VerticalGroup,null,m.a.createElement(j.Input,{type:"password",placeholder:"Bearer Token",value:r,onChange:this.onBearerTokenChange,disabled:!o}),m.a.createElement("br",null))),m.a.createElement(ae,{onChange:this.onBasicAuthChange,basicAuth:a,isEditor:o}))},t}(v.PureComponent),ae=function(e){function t(){var t,n,r=e.apply(this,Object(f.g)(arguments))||this;return r.state={username:(null===(t=r.props.basicAuth)||void 0===t?void 0:t.username)||"",password:(null===(n=r.props.basicAuth)||void 0===n?void 0:n.password)||"",hasBasicAuth:!!r.props.basicAuth},r.onUpdate=function(){if(r.state.hasBasicAuth){var e={username:r.state.username,password:r.state.password};r.props.onChange(e)}else r.props.onChange(void 0)},r.onUsernameChange=function(e){r.setState({username:e.target.value},r.onUpdate)},r.onPasswordChange=function(e){r.setState({password:e.target.value},r.onUpdate)},r.onHasBasicAuth=function(e){var t=r.state,n=t.hasBasicAuth,a=t.username,o=t.password;n&&(a="",o=""),n=!n,r.setState({hasBasicAuth:n,username:a,password:o},r.onUpdate)},r}return Object(f.c)(t,e),t.prototype.componentDidUpdate=function(e){var t,n;this.setState({username:(null===(t=this.props.basicAuth)||void 0===t?void 0:t.username)||"",password:(null===(n=this.props.basicAuth)||void 0===n?void 0:n.password)||"",hasBasicAuth:!!this.props.basicAuth})},t.prototype.render=function(){var e=this.state,t=e.username,n=e.password,r=e.hasBasicAuth,a=this.props.isEditor;return m.a.createElement(j.VerticalGroup,{spacing:"xs"},m.a.createElement(j.Field,{label:"Basic Auth",description:"Include Basic Authorization header in request",disabled:!a,horizontal:!0,className:r?Object(A.css)(W||(W=Object(f.e)(["\n                  margin-bottom: 1px;\n                "],["\n                  margin-bottom: 1px;\n                "]))):void 0},m.a.createElement(j.Container,{margin:"sm"},m.a.createElement(j.Switch,{value:r,onChange:this.onHasBasicAuth,disabled:!a}))),r&&m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Input,{type:"text",placeholder:"username",value:t,onChange:this.onUsernameChange,disabled:!a}),m.a.createElement(j.Input,{type:"password",placeholder:"password",value:n,onChange:this.onPasswordChange,disabled:!a})))},t}(v.PureComponent),oe=function(e){function t(){var t,n,o,i,s,l,c,u,p,d,h,v,m,b,g,y,E=e.apply(this,Object(f.g)(arguments))||this;return E.state={method:(null===(t=E.props.settings.http)||void 0===t?void 0:t.method)||a.GET,body:null===(n=E.props.settings.http)||void 0===n?void 0:n.body,headers:null===(o=E.props.settings.http)||void 0===o?void 0:o.headers,ipVersion:(null===(i=E.props.settings.http)||void 0===i?void 0:i.ipVersion)||r.V4,noFollowRedirects:(null===(s=E.props.settings.http)||void 0===s?void 0:s.noFollowRedirects)||!1,bearerToken:null===(l=E.props.settings.http)||void 0===l?void 0:l.bearerToken,basicAuth:null===(c=E.props.settings.http)||void 0===c?void 0:c.basicAuth,failIfSSL:(null===(u=E.props.settings.http)||void 0===u?void 0:u.failIfSSL)||!1,failIfNotSSL:(null===(p=E.props.settings.http)||void 0===p?void 0:p.failIfNotSSL)||!1,validStatusCodes:(null===(d=E.props.settings.http)||void 0===d?void 0:d.validStatusCodes)||[],validHTTPVersions:(null===(h=E.props.settings.http)||void 0===h?void 0:h.validHTTPVersions)||[],failIfBodyMatchesRegexp:(null===(v=E.props.settings.http)||void 0===v?void 0:v.failIfBodyMatchesRegexp)||[],failIfBodyNotMatchesRegexp:(null===(m=E.props.settings.http)||void 0===m?void 0:m.failIfBodyNotMatchesRegexp)||[],failIfHeaderMatchesRegexp:(null===(b=E.props.settings.http)||void 0===b?void 0:b.failIfHeaderMatchesRegexp)||[],failIfHeaderNotMatchesRegexp:(null===(g=E.props.settings.http)||void 0===g?void 0:g.failIfHeaderNotMatchesRegexp)||[],cacheBustingQueryParamName:null===(y=E.props.settings.http)||void 0===y?void 0:y.cacheBustingQueryParamName,showAdvanced:!1,showValidation:!1,showAuthentication:!1,showTLS:!1},E.onUpdate=function(){var e=E.state;E.props.onUpdate({http:e})},E.onMethodChange=function(e){E.setState({method:e.value||a.GET},E.onUpdate)},E.onBodyChange=function(e){E.setState({body:e.target.value},E.onUpdate)},E.onIpVersionChange=function(e){E.setState({ipVersion:e.value||r.Any},E.onUpdate)},E.onNoFollowRedirectsChange=function(e){E.setState({noFollowRedirects:!E.state.noFollowRedirects},E.onUpdate)},E.onFailIfNotSSLChange=function(e){E.setState({failIfNotSSL:!E.state.failIfNotSSL},E.onUpdate)},E.onFailIfSSLChange=function(e){E.setState({failIfSSL:!E.state.failIfSSL},E.onUpdate)},E.onCacheBustingQueryParamNameChange=function(e){E.setState({cacheBustingQueryParamName:e.target.value},E.onUpdate)},E.onToggleAdvanced=function(e){E.setState({showAdvanced:!E.state.showAdvanced})},E.onToggleValidation=function(e){E.setState({showValidation:!E.state.showValidation})},E.onAuthUpdate=function(e,t){E.setState({bearerToken:e,basicAuth:t},E.onUpdate)},E.onToggleTLS=function(e){E.setState({showTLS:!E.state.showTLS})},E.onTLSChange=function(e){E.setState({tlsConfig:e},E.onUpdate)},E.onValidHttpVersionsChange=function(e){var t,n,r=[];try{for(var a=Object(f.h)(e.values()),o=a.next();!o.done;o=a.next()){var i=o.value;i.value&&r.push(i.value)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}E.setState({validHTTPVersions:r},E.onUpdate)},E.onValidStatusCodeChange=function(e){var t,n,r=[];try{for(var a=Object(f.h)(e.values()),o=a.next();!o.done;o=a.next()){var i=o.value;i.value&&r.push(i.value)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}E.setState({validStatusCodes:r},E.onUpdate)},E.onHeadersUpdate=function(e){var t,n,r=[];try{for(var a=Object(f.h)(e),o=a.next();!o.done;o=a.next()){var i=o.value;r.push(i.name+": "+i.value)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}E.setState({headers:r},E.onUpdate)},E.onFailIfBodyMatchesRegexpChange=function(e){return function(t){var n,r=[];null===(n=E.state.failIfBodyMatchesRegexp)||void 0===n||n.forEach((function(n,a){a===e?r.push(t.target.value):r.push(n)})),E.setState({failIfBodyMatchesRegexp:r},E.onUpdate)}},E.onFailIfBodyMatchesRegexpDelete=function(e){return function(){var t,n=[];null===(t=E.state.failIfBodyMatchesRegexp)||void 0===t||t.forEach((function(t,r){r!==e&&n.push(t)})),E.setState({failIfBodyMatchesRegexp:n},E.onUpdate)}},E.addFailIfBodyMatchesRegexp=function(){var e,t,n=[];try{for(var r=Object(f.h)(E.state.failIfBodyMatchesRegexp||[]),a=r.next();!a.done;a=r.next()){var o=a.value;n.push(o)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n.push(""),E.setState({failIfBodyMatchesRegexp:n},E.onUpdate)},E.onFailIfBodyNotMatchesRegexpChange=function(e){return function(t){var n,r=[];null===(n=E.state.failIfBodyNotMatchesRegexp)||void 0===n||n.forEach((function(n,a){a===e?r.push(t.target.value):r.push(n)})),E.setState({failIfBodyNotMatchesRegexp:r},E.onUpdate)}},E.onFailIfBodyNotMatchesRegexpDelete=function(e){return function(){var t,n=[];null===(t=E.state.failIfBodyNotMatchesRegexp)||void 0===t||t.forEach((function(t,r){r!==e&&n.push(t)})),E.setState({failIfBodyNotMatchesRegexp:n},E.onUpdate)}},E.addFailIfBodyNotMatchesRegexp=function(){var e,t,n=[];try{for(var r=Object(f.h)(E.state.failIfBodyNotMatchesRegexp||[]),a=r.next();!a.done;a=r.next()){var o=a.value;n.push(o)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n.push(""),E.setState({failIfBodyNotMatchesRegexp:n},E.onUpdate)},E.onFailIfHeaderMatchesUpdate=function(e){var t=[];E.state.failIfHeaderMatchesRegexp?e.forEach((function(e){t.push(e)})):t=e,console.log("setting failIfHeaderMatchesRegexp",t),E.setState({failIfHeaderMatchesRegexp:t},E.onUpdate)},E.onFailIfHeaderNotMatchesUpdate=function(e){var t=[];E.state.failIfHeaderNotMatchesRegexp?e.forEach((function(e){t.push(e)})):t=e,E.setState({failIfHeaderNotMatchesRegexp:t},E.onUpdate)},E}return Object(f.c)(t,e),t.prototype.headersToLabels=function(){var e,t,n=[];try{for(var r=Object(f.h)(this.state.headers||[]),a=r.next();!a.done;a=r.next()){var o=a.value.split(":",2);n.push({name:o[0],value:o[1]})}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},t.prototype.generateValidStatusCodes=function(){for(var e=[],t=100;t<=102;t++)e.push({label:""+t,value:t});for(t=200;t<=208;t++)e.push({label:""+t,value:t});for(t=300;t<=308;t++)e.push({label:""+t,value:t});for(t=400;t<=418;t++)e.push({label:""+t,value:t});e.push({label:"422",value:422}),e.push({label:"426",value:426}),e.push({label:"428",value:428}),e.push({label:"429",value:429}),e.push({label:"431",value:431});for(t=500;t<=511;t++)e.push({label:""+t,value:t});return e.push({label:"598",value:598}),e.push({label:"599",value:599}),e},t.prototype.render=function(){var e=this,t=this.state,n=this.props.isEditor,r=[{label:"HTTP/1.0",value:o.HTTP1_0},{label:"HTTP/1.1",value:o.HTTP1_1},{label:"HTTP/2",value:o.HTTP2_0}],i=[{label:"GET",value:a.GET},{label:"HEAD",value:a.HEAD},{label:"PUT",value:a.PUT},{label:"POST",value:a.POST},{label:"DELETE",value:a.DELETE},{label:"OPTIONS",value:a.OPTIONS}],s=this.generateValidStatusCodes();return m.a.createElement(j.Container,null,m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Request Method",description:"The HTTP method the probe will use",disabled:!n},m.a.createElement(j.Select,{value:t.method,options:i,onChange:this.onMethodChange}))),m.a.createElement(j.Container,null,m.a.createElement(j.Field,{label:"Request Body",description:"The body of the HTTP request used in probe.",disabled:!n},m.a.createElement("div",null,m.a.createElement(j.TextArea,{value:t.body,onChange:this.onBodyChange,rows:2,disabled:!n})))),m.a.createElement(j.Container,null,m.a.createElement(j.Field,{label:"Request Headers",description:"The HTTP headers set for the probe..",disabled:!n},m.a.createElement("div",null,m.a.createElement(Y,{labels:this.headersToLabels(),isEditor:n,onUpdate:this.onHeadersUpdate,type:"Header",limit:10})))),m.a.createElement("br",null),m.a.createElement(j.Collapse,{label:"TLS Config",collapsible:!0,onToggle:this.onToggleTLS,isOpen:t.showTLS},m.a.createElement(ie,{onChange:this.onTLSChange,isEditor:n,tlsConfig:t.tlsConfig})),m.a.createElement(re,{isEditor:n,basicAuth:t.basicAuth,bearerToken:t.bearerToken,onUpdate:this.onAuthUpdate}),m.a.createElement(j.Collapse,{label:"Validation",collapsible:!0,onToggle:this.onToggleValidation,isOpen:t.showValidation},m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Valid Status Codes",description:"Accepted status codes for this probe. Defaults to 2xx.",disabled:!n},m.a.createElement(j.MultiSelect,{options:s,value:t.validStatusCodes,onChange:this.onValidStatusCodeChange,disabled:!n})),m.a.createElement(j.Field,{label:"Valid HTTP Versions",description:"Accepted HTTP versions for this probe",disabled:!n},m.a.createElement(j.MultiSelect,{options:r,value:t.validHTTPVersions,onChange:this.onValidHttpVersionsChange,disabled:!n})),m.a.createElement(j.Field,{label:"Fail if SSL",description:"Probe fails if SSL is present",disabled:!n},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{value:t.failIfSSL,onChange:this.onFailIfSSLChange,disabled:!n}))),m.a.createElement(j.Field,{label:"Fail if not SSL",description:"Probe fails if SSL is not present",disabled:!n},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{value:t.failIfNotSSL,onChange:this.onFailIfNotSSLChange,disabled:!n})))),m.a.createElement(j.Field,{label:"Fail if body matches regexp",description:"Probe fails if response body matches regex",disabled:!n},m.a.createElement(j.VerticalGroup,{justify:"space-between"},m.a.createElement(j.List,{items:t.failIfBodyMatchesRegexp||[],renderItem:function(t,r){return m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Input,{type:"text",placeholder:"regexp",value:t,onChange:e.onFailIfBodyMatchesRegexpChange(r),disabled:!n}),m.a.createElement(j.IconButton,{name:"minus-circle",onClick:e.onFailIfBodyMatchesRegexpDelete(r),disabled:!n}))}}),m.a.createElement(j.Button,{onClick:this.addFailIfBodyMatchesRegexp,disabled:!n,variant:"secondary",size:"sm"},m.a.createElement(j.Icon,{name:"plus"})," Add Body Regexp"))),m.a.createElement(j.Field,{label:"Fail if body doesn't match regexp",description:"Probe fails if response body does not match regex",disabled:!n},m.a.createElement(j.VerticalGroup,{justify:"space-between"},m.a.createElement(j.List,{items:t.failIfBodyNotMatchesRegexp||[],renderItem:function(t,r){return m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Input,{type:"text",placeholder:"regexp",value:t,onChange:e.onFailIfBodyNotMatchesRegexpChange(r),disabled:!n}),m.a.createElement(j.IconButton,{name:"minus-circle",onClick:e.onFailIfBodyNotMatchesRegexpDelete(r),disabled:!n}))}}),m.a.createElement(j.Button,{onClick:this.addFailIfBodyNotMatchesRegexp,disabled:!n,variant:"secondary",size:"sm"},m.a.createElement(j.Icon,{name:"plus"})," Add Body Regexp"))),m.a.createElement(se,{headerMatches:t.failIfHeaderMatchesRegexp||[],name:"Fail if header matches regexp",description:"Probe fails if response header matches regex. For headers with multiple values, fails if *at least one* matches",onChange:this.onFailIfHeaderMatchesUpdate,isEditor:n}),m.a.createElement(se,{headerMatches:t.failIfHeaderNotMatchesRegexp||[],name:"Fail if header doesn't match regexp",description:"Probe fails if response header does not match regex. For headers with multiple values, fails if *none* match.",onChange:this.onFailIfHeaderNotMatchesUpdate,isEditor:n})),m.a.createElement(j.Collapse,{label:"Advanced Options",collapsible:!0,onToggle:this.onToggleAdvanced,isOpen:t.showAdvanced},m.a.createElement(j.HorizontalGroup,null,m.a.createElement("div",null,m.a.createElement(j.Field,{label:"IP Version",description:"The IP protocol of the HTTP request",disabled:!n},m.a.createElement(j.Select,{value:t.ipVersion,options:te,onChange:this.onIpVersionChange}))),m.a.createElement("div",null,m.a.createElement(j.Field,{label:"Follow Redirects",description:"Whether or not the probe will follow any redirects.",disabled:!n},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{value:!t.noFollowRedirects,onChange:this.onNoFollowRedirectsChange,disabled:!n}))))),m.a.createElement(j.HorizontalGroup,null,m.a.createElement("div",null,m.a.createElement(j.Field,{label:"Cache busting query parameter name",description:"The name of the query parameter used to prevent the server from using a cached response. Each probe will assign a random value to this parameter each time a request is made."},m.a.createElement(j.Input,{type:"string",placeholder:"cache-bust",value:t.cacheBustingQueryParamName,onChange:this.onCacheBustingQueryParamNameChange,disabled:!n}))))))},t}(v.PureComponent),ie=function(e){function t(){var t,n,r,a,o,i=e.apply(this,Object(f.g)(arguments))||this;return i.state={insecureSkipVerify:(null===(t=i.props.tlsConfig)||void 0===t?void 0:t.insecureSkipVerify)||!1,caCert:(null===(n=i.props.tlsConfig)||void 0===n?void 0:n.caCert)||"",clientCert:(null===(r=i.props.tlsConfig)||void 0===r?void 0:r.clientCert)||"",clientKey:(null===(a=i.props.tlsConfig)||void 0===a?void 0:a.clientKey)||"",serverName:(null===(o=i.props.tlsConfig)||void 0===o?void 0:o.serverName)||""},i.onUpdate=function(){var e={insecureSkipVerify:i.state.insecureSkipVerify,caCert:i.state.caCert,clientCert:i.state.clientCert,clientKey:i.state.clientKey,serverName:i.state.serverName};i.props.onChange(e)},i.onInsecureSkipVerifyChange=function(e){i.setState({insecureSkipVerify:!i.state.insecureSkipVerify},i.onUpdate)},i.onServerNameChange=function(e){i.setState({serverName:e.target.value},i.onUpdate)},i.onCACertChange=function(e){i.setState({caCert:e.target.value},i.onUpdate)},i.onClientCertChange=function(e){i.setState({clientCert:e.target.value},i.onUpdate)},i.onClientKeyChange=function(e){i.setState({clientKey:e.target.value},i.onUpdate)},i}return Object(f.c)(t,e),t.prototype.render=function(){var e=this.state,t=e.insecureSkipVerify,n=e.caCert,r=e.clientCert,a=e.clientKey,o=e.serverName,i=this.props.isEditor;return m.a.createElement("div",null,m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Skip Validation",description:"Disable target certificate validation",disabled:!i},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{value:t,onChange:this.onInsecureSkipVerifyChange,disabled:!i}))),m.a.createElement(j.Field,{label:"Server Name",description:"Used to verify the hostname for the targets",disabled:!i},m.a.createElement(j.Input,{type:"text",placeholder:"ServerName",value:o,onChange:this.onServerNameChange,disabled:!i}))),m.a.createElement(j.Container,null,m.a.createElement(j.Field,{label:"CA Certificate",description:"The CA cert to use for the targets",disabled:!i},m.a.createElement("div",null,m.a.createElement(j.TextArea,{value:n,onChange:this.onCACertChange,rows:2,disabled:!i,placeholder:"CA Certificate"})))),m.a.createElement(j.Container,null,m.a.createElement(j.Field,{label:"Client Certificate",description:"The client cert file for the targets",disabled:!i},m.a.createElement("div",null,m.a.createElement(j.TextArea,{value:r,onChange:this.onClientCertChange,rows:2,disabled:!i,placeholder:"Client Certificate"})))),m.a.createElement(j.Container,null,m.a.createElement(j.Field,{label:"Client Key",description:"The client key file for the targets",disabled:!i},m.a.createElement("div",null,m.a.createElement(j.TextArea,{type:"password",value:a,onChange:this.onClientKeyChange,rows:2,disabled:!i,placeholder:"Client Key"})))))},t}(v.PureComponent),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={headerMatches:t.props.headerMatches},t.onUpdate=function(){t.props.onChange(t.state.headerMatches)},t.onHeaderChange=function(e){return function(n){var r=[];t.state.headerMatches.forEach((function(t,a){a===e?r.push({header:n.target.value,regexp:t.regexp,allowMissing:t.allowMissing}):r.push(t)})),t.setState({headerMatches:r},t.onUpdate)}},t.onRegexpChange=function(e){return function(n){var r=[];t.state.headerMatches.forEach((function(t,a){a===e?r.push({header:t.header,regexp:n.target.value,allowMissing:t.allowMissing}):r.push(t)})),t.setState({headerMatches:r},t.onUpdate)}},t.onAllowMissingChange=function(e){return function(n){var r=[];t.state.headerMatches.forEach((function(t,n){n===e?r.push({header:t.header,regexp:t.regexp,allowMissing:!t.allowMissing}):r.push(t)})),t.setState({headerMatches:r},t.onUpdate)}},t.onHeaderMatchesDelete=function(e){return function(){var n,r=[];null===(n=t.state.headerMatches)||void 0===n||n.forEach((function(t,n){n!==e&&r.push(t)})),t.setState({headerMatches:r},t.onUpdate)}},t.onHeaderMatchesAdd=function(){var e=[];t.state.headerMatches.forEach((function(t){e.push(t)})),e.push({header:"",regexp:"",allowMissing:!1}),t.setState({headerMatches:e},t.onUpdate)},t}return Object(f.c)(t,e),t.prototype.render=function(){var e=this,t=this.state.headerMatches,n=this.props,r=n.isEditor,a=n.name,o=n.description;return m.a.createElement(j.Field,{label:a,description:o,disabled:!r},m.a.createElement(j.VerticalGroup,{justify:"space-between"},m.a.createElement(j.List,{items:t,renderItem:function(t,n){return m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Input,{type:"text",placeholder:"header",value:t.header,onChange:e.onHeaderChange(n),disabled:!r}),m.a.createElement(j.Input,{type:"text",placeholder:"regexp",value:t.regexp,onChange:e.onRegexpChange(n),disabled:!r}),m.a.createElement(j.HorizontalGroup,null,m.a.createElement("span",null,"Allow Missing"),m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{title:"Allow Missing",value:t.allowMissing,onChange:e.onAllowMissingChange(n),disabled:!r}))),m.a.createElement(j.IconButton,{name:"minus-circle",onClick:e.onHeaderMatchesDelete(n),disabled:!r}))}}),m.a.createElement(j.Button,{onClick:this.onHeaderMatchesAdd,disabled:!r,variant:"secondary",size:"sm"},m.a.createElement(j.Icon,{name:"plus"})," Add Header Regexp")))},t}(v.PureComponent);function le(e,t){switch(t.type){case"delete":return e.reduce((function(e,n,r){return r!==t.index&&e.push(n),e}),[]);case"add":return Object(f.g)(e,[""]);case"change":return e.map((function(e,n){return n===t.index&&null!=t.value?t.value:e}));default:return e}}var ce,ue=function(e){var t=e.label,n=e.description,r=e.items,a=e.disabled,o=e.onUpdate,i=e.dataTestId,s=e.placeholder,l=e.className,c=Object(f.f)(Object(v.useReducer)(le,r),2),u=c[0],p=c[1];return Object(v.useEffect)((function(){o(u)}),[u]),m.a.createElement("div",{"data-testid":i,className:l},m.a.createElement(j.Field,{label:t,description:n,disabled:a},m.a.createElement(m.a.Fragment,null,m.a.createElement(j.List,{items:u,renderItem:function(e,t){return m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Input,{type:"text",placeholder:s,value:e,onChange:function(e){return p({type:"change",index:t,value:e.target.value})},disabled:a}),m.a.createElement(j.IconButton,{name:"minus-circle",onClick:function(){return p({type:"delete",index:t})},disabled:a}))}}),m.a.createElement(j.IconButton,{name:"plus-circle",onClick:function(){return p({type:"add"})},disabled:a}))))},pe=function(e){var t,n,r=e.onChange,a=e.validations,o=e.isEditor,i=e.name,s=e.description,l=null!==(t=null==a?void 0:a.failIfMatchesRegexp)&&void 0!==t?t:[],c=null!==(n=null==a?void 0:a.failIfNotMatchesRegexp)&&void 0!==n?n:[],u=i.replace(" ","-").toLowerCase();return m.a.createElement(m.a.Fragment,null,m.a.createElement(ue,{dataTestId:u+"-matches",label:i+" matches",description:s+" match",placeholder:"Enter regexp",items:l,onUpdate:function(e){r({failIfMatchesRegexp:e,failIfNotMatchesRegexp:c})},disabled:!o}),m.a.createElement(ue,{dataTestId:u+"-not-matches",label:i+" doesn't match",description:s+" don't match",placeholder:"Enter regexp",items:c,onUpdate:function(e){r({failIfNotMatchesRegexp:e,failIfMatchesRegexp:l})},disabled:!o}))},de=(ce=u,Object(f.g)(new Set(Object.keys(ce)))).map((function(e){return{label:e,value:e}})),he=[{label:i.A,value:i.A},{label:i.AAAA,value:i.AAAA},{label:i.CNAME,value:i.CNAME},{label:i.MX,value:i.MX},{label:i.NS,value:i.NS},{label:i.SOA,value:i.SOA},{label:i.TXT,value:i.TXT},{label:i.PTR,value:i.PTR},{label:i.SRV,value:i.SRV}],fe=[{label:s.UDP,value:s.UDP},{label:s.TCP,value:s.TCP}],ve={recordType:i.A,server:"8.8.8.8",ipVersion:r.V4,protocol:s.UDP,port:53,validRCodes:[u.NOERROR],validateAnswerRRS:{failIfMatchesRegexp:[],failIfNotMatchesRegexp:[]},validateAuthorityRRS:{failIfMatchesRegexp:[],failIfNotMatchesRegexp:[]},validateAdditionalRRS:{failIfMatchesRegexp:[],failIfNotMatchesRegexp:[]}};function me(e,t){var n,r;return Object(f.a)(Object(f.a)({},e),((n={})[t.name]=null!==(r=t.value)&&void 0!==r?r:t.fallbackValue,n))}var be,ge=function(e){var t=e.settings,n=e.isEditor,a=e.onUpdate,o=Object(f.a)(Object(f.a)({},ve),t.dns),l=Object(f.f)(Object(v.useState)(!1),2),c=l[0],p=l[1],d=Object(f.f)(Object(v.useState)(!1),2),h=d[0],b=d[1];return m.a.createElement(j.Container,null,m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Record Type",description:"DNS record type to query for",disabled:!n},m.a.createElement(j.Select,{value:o.recordType,options:he,onChange:function(e){var t=me(o,{name:"recordType",value:e.value,fallbackValue:i.A});a({dns:t})}})),m.a.createElement(j.Field,{label:"Server",description:"Address of server to query",disabled:!n},m.a.createElement(j.Input,{id:"dns-settings-server-address",value:o.server,type:"text",placeholder:"server",onChange:function(e){var t=me(o,{name:"server",value:e.target.value,fallbackValue:"8.8.8.8"});a({dns:t})}})),m.a.createElement(j.Field,{label:"Protocol",description:"Transport protocol to use",disabled:!n},m.a.createElement(j.Select,{value:o.protocol,options:fe,onChange:function(e){var t=me(o,{name:"protocol",value:e.value,fallbackValue:s.UDP});a({dns:t})}})),m.a.createElement(j.Field,{label:"Port",description:"port on server to query",disabled:!n},m.a.createElement(j.Input,{id:"dns-settings-port",value:o.port,type:"number",placeholder:"port",onChange:function(e){var t=me(o,{name:"port",value:e.target.value,fallbackValue:53});a({dns:t})}}))),m.a.createElement(j.Collapse,{label:"Validation",collapsible:!0,onToggle:function(){return p(!c)},isOpen:c},m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Valid Response Codes",description:"List of valid response codes",disabled:!n},m.a.createElement(j.MultiSelect,{value:o.validRCodes,options:de,onChange:function(e){var t=me(o,{name:"validRCodes",value:e.map((function(e){return e.value})),fallbackValue:[u.NOERROR]});a({dns:t})}}))),m.a.createElement("div",{className:Object(A.css)(be||(be=Object(f.e)(["\n            display: grid;\n            grid-template-columns: auto auto;\n            grid-column-gap: 0.5rem;\n          "],["\n            display: grid;\n            grid-template-columns: auto auto;\n            grid-column-gap: 0.5rem;\n          "])))},m.a.createElement(pe,{name:"Validate Answer",description:"Validate entries in the Answer section of the DNS response",validations:o.validateAnswerRRS,onChange:function(e){var t=me(o,{name:"validateAnswerRRS",value:e});a({dns:t})},isEditor:n}),m.a.createElement(pe,{name:"Validate Authority",description:"Validate entries in the Authority section of the DNS response",validations:o.validateAuthorityRRS,onChange:function(e){var t=me(o,{name:"validateAuthorityRRS",value:e});a({dns:t})},isEditor:n}),m.a.createElement(pe,{name:"Validate Additional",description:"Validate entries in the Additional section of the DNS response",validations:o.validateAdditionalRRS,onChange:function(e){var t=me(o,{name:"validateAdditionalRRS",value:e});a({dns:t})},isEditor:n}))),m.a.createElement(j.Collapse,{label:"Advanced Options",collapsible:!0,onToggle:function(){return b(!h)},isOpen:h},m.a.createElement(j.HorizontalGroup,null,m.a.createElement("div",null,m.a.createElement(j.Field,{label:"IP Version",description:"The IP protocol of the ICMP request",disabled:!n},m.a.createElement(j.Select,{value:o.ipVersion,options:te,onChange:function(e){var t=me(o,{name:"ipVersion",value:e.value,fallbackValue:r.Any});a({dns:t})}}))))))},ye=function(e){function t(){var t,n,a,o,i=e.apply(this,Object(f.g)(arguments))||this;return i.state={ipVersion:(null===(t=i.props.settings.tcp)||void 0===t?void 0:t.ipVersion)||r.V4,tls:(null===(n=i.props.settings.tcp)||void 0===n?void 0:n.tls)||!1,tlsConfig:null===(a=i.props.settings.tcp)||void 0===a?void 0:a.tlsConfig,queryResponse:null===(o=i.props.settings.tcp)||void 0===o?void 0:o.queryResponse,showQueryResponse:!1,showAdvanced:!1,showTLS:!1},i.onUpdate=function(){var e=i.state;i.props.onUpdate({tcp:e})},i.onIpVersionChange=function(e){i.setState({ipVersion:e.value||r.Any},i.onUpdate)},i.onToggleTLS=function(e){i.setState({showTLS:!i.state.showTLS},i.onUpdate)},i.onTLSChange=function(e){i.setState({tls:!i.state.tls},i.onUpdate)},i.onTLSCOnfigChange=function(e){i.setState({tlsConfig:e},i.onUpdate)},i.onShowAdvanced=function(e){i.setState({showAdvanced:!i.state.showAdvanced})},i.onShowQueryResponse=function(e){i.setState({showQueryResponse:!i.state.showQueryResponse})},i.onQueryResponsesUpdate=function(e){var t=[];i.state.queryResponse?e.forEach((function(e){t.push(e)})):t=e,i.setState({queryResponse:t},i.onUpdate)},i}return Object(f.c)(t,e),t.prototype.render=function(){var e=this.state,t=e.ipVersion,n=e.tls,r=e.showTLS,a=e.showQueryResponse,o=e.showAdvanced,i=e.tlsConfig,s=e.queryResponse,l=this.props.isEditor;return m.a.createElement(j.Container,null,m.a.createElement(j.Field,{label:"Use TLS",description:"Whether or not TLS is used when the connection is initiated.",disabled:!l},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{title:"Use TLS",value:n,onChange:this.onTLSChange,disabled:!l}))),m.a.createElement(j.Collapse,{label:"Query/Response",collapsible:!0,onToggle:this.onShowQueryResponse,isOpen:a},m.a.createElement(j.Container,null,m.a.createElement(Ee,{queryResponses:s,isEditor:l,onChange:this.onQueryResponsesUpdate}))),m.a.createElement(j.Collapse,{label:"TLS Config",collapsible:!0,onToggle:this.onToggleTLS,isOpen:r},m.a.createElement(ie,{onChange:this.onTLSCOnfigChange,isEditor:l,tlsConfig:i})),m.a.createElement(j.Collapse,{label:"Advanced Options",collapsible:!0,onToggle:this.onShowAdvanced,isOpen:o},m.a.createElement(j.HorizontalGroup,null,m.a.createElement("div",null,m.a.createElement(j.Field,{label:"IP Version",description:"The IP protocol of the ICMP request",disabled:!l},m.a.createElement(j.Select,{value:t,options:te,onChange:this.onIpVersionChange}))))))},t}(v.PureComponent),Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={queryResponses:(t.props.queryResponses||[]).map((function(e){return{expect:atob(e.expect),send:atob(e.send),startTLS:e.startTLS}}))},t.onUpdate=function(){var e=[];t.state.queryResponses.forEach((function(t){e.push({expect:btoa(t.expect),send:btoa(t.send),startTLS:t.startTLS})})),t.props.onChange(e)},t.onSendChange=function(e){return function(n){var r=[];t.state.queryResponses.forEach((function(t,a){a===e?r.push({send:n.target.value,expect:t.expect,startTLS:t.startTLS}):r.push(t)})),t.setState({queryResponses:r},t.onUpdate)}},t.onExpectChange=function(e){return function(n){var r=[];t.state.queryResponses.forEach((function(t,a){a===e?r.push({send:t.send,expect:n.target.value,startTLS:t.startTLS}):r.push(t)})),t.setState({queryResponses:r},t.onUpdate)}},t.onStartTLSChange=function(e){return function(n){var r=[];t.state.queryResponses.forEach((function(t,n){n===e?r.push({send:t.send,expect:t.expect,startTLS:!t.startTLS}):r.push(t)})),t.setState({queryResponses:r},t.onUpdate)}},t.onQueryResponseDelete=function(e){return function(){var n=[];t.state.queryResponses.forEach((function(t,r){r!==e&&n.push(t)})),t.setState({queryResponses:n},t.onUpdate)}},t.onQueryResponseAdd=function(){var e=[];t.state.queryResponses.forEach((function(t){e.push(t)})),e.push({send:"",expect:"",startTLS:!1}),t.setState({queryResponses:e},t.onUpdate)},t}return Object(f.c)(t,e),t.prototype.render=function(){var e=this,t=this.state.queryResponses,n=this.props.isEditor;return m.a.createElement(j.Field,{label:"Query/Response",description:"The query sent in the TCP probe and the expected associated response. StartTLS upgrades TCP connection to TLS.",disabled:!n},m.a.createElement(j.Container,null,m.a.createElement(j.List,{items:t,renderItem:function(t,r){return m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Input,{type:"text",placeholder:"response to expect",value:t.expect,onChange:e.onExpectChange(r),disabled:!n}),m.a.createElement(j.TextArea,{type:"text",placeholder:"data to send",rows:1,value:t.send,onChange:e.onSendChange(r),disabled:!n}),m.a.createElement(j.HorizontalGroup,null,m.a.createElement("span",null,"StartTLS"),m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{title:"StartTLS",value:t.startTLS,onChange:e.onStartTLSChange(r),disabled:!n}))),m.a.createElement(j.IconButton,{name:"minus-circle",onClick:e.onQueryResponseDelete(r),disabled:!n}))}}),m.a.createElement(j.IconButton,{name:"plus-circle",onClick:this.onQueryResponseAdd,disabled:!n})))},t}(v.PureComponent),Se=function(e){var t=e.queryParam,n=e.onChange,r=e.onDelete;return m.a.createElement(m.a.Fragment,null,m.a.createElement(j.Input,{label:"Key",type:"text",placeholder:"Key",value:t.name,onChange:function(e){return n(Object(f.a)(Object(f.a)({},t),{name:e.target.value}))}}),m.a.createElement(j.Input,{label:"Value",type:"text",placeholder:"Value",value:t.value,onChange:function(e){return n(Object(f.a)(Object(f.a)({},t),{value:e.target.value}))}}),m.a.createElement(j.IconButton,{name:"minus-circle",onClick:r}))};function Te(e){return e.search.replace("?","").split("&").map((function(e){var t=Object(f.f)(e.split("="),2);return{name:t[0],value:t[1]}}))}var Ce=function(e){return e.reduce((function(e,t,n){var r,a;return e+(0!==n?"&":"")+(null!==(r=t.name)&&void 0!==r?r:"")+"="+(null!==(a=t.value)&&void 0!==a?a:"")}),"")};function we(e,t){var n;switch(t.type){case"change":return e.map((function(e,n){return n===t.index&&t.queryParam?t.queryParam:e}));case"add":return Object(f.g)(e,[{name:"",value:""}]);case"delete":return null==t.index?e:Object(f.g)(e.slice(0,t.index),e.slice(t.index+1));case"sync":return Te(null!==(n=t.target)&&void 0!==n?n:new URL(""));default:return e}}var je,Oe,Ae,ke=function(e){var t=e.target,n=e.onChange,r=e.className,a=Object(f.f)(Object(v.useReducer)(we,t,Te),2),o=a[0],i=a[1],s=Object(f.f)(Object(v.useState)(!1),2),l=s[0],c=s[1];Object(v.useEffect)((function(){if(l){var e=Ce(o);t.search=e,n(t.toString()),c(!1)}}),[l]),Object(v.useEffect)((function(){var e=Ce(o);t.search!=="?"+e&&i({type:"sync",target:t})}),[t]);var u=function(e){return function(){i({type:"delete",index:e}),c(!0)}};return m.a.createElement("div",{className:r},m.a.createElement(j.Field,{label:"Query params",description:"Query params for the target URL"},m.a.createElement("div",{className:Object(A.css)(je||(je=Object(f.e)(["\n            display: grid;\n            grid-template-columns: auto auto auto;\n            grid-gap: 0.25rem;\n            align-items: center;\n          "],["\n            display: grid;\n            grid-template-columns: auto auto auto;\n            grid-gap: 0.25rem;\n            align-items: center;\n          "])))},m.a.createElement(j.Label,null,"Key"),m.a.createElement(j.Label,null,"Value"),m.a.createElement("div",null),o.map((function(e,t){return m.a.createElement(Se,{queryParam:e,key:t,onDelete:u(t),onChange:function(e){i({type:"change",queryParam:e,index:t}),c(!0)}})})))),m.a.createElement(j.Button,{variant:"secondary",size:"sm",onClick:function(){return i({type:"add"})}},"Add query param"))},xe=function(e){var t=e.target,n=e.typeOfCheck,r=e.disabled,a=e.checkSettings,o=e.onChange,i=function(e){if(!e)return{text:"",example:""};var t;switch(e){case l.HTTP:t={text:"Full URL to send requests to",example:"https://grafana.com/"};break;case l.PING:t={text:"Hostname to ping",example:"grafana.com"};break;case l.DNS:t={text:"Name of record to query",example:"grafana.com"};break;case l.TCP:t={text:"Host:port to connect to",example:"grafana.com:80"}}return t}(n),s=Object(f.f)(Object(v.useState)(t),2),c=s[0],u=s[1];Object(v.useEffect)((function(){o(c)}),[c]);var p=function(e){try{return new URL(e)}catch(e){return}}(c);return m.a.createElement(m.a.Fragment,null,m.a.createElement(j.Field,{label:"Target",description:i.text,disabled:r,invalid:!H(T(a),t)},m.a.createElement(j.Input,{type:"string",placeholder:i.example,value:t,onChange:function(e){return u(e.target.value)},required:!0})),n===l.HTTP&&p&&m.a.createElement(ke,{target:p,onChange:function(e){return u(e)},className:Object(A.css)(Oe||(Oe=Object(f.e)(["\n            padding-left: 1rem;\n            margin-bottom: 1rem;\n          "],["\n            padding-left: 1rem;\n            margin-bottom: 1rem;\n          "])))}))},Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showDeleteModal:!1,check:Object(f.a)({},t.props.check),showOptions:!1,probesLoading:!0,probes:[]},t.showDeleteCheckModal=function(e){return function(){t.setState({showDeleteModal:e})}},t.onRemoveCheck=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t;return Object(f.d)(this,(function(n){return e=this.props.check.id||0,this.props.check.id?(t=this.props.instance.deleteCheck(e),console.log("Remove Check",e,t),this.props.onReturn(!0),[2]):[2]}))}))},t.onLabelsUpdate=function(e){var n=Object(f.a)({},t.state.check);n.labels=e,t.setState({check:n})},t.onProbesUpdate=function(e){var n=Object(f.a)({},t.state.check);n.probes=e,t.setState({check:n})},t.onSettingsUpdate=function(e){var n=Object(f.a)({},t.state.check);n.settings=e,t.setState({check:n})},t.onSetType=function(e){var n=Object(f.a)({},t.state.check);if(e.value){var r=e.value,a=C(r);a&&(n.settings=a,t.setState({check:n,typeOfCheck:r}))}},t.onJobUpdate=function(e){var n=Object(f.a)({},t.state.check);n.job=e.target.value,t.setState({check:n})},t.onTargetUpdate=function(e){var n=Object(f.a)({},t.state.check);n.target=e,t.setState({check:n})},t.onFrequencyUpdate=function(e){var n=Object(f.a)({},t.state.check);n.frequency=1e3*e.target.valueAsNumber,t.setState({check:n})},t.onTimeoutUpdate=function(e){var n=Object(f.a)({},t.state.check);n.timeout=1e3*e.target.valueAsNumber,t.setState({check:n})},t.onSave=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t,n,r,a;return Object(f.d)(this,(function(o){switch(o.label){case 0:e=this.props.instance,t=this.state.check,o.label=1;case 1:return o.trys.push([1,6,,7]),t.id?[4,e.updateCheck(t)]:[3,3];case 2:return o.sent(),[3,5];case 3:return[4,e.addCheck(t)];case 4:o.sent(),o.label=5;case 5:return this.props.onReturn(!0),[3,7];case 6:return n=o.sent(),this.setState({error:{status:n.status,message:null!==(a=null===(r=n.data)||void 0===r?void 0:r.message)&&void 0!==a?a:"Something went wrong"}}),[3,7];case 7:return[2]}}))}))},t.onEnableChange=function(e){var n=Object(f.a)({},t.state.check);n.enabled=!n.enabled,t.setState({check:n})},t.onBack=function(){t.props.onReturn(!1)},t.onToggleOptions=function(e){t.setState({showOptions:!t.state.showOptions})},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r;return Object(f.d)(this,(function(a){switch(a.label){case 0:return e=this.props.instance,t=this.state.check,[4,e.listProbes()];case 1:return n=a.sent(),r=T(t.settings),this.setState({typeOfCheck:r,probesLoading:!1,probes:n}),[2]}}))}))},t.prototype.render=function(){var e=this.state,t=e.check,n=e.showDeleteModal,r=e.probes,a=e.probesLoading,o=e.typeOfCheck,i=e.showOptions,s=e.error;if(!t||a)return m.a.createElement("div",null,"Loading...");var u="Edit Check";t.id||(u="Add Check");var p=S(c.EDITOR),d=[{label:"HTTP",value:l.HTTP},{label:"PING",value:l.PING},{label:"DNS",value:l.DNS},{label:"TCP",value:l.TCP}];return m.a.createElement("div",null,m.a.createElement(j.Legend,null,u),m.a.createElement("div",null,m.a.createElement(j.HorizontalGroup,{justify:"flex-start",spacing:"md"},m.a.createElement(j.Field,{label:"Check Type",disabled:!!t.id},m.a.createElement(j.Select,{value:o,options:d,onChange:this.onSetType,width:30})),m.a.createElement(j.Field,{label:"Enabled",disabled:!p},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{value:t.enabled,onChange:this.onEnableChange,disabled:!p})))),m.a.createElement(j.Field,{label:"Job Name",description:"Name used for job label",disabled:!p,invalid:!V(t.job)},m.a.createElement(j.Input,{type:"string",placeholder:"jobName",value:t.job,onChange:this.onJobUpdate})),m.a.createElement(xe,{target:t.target,typeOfCheck:o,checkSettings:t.settings,disabled:!p,onChange:this.onTargetUpdate}),m.a.createElement("div",null,m.a.createElement(j.Field,{label:"Probe Locations",description:"Select the locations where this target should be monitored from",disabled:!p,invalid:!K(t.probes)},m.a.createElement(_e,{probes:t.probes,availableProbes:r,onUpdate:this.onProbesUpdate,isEditor:p}))),m.a.createElement(j.Collapse,{label:"Options",collapsible:!0,onToggle:this.onToggleOptions,isOpen:i},m.a.createElement(j.Field,{label:"Frequency",description:"How frequently the check should run.",disabled:!p,invalid:!G(t.frequency)},m.a.createElement(j.Input,{label:"Frequency",type:"number",step:10,value:t.frequency/1e3||60,onChange:this.onFrequencyUpdate,suffix:"seconds",max:120,min:10,width:30})),m.a.createElement(j.Field,{label:"Timeout",description:"Maximum execution time for a check",disabled:!p,invalid:!q(t.timeout)},m.a.createElement(j.Input,{label:"Timeout",type:"number",step:.1,value:t.timeout/1e3||5,onChange:this.onTimeoutUpdate,suffix:"seconds",max:10,min:1,width:30})),m.a.createElement(j.Field,{label:"Labels",description:"Custom labels to be included with collected metrics and logs.",disabled:!p,invalid:!z(t.labels)},m.a.createElement(Y,{labels:t.labels,onUpdate:this.onLabelsUpdate,isEditor:p,type:"Label",limit:5})),m.a.createElement("br",null),m.a.createElement("h3",{className:"page-heading"},o.toLocaleUpperCase()," Settings"),m.a.createElement(Re,{settings:t.settings,typeOfCheck:o||l.HTTP,onUpdate:this.onSettingsUpdate,isEditor:p}))),m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Button,{onClick:this.onSave,disabled:!p||!F(t)},"Save ",F(t)),t.id&&m.a.createElement(j.Button,{variant:"destructive",onClick:this.showDeleteCheckModal(!0),disabled:!p},"Delete Check"),m.a.createElement(j.ConfirmModal,{isOpen:n,title:"Delete check",body:"Are you sure you want to delete this check?",confirmText:"Delete check",onConfirm:this.onRemoveCheck,onDismiss:this.showDeleteCheckModal(!1)}),m.a.createElement("a",{onClick:this.onBack},"Back")),s&&m.a.createElement("div",{className:Object(A.css)(Ae||(Ae=Object(f.e)(["\n              margin-top: 1rem;\n            "],["\n              margin-top: 1rem;\n            "])))},m.a.createElement(j.Alert,{title:"Save failed",severity:"error"},s.status+": "+s.message)))},t}(v.PureComponent),Re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onUpdate=function(){t.props.onUpdate(t.state.settings)},t.onJsonChange=function(e){var n={};n[t.props.typeOfCheck]=JSON.parse(e.target.value),t.setState({settings:n},t.onUpdate)},t.onSettingsChange=function(e){t.setState({settings:e},t.onUpdate)},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){var e=this.props.settings;this.setState({settings:e})},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.settings;t.typeOfCheck!==e.typeOfCheck&&this.setState({settings:n})},t.prototype.render=function(){var e=this.state.settings;if(!e)return m.a.createElement("div",null,"Loading....");var t=this.props.isEditor;switch(this.props.typeOfCheck){case l.PING:return m.a.createElement(ne,{settings:e,onUpdate:this.onSettingsChange,isEditor:t});case l.HTTP:return m.a.createElement(oe,{settings:e,onUpdate:this.onSettingsChange,isEditor:t});case l.DNS:return m.a.createElement(ge,{settings:e,onUpdate:this.onSettingsChange,isEditor:t});case l.TCP:return m.a.createElement(ye,{settings:e,onUpdate:this.onSettingsChange,isEditor:t})}},t}(v.PureComponent),_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={probes:t.props.probes||[],probeStr:t.props.probes.join(",")},t.onChange=function(e){var n,r,a=[];try{for(var o=Object(f.h)(e.values()),i=o.next();!i.done;i=o.next()){var s=i.value;s.value&&a.push(s.value)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}var l=a.join(",");t.setState({probes:a,probeStr:l},t.onUpdate)},t.onUpdate=function(){t.props.onUpdate(t.state.probes)},t.onAllLocations=function(){var e,n,r=[];try{for(var a=Object(f.h)(t.props.availableProbes),o=a.next();!o.done;o=a.next()){var i=o.value;i.id&&r.push(i.id)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}var s=r.join(",");t.setState({probes:r,probeStr:s},t.onUpdate)},t.onClearLocations=function(){t.setState({probes:[],probeStr:""},t.onUpdate)},t}return Object(f.c)(t,e),t.prototype.render=function(){var e,t,n,r,a=this.state.probes,o=this.props,i=o.availableProbes,s=o.isEditor,l=[];try{for(var c=Object(f.h)(i),u=c.next();!u.done;u=c.next()){var p=u.value;l.push({label:p.name,value:p.id,description:p.online?"Online":"Offline"})}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}var d=[],h=function(e){var t=l.find((function(t){return t.value===e}));t&&d.push(t)};try{for(var v=Object(f.h)(a),b=v.next();!b.done;b=v.next()){h(p=b.value)}}catch(e){n={error:e}}finally{try{b&&!b.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}return m.a.createElement("div",null,m.a.createElement(j.MultiSelect,{options:l,value:d,onChange:this.onChange,disabled:!s,invalid:!K(a),closeMenuOnSelect:!1}),m.a.createElement(j.Container,{margin:"xs"},m.a.createElement(j.HorizontalGroup,{spacing:"md"},m.a.createElement(j.Button,{onClick:this.onAllLocations,disabled:!s,variant:"secondary",size:"sm"},"All"),m.a.createElement(j.Button,{onClick:this.onClearLocations,disabled:!s,variant:"secondary",size:"sm",type:"reset"},"Clear"))))},t}(v.PureComponent),Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lastUpdate:0,value:{numeric:0,title:"Uptime",text:"loading..."},points:[]},t}return Object(f.c)(t,e),t.prototype.filterString=function(e,t){var n=[];for(var r in e){var a=e[r],o=t[r];n.push(a+'="'+o+'"')}return n.join(",")},t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r;return Object(f.d)(this,(function(a){return e=this.props,t=e.labelNames,n=e.labelValues,r=this.filterString(t,n),this.setState({filter:r},this.queryUptime),[2]}))}))},t.prototype.componentDidUpdate=function(e){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r;return Object(f.d)(this,(function(a){return e=this.props,t=e.labelNames,n=e.labelValues,r=this.filterString(t,n),this.state.filter!==r&&this.setState({filter:r},this.queryUptime),[2]}))}))},t.prototype.queryUptime=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,l,c,u=this;return Object(f.d)(this,(function(d){switch(d.label){case 0:return e=this.props,t=e.ds,n=e.sparkline,(r=this.state.filter)?(a=Object(p.getBackendSrv)(),o=Math.floor(Date.now()/1e3),[4,a.datasourceRequest({method:"GET",url:t.url+"/api/v1/query",params:{query:"sum(rate(probe_success_sum{"+r+"}[3h])) / sum(rate(probe_success_count{"+r+"}[3h]))",time:o}})]):[2];case 1:return(i=d.sent()).ok?(s={numeric:0,title:"Success rate",text:"loading..."},i.data.data.result.length<1?(s.text="N/A",this.setState({value:s,lastUpdate:o}),[2]):(l=100*parseFloat(i.data.data.result[0].value[1]),c="green",l<99&&(c="red"),s.color=c,s.numeric=l,s.text=l.toFixed(2)+"%",this.setState({value:s,lastUpdate:o},(function(){n&&u.queryHistory()})),[2])):(console.log(i),[2])}}))}))},t.prototype.queryHistory=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,l,c,u,d;return Object(f.d)(this,(function(h){switch(h.label){case 0:return e=this.props.ds,(t=this.state.filter)?(n=Object(p.getBackendSrv)(),r=this.state.lastUpdate+1,[4,n.datasourceRequest({method:"POST",url:e.url+"/api/v1/query_range",params:{query:"100 * sum(rate(probe_success_sum{"+t+"}[10m])) / sum(rate(probe_success_count{"+t+"}[10m]))",start:r-10800,end:r,step:600}})]):[2];case 1:if(!(a=h.sent()).ok)return console.log(a),[2];if(o=[],a.data.data.result.length<1)return console.log(a.data),[2];i=0;try{for(s=Object(f.h)(a.data.data.result[0].values),l=s.next();!l.done;l=s.next())c=l.value,o.push([i,parseFloat(c[1])]),i++}catch(e){u={error:e}}finally{try{l&&!l.done&&(d=s.return)&&d.call(s)}finally{if(u)throw u.error}}return this.setState({points:o,lastUpdate:r+1}),[2]}}))}))},t.prototype.render=function(){var e=this.state,t=e.value,n=e.points,r=this.props,a=r.height,o=r.width,i=r.sparkline,s=r.onClick,l=void 0;return i&&n.length>0&&(l={yMin:0,yMax:150,data:n}),m.a.createElement(j.Container,null,m.a.createElement(j.BigValue,{theme:p.config.theme,colorMode:j.BigValueColorMode.Value,height:a,width:o,graphMode:j.BigValueGraphMode.Area,value:t,sparkline:l,onClick:s}))},t}(v.PureComponent),Be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={iconName:"heart",className:"paused"},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){return Object(f.d)(this,(function(e){switch(e.label){case 0:return this.props.check.enabled?[4,this.queryUptime()]:(this.setState({iconName:"pause"}),[2]);case 1:return e.sent(),[2]}}))}))},t.prototype.componentDidUpdate=function(e){return Object(f.b)(this,void 0,void 0,(function(){return Object(f.d)(this,(function(t){switch(t.label){case 0:return this.props.check.id===e.check.id?[2]:this.props.check.enabled?[4,this.queryUptime()]:(this.setState({iconName:"pause"}),[2]);case 1:return t.sent(),[2]}}))}))},t.prototype.queryUptime=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,l,c;return Object(f.d)(this,(function(u){switch(u.label){case 0:return e=this.props,t=e.ds,n=e.check,r='instance="'+n.target+'", job="'+n.job+'"',a=Object(p.getBackendSrv)(),o=Math.floor(Date.now()/1e3),[4,a.datasourceRequest({method:"GET",url:t.url+"/api/v1/query",params:{query:"sum(probe_success{"+r+"}) / count(probe_success{"+r+"})",time:o}})];case 1:return(i=u.sent()).ok?(s="heart",l="ok",i.data.data.result.length<1?(s="question-circle",l="paused",this.setState({iconName:s,className:l}),[2]):((c=100*parseFloat(i.data.data.result[0].value[1]))<99&&(l="warning"),c<50&&(l="critical",s="heart-break"),this.setState({iconName:s,className:l}),[2])):(console.log(i),[2])}}))}))},t.prototype.render=function(){var e=this.state,t=e.iconName,n=e.className;return m.a.createElement(j.Icon,{name:t,size:"xxl",className:"alert-rule-item__icon alert-state-"+n})},t}(v.PureComponent),Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={checks:[],filteredChecks:[],addNew:!1,typeFilter:"all",searchFilter:"",totalPages:1,currentPage:1,checksPerPage:t.props.checksPerPage||15,loading:!0},t.onSelectCheck=function(e){Object(p.getLocationSrv)().update({partial:!0,query:{id:e}})},t.showDashboard=function(e){return function(n){n.stopPropagation();var r=t.props.instance,a=Object.keys(e.settings)[0],o=w(a,r.api);if(o){var i="d/"+o.uid,s={"var-instance":e.target,"var-job":e.job};Object(p.getLocationSrv)().update({partial:!1,path:i,query:s})}else console.log("dashboard not found.",a)}},t.onTypeFilterChanged=function(e){e.value&&t.setState({typeFilter:e.value,currentPage:1},t.filterChecks)},t.onFilterByLabel=function(e,n){return function(r){r.stopPropagation(),t.setState({searchFilter:e+"="+n,currentPage:1},t.filterChecks)}},t.onSearchFilterChange=function(e){t.setState({searchFilter:e},t.filterChecks)},t.changePage=function(e){t.setState({currentPage:e},t.filterChecks)},t.onAddNew=function(){t.setState({addNew:!0})},t.onRefresh=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t;return Object(f.d)(this,(function(n){switch(n.label){case 0:return[4,this.props.instance.api.listChecks()];case 1:return e=n.sent(),t=e.sort((function(e,t){return t.job.localeCompare(e.job)})),this.setState({checks:t},this.filterChecks),[2]}}))}))},t.onGoBack=function(e){t.setState({addNew:!1}),e&&t.onRefresh(),Object(p.getLocationSrv)().update({partial:!0,query:{id:""}})},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,l;return Object(f.d)(this,(function(c){switch(c.label){case 0:return e=this.props,t=e.instance,n=e.id,r=this.state.checksPerPage,[4,t.api.listChecks()];case 1:return a=c.sent(),o=a.sort((function(e,t){return t.job.localeCompare(e.job)})),i=Math.ceil(o.length/r),s=n?parseInt(n,10):-1,l=a.find((function(e){return e.id===s})),this.setState({checks:o,check:l,totalPages:i,filteredChecks:o.slice(0,r),loading:!1}),[2]}}))}))},t.prototype.componentDidUpdate=function(e){if(this.props.id!==e.id){var t=this.props.id,n=t?parseInt(t,10):-1,r=this.state.checks.find((function(e){return e.id===n}));this.setState({check:r})}},t.prototype.formatLabels=function(e){var t=this;return e.map((function(e){return m.a.createElement("div",null,m.a.createElement("a",{onClick:t.onFilterByLabel(e.name,e.value)},e.name,"=",e.value))}))},t.prototype.filterChecks=function(){var e=this.state,t=e.typeFilter,n=e.searchFilter,r=e.currentPage,a=e.checks,o=e.checksPerPage,i=a.filter((function(e){return"all"===t||Object.keys(e.settings)[0]===t})).filter((function(e){var t,r,a,o;if(!n)return!0;if(n.split("=").length>1){var i=n.split("=",2),s=i[0],l=i[1];switch(s){case"target":return e.target.match(l);case"job":return e.job.match(l);default:try{for(var c=Object(f.h)(e.labels),u=c.next();!u.done;u=c.next()){if((h=u.value).name===s&&h.value.match(l))return!0}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}}return!1}if(e.job.match(n)||e.target.match(n))return!0;try{for(var p=Object(f.h)(e.labels),d=p.next();!d.done;d=p.next()){var h;if((h=d.value).name.match(n)||h.value.match(n))return!0}}catch(e){a={error:e}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}return!1})),s=Math.ceil(i.length/o);this.setState({totalPages:s,filteredChecks:i.slice(o*(r-1),r*o)})},t.prototype.renderNoChecks=function(){return m.a.createElement(j.InfoBox,{title:"Grafana Cloud Synthetic Monitoring",url:"https://grafana.com/docs/grafana-cloud/synthetic-monitoring/"},m.a.createElement("p",null,"This account does not currently have any checks configured. Click the button below to start monitoring your services with Grafana Cloud."),S(c.EDITOR)&&m.a.createElement(j.Button,{variant:"primary",onClick:this.onAddNew},"New Check"))},t.prototype.renderCheckList=function(){var e=this,t=this.state,n=t.checks,r=t.typeFilter,a=t.searchFilter,o=t.filteredChecks,i=t.totalPages,s=t.currentPage,u=this.props.instance;if(!n)return null;if(0===n.length)return this.renderNoChecks();var p=[{label:"All",value:"all"},{label:"HTTP",value:l.HTTP},{label:"PING",value:l.PING},{label:"DNS",value:l.DNS},{label:"TCP",value:l.TCP}],d=u.api.getMetricsDS();return m.a.createElement("div",null,m.a.createElement("div",{className:"page-action-bar"},m.a.createElement("div",{className:"gf-form gf-form--grow"},m.a.createElement(j.Input,{autoFocus:!0,prefix:m.a.createElement(j.Icon,{name:"search"}),width:40,type:"text",value:a?Object(h.unEscapeStringFromRegex)(a):"",onChange:function(t){return e.onSearchFilterChange(Object(h.escapeStringForRegex)(t.currentTarget.value))},placeholder:"search checks"})),m.a.createElement("div",{className:"gf-form"},m.a.createElement("label",{className:"gf-form-label"},"Types"),m.a.createElement("div",{className:"width-13"},m.a.createElement(j.Select,{options:p,onChange:this.onTypeFilterChanged,value:r}))),m.a.createElement("div",{className:"page-action-bar__spacer"}),S(c.EDITOR)&&m.a.createElement(j.Button,{variant:"secondary",onClick:this.onAddNew},"New Check")),m.a.createElement("section",{className:"card-section card-list-layout-list"},m.a.createElement("ol",{className:"card-list"},o.map((function(t){var n=t.id||0;if(t.id){var r=Object.keys(t.settings)[0];return m.a.createElement("li",{className:"card-item-wrapper"},m.a.createElement("a",{className:"card-item",onClick:function(){return e.onSelectCheck(n)}},m.a.createElement(j.HorizontalGroup,{justify:"space-between"},m.a.createElement("div",{className:"card-item-body"},m.a.createElement("figure",{className:"card-item-figure"},m.a.createElement(Be,{check:t,ds:d})),m.a.createElement(j.VerticalGroup,null,m.a.createElement("div",{className:"card-item-name"},t.target),m.a.createElement("div",{className:"card-item-sub-name"},t.job))),m.a.createElement(j.HorizontalGroup,{justify:"flex-end"},m.a.createElement("div",{className:"card-item-header"},m.a.createElement("div",{className:"card-item-type"},r),e.formatLabels(t.labels)),m.a.createElement(j.Container,{margin:"lg"},m.a.createElement("a",{onClick:e.showDashboard(t)},m.a.createElement(j.Icon,{name:"apps",size:"xl"}))),m.a.createElement(Me,{labelNames:["instance","job"],labelValues:[t.target,t.job],ds:d,height:70,width:150,sparkline:!1})))))}})))),i>1&&m.a.createElement(j.Pagination,{numberOfPages:i,currentPage:s,onNavigate:this.changePage}))},t.prototype.render=function(){var e=this.props.instance,t=this.state,n=t.check,a=t.addNew;if(t.loading)return m.a.createElement("div",null,"Loading...");if(n)return m.a.createElement(Ie,{check:n,instance:e.api,onReturn:this.onGoBack});if(a){var o={job:"",target:"",frequency:6e4,timeout:2500,enabled:!0,labels:[],probes:[],settings:{ping:{ipVersion:r.V4,dontFragment:!1}}};return m.a.createElement(Ie,{check:o,instance:e.api,onReturn:this.onGoBack})}return m.a.createElement("div",null,this.renderCheckList())},t}(v.PureComponent),De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showDeleteModal:!1,showTokenModal:!1,showResetModal:!1,probeToken:""},t.showDeleteProbeModal=function(e){return function(){t.setState({showDeleteModal:e})}},t.showTokenModal=function(e){return function(){t.setState({showTokenModal:e})}},t.showResetModal=function(e){return function(){t.setState({showResetModal:e})}},t.onRemoveProbe=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t;return Object(f.d)(this,(function(n){return e=this.props.probe.id||0,this.props.probe.id?(t=this.props.instance.deleteProbe(e),console.log("Remove Probe",e,t),this.props.onReturn(!0),[2]):[2]}))}))},t.onLabelsUpdate=function(e){var n=Object(f.a)({},t.state.probe);n.labels=e,t.setState({probe:n})},t.onLatUpdate=function(e){var n=Object(f.a)({},t.state.probe);n.latitude=e.target.valueAsNumber,t.setState({probe:n})},t.onLongUpdate=function(e){var n=Object(f.a)({},t.state.probe);n.longitude=e.target.valueAsNumber,t.setState({probe:n})},t.onRegionUpdate=function(e){var n=Object(f.a)({},t.state.probe);n.region=e.target.value,t.setState({probe:n})},t.onNameUpdate=function(e){var n=Object(f.a)({},t.state.probe);n.name=e.target.value,t.setState({probe:n})},t.onSave=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t,n;return Object(f.d)(this,(function(r){switch(r.label){case 0:return e=this.props.instance,(t=this.state.probe)?t.id?(console.log("UPDATE",t,e),[4,e.updateProbe(t)]):[3,2]:[2];case 1:return n=r.sent(),console.log("got",n),this.props.onReturn(!0),[3,4];case 2:return console.log("ADD",t),[4,e.addProbe(t)];case 3:n=r.sent(),this.setState({showTokenModal:!0,probeToken:n.token}),r.label=4;case 4:return[2]}}))}))},t.onResetToken=function(){return Object(f.b)(t,void 0,void 0,(function(){var e,t,n;return Object(f.d)(this,(function(r){switch(r.label){case 0:return e=this.props.instance,t=Object(f.a)({},this.props.probe),[4,e.resetProbeToken(t)];case 1:return n=r.sent(),this.setState({showTokenModal:!0,showResetModal:!1,probeToken:n.token}),[2]}}))}))},t.onBack=function(){t.props.onReturn(!1)},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){var e;return Object(f.d)(this,(function(t){return e=Object(f.a)({},this.props.probe),this.setState({probe:e}),[2]}))}))},t.prototype.isValid=function(){var e,t,n=this.state.probe;if(!n)return!1;if(""===n.name)return console.log("probe name must be set"),!1;if(n.name.length>32)return console.log("probe name must be less than 32 characters"),!1;if(n.latitude<-90||n.latitude>90)return console.log("probe latitude must be between -90 and 90"),!1;if(n.longitude<-180||n.longitude>180)return console.log("probe longitude must be between -180 and 180"),!1;if(""===n.region)return console.log("probe region must be set"),!1;if(n.labels.length>3)return console.log("probes cannot have more than 3 labels"),!1;try{for(var r=Object(f.h)(n.labels),a=r.next();!a.done;a=r.next()){var o=a.value;if(""===o.name||""===o.value)return console.log("label name and value must be set"),!1;if(!o.name.match(/^[a-zA-Z0-9_]*$/))return console.log("label name can only contain a-zA-Z0-9_"),!1;if(o.name.length>32)return console.log("label name must be less than 32 chars"),!1;if(o.value.length>64)return console.log("label name must be less than 64 chars"),!1}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return!0},t.prototype.renderStatus=function(){var e=this.state,t=e.probe,n=e.showResetModal,r=this.props.instance;if(t){var a=!t.public&&S(c.EDITOR),o="Offline",i="heart-break",s="red";return t.online&&(o="Online",i="heart",s="green"),m.a.createElement(j.Container,{margin:"md"},m.a.createElement(j.Legend,null,"Status: ",m.a.createElement(j.Badge,{color:s,icon:i,text:o})),!t.public&&m.a.createElement(j.Container,null,m.a.createElement(j.Button,{variant:"destructive",onClick:this.showResetModal(!0),disabled:!a},"Reset Access Token"),m.a.createElement(j.ConfirmModal,{isOpen:n,title:"Reset Probe Access Token",body:"Are you sure you want to reset the access token for this Probe?",confirmText:"Reset Token",onConfirm:this.onResetToken,onDismiss:this.showResetModal(!1)})),m.a.createElement("br",null),m.a.createElement(Me,{labelNames:["probe"],labelValues:[t.name],ds:r.getMetricsDS(),height:200,width:300,sparkline:!0}))}},t.prototype.render=function(){var e=this.state,t=e.probe,n=e.showDeleteModal,r=e.showTokenModal,a=e.probeToken;if(!t)return m.a.createElement("div",null,"Loading...");var o="Configuration";t.id||(o="Add Probe");var i=!t.public&&S(c.EDITOR);return m.a.createElement(j.HorizontalGroup,{align:"flex-start"},m.a.createElement(j.Container,null,m.a.createElement(j.Legend,null,o),m.a.createElement(j.Container,{margin:"md"},m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Probe Name",description:"Unique name of probe",disabled:!i},m.a.createElement(j.Input,{type:"string",value:t.name,onChange:this.onNameUpdate})),m.a.createElement(j.Field,{label:"Public",description:"Public probes are run by Grafana Labs and can be used by all users",disabled:!i},m.a.createElement(j.Container,{padding:"sm"},m.a.createElement(j.Switch,{value:t.public,disabled:!1}))))),m.a.createElement(j.Container,{margin:"md"},m.a.createElement("h3",{className:"page-heading"},"Location information"),m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Latitude",description:"Latitude coordinates of this probe",disabled:!i},m.a.createElement(j.Input,{label:"Latitude",type:"number",placeholder:"0.0",value:(null==t?void 0:t.latitude)||0,onChange:this.onLatUpdate})),m.a.createElement(j.Field,{label:"Longitude",description:"Longitude coordinates of this probe",disabled:!i},m.a.createElement(j.Input,{label:"Longitude",type:"number",placeholder:"0.0",value:(null==t?void 0:t.longitude)||0,onChange:this.onLongUpdate}))),m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Field,{label:"Region",description:"Latitude coordinates of this probe",disabled:!i},m.a.createElement(j.Input,{label:"Region",type:"string",placeholder:"region",value:t.region,onChange:this.onRegionUpdate})))),m.a.createElement(j.Container,{margin:"md"},m.a.createElement("h3",{className:"page-heading"},"Labels"),m.a.createElement(Y,{labels:t.labels,onUpdate:this.onLabelsUpdate,isEditor:i,type:"Label",limit:3})),m.a.createElement(j.Container,{margin:"md"},m.a.createElement(j.HorizontalGroup,null,m.a.createElement(j.Button,{onClick:this.onSave,disabled:!i||!this.isValid()},"Save"),t.id&&m.a.createElement(j.Button,{variant:"destructive",onClick:this.showDeleteProbeModal(!0),disabled:!i},"Delete Probe"),m.a.createElement(j.ConfirmModal,{isOpen:n,title:"Delete Probe",body:"Are you sure you want to delete this Probe?",confirmText:"Delete Probe",onConfirm:this.onRemoveProbe,onDismiss:this.showDeleteProbeModal(!1)}),m.a.createElement("a",{onClick:this.onBack},"Back"))),m.a.createElement(j.Modal,{isOpen:r,title:"Probe Authentication Token",icon:"lock",onDismiss:t.id?this.showTokenModal(!1):this.onBack},a)),t.id&&this.renderStatus())},t}(v.PureComponent),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={probes:[],addNew:!1},t.onSelectProbe=function(e){Object(p.getLocationSrv)().update({partial:!0,query:{id:e}})},t.onAddNew=function(){t.setState({addNew:!0})},t.onRefresh=function(){return Object(f.b)(t,void 0,void 0,(function(){var e;return Object(f.d)(this,(function(t){switch(t.label){case 0:return[4,this.props.instance.api.listProbes()];case 1:return e=t.sent(),this.setState({probes:e}),[2]}}))}))},t.onGoBack=function(e){console.log("go back"),t.setState({addNew:!1}),e&&t.onRefresh(),Object(p.getLocationSrv)().update({partial:!0,query:{id:""}})},t}return Object(f.c)(t,e),t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){var e,t,n,r,a,o;return Object(f.d)(this,(function(i){switch(i.label){case 0:return e=this.props,t=e.instance,n=e.id,[4,t.api.listProbes()];case 1:return r=i.sent(),a=n?parseInt(n,10):-1,o=r.find((function(e){return e.id===a})),this.setState({probes:r,probe:o}),[2]}}))}))},t.prototype.componentDidUpdate=function(e){if(this.props.id!==e.id){var t=this.props.id,n=t?parseInt(t,10):-1,r=this.state.probes.find((function(e){return e.id===n}));this.setState({probe:r})}},t.prototype.labelsToString=function(e){return e.map((function(e){return e.name+"="+e.value})).join(" ")},t.prototype.render=function(){var e=this.props.instance,t=this.state,n=t.probe,r=t.addNew;if(!e)return m.a.createElement("div",null,"Loading...");if(n)return m.a.createElement(De,{probe:n,instance:e.api,onReturn:this.onGoBack});if(r){return m.a.createElement(De,{probe:{name:"",public:!1,latitude:0,longitude:0,region:"",labels:[],online:!1,onlineChange:0},instance:e.api,onReturn:this.onGoBack})}return m.a.createElement("div",null,this.renderProbeList())},t.prototype.renderProbeList=function(){var e=this,t=this.state.probes,n=this.props.instance;return t?m.a.createElement("div",null,S(c.EDITOR)&&m.a.createElement(j.HorizontalGroup,{justify:"flex-end"},m.a.createElement(j.Button,{onClick:this.onAddNew},"New")),t.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t){var r=t.id||0;if(t.id){var a="Offline",o="heart-break",i="red";return t.online&&(a="Online",o="heart",i="green"),m.a.createElement("div",{key:r,className:"add-data-source-item",onClick:function(){return e.onSelectProbe(r)}},m.a.createElement("div",{className:"add-data-source-item-text-wrapper"},m.a.createElement("span",{className:"add-data-source-item-text"},t.name),m.a.createElement("span",{className:"add-data-source-item-desc"},m.a.createElement(j.Badge,{color:i,icon:o,text:a}),m.a.createElement("div",null,e.labelsToString(t.labels)))),m.a.createElement(Me,{labelNames:["probe"],labelValues:[t.name],ds:n.api.getMetricsDS(),height:60,width:150,sparkline:!1}),m.a.createElement("div",{className:"add-data-source-item-actions"},m.a.createElement(j.Button,null,"Select")))}})),m.a.createElement("br",null)):null},t}(v.PureComponent),Ue=function(e){function t(t){var n=e.call(this,t)||this;return n.state={settings:Object.values(p.config.datasources).filter((function(e){return"synthetic-monitoring-datasource"===e.type}))},n}return Object(f.c)(t,e),t.prototype.loadInstances=function(){var e,t;return Object(f.b)(this,void 0,void 0,(function(){var n,r,a,o,i;return Object(f.d)(this,(function(s){switch(s.label){case 0:return(n=this.state.settings[0])&&n.name?[4,Object(p.getDataSourceSrv)().get(n.name)]:[3,4];case 1:return(r=s.sent())?(a=r.instanceSettings.jsonData,i={api:r},[4,Le(null===(e=null==a?void 0:a.metrics)||void 0===e?void 0:e.grafanaName)]):[3,4];case 2:return i.metrics=s.sent(),[4,Le(null===(t=null==a?void 0:a.logs)||void 0===t?void 0:t.grafanaName)];case 3:return i.logs=s.sent(),o=i,this.setState({instance:o,valid:Fe(o)}),this.updateNav(),[2];case 4:return console.log("Creating a new datasource TODO, check user auth"),[4,y()];case 5:s.sent(),console.log("Reload the windows (will redirect)"),window.location.reload(),s.label=6;case 6:return[2]}}))}))},t.prototype.componentDidMount=function(){return Object(f.b)(this,void 0,void 0,(function(){return Object(f.d)(this,(function(e){return this.updateNav(),this.loadInstances(),[2]}))}))},t.prototype.componentDidUpdate=function(e){this.props.query!==e.query&&this.props.query.page!==e.query.page&&this.updateNav()},t.prototype.updateNav=function(){var e,t,n=this.props,r=n.path,a=n.onNavChanged,o=n.query,i=n.meta,s=o.page||"checks",l=[];this.state.valid&&"config"!==s&&"redirect"!==s?(l.push({text:"Checks",url:r+"?page=checks",id:"checks"}),l.push({text:"Probes",url:r+"?page=probes",id:"probes"})):this.state.valid&&"redirect"===s?(l.push({text:"Dashboard Redirect",url:r+"?page=redirect",id:"redirect"}),l.push({text:"Config",url:r,id:"config"})):l.push({text:"Config",url:r,id:"config"});var c=!1;try{for(var u=Object(f.h)(l),p=u.next();!p.done;p=u.next()){var d=p.value;d.active=!c&&s===d.id,d.active&&(c=!0)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}c||(l[0].active=!0);var h={text:"Synthetic Monitoring",img:i.info.logos.large,subTitle:"Grafana Cloud Synthetic Monitoring",url:r,children:l};a({node:h,main:h})},t.prototype.renderMultipleConfigs=function(){return m.a.createElement("div",null,"TODO... multiple instances... delete one!!!!")},t.prototype.dashboardRedirect=function(){var e=this.state.instance,t=this.props.query;if(!e)return m.a.createElement("div",null,"Loading.... (or maybe a user permissions error?)");if(!t.dashboard)return m.a.createElement("div",null,"Dashboard not found");var n=w(t.dashboard,e.api);if(!n)return console.log("dashboard not found.",t),m.a.createElement("div",null,"Dashboard not found");var r="d/"+n.uid,a=Object(f.a)({},t);return delete a.dashboard,delete a.page,Object(p.getLocationSrv)().update({partial:!1,path:r,query:a}),null},t.prototype.renderConfig=function(){var e=this.state.instance;return e?m.a.createElement(D,{instance:e.api}):m.a.createElement("div",null,"Loading.... (or maybe a user permissions error?)")},t.prototype.render=function(){var e=this.state,t=e.settings,n=e.valid,r=e.instance;if(t.length>1)return this.renderMultipleConfigs();var a=this.props.query;return n&&"config"!==a.page?"dashboard"in a?this.dashboardRedirect():"checks"===a.page?m.a.createElement(Ne,{instance:r,id:a.id}):"probes"===a.page?m.a.createElement(Pe,{instance:r,id:a.id}):m.a.createElement("div",null,"Page not found."):this.renderConfig()},t}(v.PureComponent);function Le(e){return Object(f.b)(this,void 0,void 0,(function(){return Object(f.d)(this,(function(t){switch(t.label){case 0:if(!e)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(p.getDataSourceSrv)().get()];case 2:return[2,t.sent()];case 3:return t.sent(),[3,4];case 4:return[2,void 0]}}))}))}function Fe(e){return!!(e&&e.logs&&e.metrics&&e.api)}n.d(t,"plugin",(function(){return Ve})),n.d(t,"ConfigCtrl",(function(){return d}));var Ve=(new h.AppPlugin).setRootPage(Ue)}])}));
//# sourceMappingURL=module.js.map